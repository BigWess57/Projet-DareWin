<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:3,&quot;tests&quot;:11,&quot;passes&quot;:11,&quot;pending&quot;:0,&quot;failures&quot;:0,&quot;start&quot;:&quot;2025-09-18T17:56:20.384Z&quot;,&quot;end&quot;:&quot;2025-09-18T17:56:21.035Z&quot;,&quot;duration&quot;:651,&quot;testsRegistered&quot;:11,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;78303834-c48b-4c46-96f8-fbfb41b06c85&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeFactoryNEW.test.js&quot;,&quot;file&quot;:&quot;/test/ChallengeFactoryNEW.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;13b54d20-81b2-438a-a678-efd8e60e081a&quot;,&quot;title&quot;:&quot;tests ChallengeFactory contract&quot;,&quot;fullFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeFactoryNEW.test.js&quot;,&quot;file&quot;:&quot;/test/ChallengeFactoryNEW.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;6d1d2f69-f064-4080-a95f-31de615a19a5&quot;,&quot;title&quot;:&quot;First tests&quot;,&quot;fullFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeFactoryNEW.test.js&quot;,&quot;file&quot;:&quot;/test/ChallengeFactoryNEW.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;First tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;tests ChallengeFactory contract First tests \&quot;before each\&quot; hook in \&quot;First tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;({challengeFactory, signers, token } = await loadFixture(deployedChallengeFactoryFixtureBase));\nawait challengeFactory.createChallenge(duration, maxPlayers, bid, description, 0, ethers.ZeroHash);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d4b552c6-4446-465d-9a36-f1bdabba2f5a&quot;,&quot;parentUUID&quot;:&quot;6d1d2f69-f064-4080-a95f-31de615a19a5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should just deploy the challenge factory, and create a challenge&quot;,&quot;fullTitle&quot;:&quot;tests ChallengeFactory contract First tests should just deploy the challenge factory, and create a challenge&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;499ef01f-9a0d-4d7c-b253-851829bdd513&quot;,&quot;parentUUID&quot;:&quot;6d1d2f69-f064-4080-a95f-31de615a19a5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should should not be possible to deploy with a feeReceiver address to 0&quot;,&quot;fullTitle&quot;:&quot;tests ChallengeFactory contract First tests should should not be possible to deploy with a feeReceiver address to 0&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const ChallengeFactory = await ethers.getContractFactory(&#x27;ChallengeFactory&#x27;);\nawait expect(\n    ChallengeFactory.deploy(token.target, \&quot;0x0000000000000000000000000000000000000000\&quot;)\n).to.be.revertedWith(\&quot;the feeReceiver cannot be address 0!\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6891c4da-5ea1-4132-8688-3823f7e7c351&quot;,&quot;parentUUID&quot;:&quot;6d1d2f69-f064-4080-a95f-31de615a19a5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit an event on new challenge deployment&quot;,&quot;fullTitle&quot;:&quot;tests ChallengeFactory contract First tests should emit an event on new challenge deployment&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const filter = challengeFactory.filters.ChallengeCreated(signers[0].address);\n            const events = await challengeFactory.queryFilter(filter, -1)\n            const event = events[0]\n            expect(event.fragment.name).to.equal(&#x27;ChallengeCreated&#x27;)\n            const args = event.args\n            expect(args.admin).to.equal(signers[0].address)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a0dcd558-e5e6-4bf6-b45d-982c826c1518&quot;,&quot;parentUUID&quot;:&quot;6d1d2f69-f064-4080-a95f-31de615a19a5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow to deploy a new challenge contract&quot;,&quot;fullTitle&quot;:&quot;tests ChallengeFactory contract First tests should allow to deploy a new challenge contract&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// 2. Extract the address from the event\n            const filter = challengeFactory.filters.ChallengeCreated;\n            const events = await challengeFactory.queryFilter(filter, -1)\n            const event = events[0]\n            const newContractAddress = event.args.challengeAddress;\n            // 3. Attach to the deployed challenge\n            const Challenge = await ethers.getContractFactory(\&quot;Challenge\&quot;);\n            const challenge = Challenge.attach(newContractAddress);\n            // Verify initialisation\n            const _duration = await challenge.duration();\n            const _maxPlayers = await challenge.maxPlayers();\n            const _bid = await challenge.bid();\n            const _description = await challenge.description();\n            expect(_duration).to.equal(1000n);\n            expect(_maxPlayers).to.equal(5n);\n            expect(_bid).to.equal(bid);\n            expect(_description).to.equal(\&quot;test\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;41c84255-a885-4c3c-a03f-6e3b3a777dc8&quot;,&quot;parentUUID&quot;:&quot;6d1d2f69-f064-4080-a95f-31de615a19a5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow to deploy a new challenge contract in GROUP mode&quot;,&quot;fullTitle&quot;:&quot;tests ChallengeFactory contract First tests should allow to deploy a new challenge contract in GROUP mode&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const playersAllowed = [\n                [signers[0].address],\n                [signers[1].address],\n                [signers[2].address],\n                [signers[3].address],\n                [signers[4].address]\n            ]\n            const merkleTree = StandardMerkleTree.of(playersAllowed, [\&quot;address\&quot;]);\n            await challengeFactory.createChallenge(1111n, maxPlayers, bid+10n, description, true, merkleTree.root);\n            // 2. Extract the address from the event\n            const filter = challengeFactory.filters.ChallengeCreated;\n            const events = await challengeFactory.queryFilter(filter, -1)\n            const event = events[1]\n            const newContractAddress = event.args.challengeAddress;\n            // 3. Attach to the deployed challenge\n            const Challenge = await ethers.getContractFactory(\&quot;Challenge\&quot;);\n            const challenge = Challenge.attach(newContractAddress);\n            // Verify initialisation\n            const _duration = await challenge.duration();\n            const _maxPlayers = await challenge.maxPlayers();\n            const _bid = await challenge.bid();\n            const _description = await challenge.description();\n            expect(_duration).to.equal(1111n);\n            expect(_maxPlayers).to.equal(5n);\n            expect(_bid).to.equal(bid+10n);\n            expect(_description).to.equal(\&quot;test\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;99b211df-4c0c-4a62-b5eb-6e8111405f1d&quot;,&quot;parentUUID&quot;:&quot;6d1d2f69-f064-4080-a95f-31de615a19a5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should set the caller of the function createChallenge as owner of the challenge&quot;,&quot;fullTitle&quot;:&quot;tests ChallengeFactory contract First tests should set the caller of the function createChallenge as owner of the challenge&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// 2. Extract the address from the event\n            const filter = challengeFactory.filters.ChallengeCreated;\n            const events = await challengeFactory.queryFilter(filter, -1)\n            const event = events[0]\n            const newContractAddress = event.args.challengeAddress;\n            // 3. Attach to the deployed challenge\n            const Challenge = await ethers.getContractFactory(\&quot;Challenge\&quot;);\n            const challenge = Challenge.attach(newContractAddress);\n            const owner = await challenge.owner()\n            expect(owner).to.equal(signers[0].address)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;827ea1f3-4f7a-4396-99ca-d704e20b2c3f&quot;,&quot;parentUUID&quot;:&quot;6d1d2f69-f064-4080-a95f-31de615a19a5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;499ef01f-9a0d-4d7c-b253-851829bdd513&quot;,&quot;6891c4da-5ea1-4132-8688-3823f7e7c351&quot;,&quot;a0dcd558-e5e6-4bf6-b45d-982c826c1518&quot;,&quot;41c84255-a885-4c3c-a03f-6e3b3a777dc8&quot;,&quot;99b211df-4c0c-4a62-b5eb-6e8111405f1d&quot;,&quot;827ea1f3-4f7a-4396-99ca-d704e20b2c3f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:50,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;f84a3bb8-7af2-42ee-804f-d68c12a953c7&quot;,&quot;title&quot;:&quot;ChallengeFactoryNew pagination&quot;,&quot;fullFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeFactoryNEW.test.js&quot;,&quot;file&quot;:&quot;/test/ChallengeFactoryNEW.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;ChallengeFactoryNew pagination\&quot;&quot;,&quot;fullTitle&quot;:&quot;tests ChallengeFactory contract ChallengeFactoryNew pagination \&quot;before each\&quot; hook in \&quot;ChallengeFactoryNew pagination\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;({challengeFactory, signers, token } = await loadFixture(deployedChallengeFactoryFixtureBase));\n            // Create a bunch of challenges\n            this.numChallenges = 7;\n            this.created = [];\n            const startBlockNumber = (await ethers.provider.getBlock(\&quot;latest\&quot;)).number + 1;\n            for (let i = 0; i &lt; this.numChallenges; i++) {\n                const tx = await challengeFactory.createChallenge(\n                    duration,                // duration\n                    maxPlayers,                   // maxPlayers\n                    bid + BigInt(i),  // bid (just vary slightly)\n                    `desc ${i}`,         // description\n                    false,               // groupMode\n                    ethers.ZeroHash  // merkleRoot placeholder\n                );\n                const receipt = await tx.wait();\n            }\n            //then, create table once after all creations\n            const filter = challengeFactory.filters.ChallengeCreated();\n            const fromBlock = startBlockNumber; // capture before first create\n            const events = await challengeFactory.queryFilter(filter, fromBlock, \&quot;latest\&quot;);\n            \n            for(let i = 0; i &lt; this.numChallenges; i++) {\n                const challengeAddress = events[i].args.challengeAddress; // or evt.args[1]\n                this.created.push(challengeAddress);\n            }&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;be3bd027-c4ff-48a1-8ac2-3ad66d8f3b85&quot;,&quot;parentUUID&quot;:&quot;f84a3bb8-7af2-42ee-804f-d68c12a953c7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the first batch when count &lt; total&quot;,&quot;fullTitle&quot;:&quot;tests ChallengeFactory contract ChallengeFactoryNew pagination should return the first batch when count &lt; total&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const start = 0;\nconst count = 3;\nconst list = await challengeFactory.getChallenges(start, count);\nexpect(list.length).to.equal(count);\n// first `count` addresses should match\nfor (let i = 0; i &lt; count; i++) {\n    expect(list[i]).to.equal(this.created[i]);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cee5223d-a432-452e-abec-9e44bee58770&quot;,&quot;parentUUID&quot;:&quot;f84a3bb8-7af2-42ee-804f-d68c12a953c7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return entire list when count &gt;= total-start&quot;,&quot;fullTitle&quot;:&quot;tests ChallengeFactory contract ChallengeFactoryNew pagination should return entire list when count &gt;= total-start&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const start = 2;\nconst count = 10;  // more than remaining\nconst list = await challengeFactory.getChallenges(start, count);\nexpect(list.length).to.equal(this.numChallenges - start);\nfor (let i = start; i &lt; this.numChallenges; i++) {\nexpect(list[i - start]).to.equal(this.created[i]);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2823c69f-88a9-4dde-9d19-6ff35e9fdfde&quot;,&quot;parentUUID&quot;:&quot;f84a3bb8-7af2-42ee-804f-d68c12a953c7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return empty array when start &gt;= total&quot;,&quot;fullTitle&quot;:&quot;tests ChallengeFactory contract ChallengeFactoryNew pagination should return empty array when start &gt;= total&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const start = this.numChallenges;  // equals length\nconst count = 5;\nconst list = await challengeFactory.getChallenges(start, count);\nexpect(list.length).to.equal(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;96e7d242-5cbd-48c7-bfdc-f0cda48e3ad2&quot;,&quot;parentUUID&quot;:&quot;f84a3bb8-7af2-42ee-804f-d68c12a953c7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return empty if count is zero&quot;,&quot;fullTitle&quot;:&quot;tests ChallengeFactory contract ChallengeFactoryNew pagination should return empty if count is zero&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const start = 1;\nconst count = 0;\nconst list = await challengeFactory.getChallenges(start, count);\nexpect(list.length).to.equal(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9058cfab-b7cb-4f97-9059-c820fa9b38d2&quot;,&quot;parentUUID&quot;:&quot;f84a3bb8-7af2-42ee-804f-d68c12a953c7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return last element when start = total - 1 and count &gt;=1&quot;,&quot;fullTitle&quot;:&quot;tests ChallengeFactory contract ChallengeFactoryNew pagination should return last element when start = total - 1 and count &gt;=1&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const start = this.numChallenges - 1;\nconst count = 5;\nconst list = await challengeFactory.getChallenges(start, count);\nexpect(list.length).to.equal(1);\nexpect(list[0]).to.equal(this.created[this.numChallenges - 1]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cfc6ddf2-0a69-4a25-8116-f689d7dc9bf2&quot;,&quot;parentUUID&quot;:&quot;f84a3bb8-7af2-42ee-804f-d68c12a953c7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cee5223d-a432-452e-abec-9e44bee58770&quot;,&quot;2823c69f-88a9-4dde-9d19-6ff35e9fdfde&quot;,&quot;96e7d242-5cbd-48c7-bfdc-f0cda48e3ad2&quot;,&quot;9058cfab-b7cb-4f97-9059-c820fa9b38d2&quot;,&quot;cfc6ddf2-0a69-4a25-8116-f689d7dc9bf2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:12,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:40000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;10.8.2&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:true,&quot;reportFilename&quot;:&quot;report&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;7.1.3&quot;},&quot;marge&quot;:{&quot;options&quot;:{&quot;reportDir&quot;:&quot;test-report&quot;,&quot;reportFilename&quot;:&quot;report&quot;,&quot;quiet&quot;:true},&quot;version&quot;:&quot;6.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;report&quot;,&quot;reportDir&quot;:&quot;test-report&quot;,&quot;reportTitle&quot;:&quot;backend&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;test-report/assets&quot;,&quot;jsonFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test-report/report.json&quot;,&quot;htmlFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test-report/report.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>