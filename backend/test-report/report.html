<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:17,&quot;tests&quot;:70,&quot;passes&quot;:70,&quot;pending&quot;:0,&quot;failures&quot;:0,&quot;start&quot;:&quot;2025-12-08T23:41:58.613Z&quot;,&quot;end&quot;:&quot;2025-12-08T23:41:59.949Z&quot;,&quot;duration&quot;:1336,&quot;testsRegistered&quot;:70,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;5aa00235-8ca0-40b6-9407-01c8a96d2f30&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;772438d5-fe2a-4e97-81e2-9116ba0a1225&quot;,&quot;title&quot;:&quot;tests Challenge contract&quot;,&quot;fullFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js&quot;,&quot;file&quot;:&quot;/test/Challenge.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;b5201732-be63-4c72-8e68-605f0bd9245f&quot;,&quot;title&quot;:&quot;deployment&quot;,&quot;fullFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js&quot;,&quot;file&quot;:&quot;/test/Challenge.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;deployment\&quot;&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract deployment \&quot;before each\&quot; hook in \&quot;deployment\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;signers = await ethers.getSigners();\n//Token deployment\nconst DareWinToken = await ethers.getContractFactory(&#x27;DareWin&#x27;);\ntoken = await DareWinToken.deploy(signers[0].address);\nbid = ethers.parseUnits(\&quot;1000\&quot;, await token.decimals());&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c8eea757-585f-402a-8685-fdd400e10164&quot;,&quot;parentUUID&quot;:&quot;b5201732-be63-4c72-8e68-605f0bd9245f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should juste deploy the contract&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract deployment should juste deploy the contract&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const playersAllowed = [\n    [signers[0].address],\n    [signers[1].address],\n    [signers[2].address],\n    [signers[3].address],\n    [signers[4].address]\n]\nmerkleTree = StandardMerkleTree.of(playersAllowed, [\&quot;address\&quot;]);\nconst Challenge = await ethers.getContractFactory(&#x27;Challenge&#x27;);\n//Challenge Deployment\nawait expect(\n    challenge = await Challenge.deploy(signers[0].address, token.target, duration, bid, description, signers[0].address, merkleTree.root, \&quot;ipfsCid\&quot;)\n).to.not.be.reverted&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;67324752-62a4-42e1-8f7e-7fbbe9bbd227&quot;,&quot;parentUUID&quot;:&quot;b5201732-be63-4c72-8e68-605f0bd9245f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;6bcdd4fa-a4bf-4f90-b73f-cb8622c27d82&quot;,&quot;title&quot;:&quot;Constructor Validation Tests&quot;,&quot;fullFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js&quot;,&quot;file&quot;:&quot;/test/Challenge.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;Constructor Validation Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract deployment Constructor Validation Tests \&quot;before each\&quot; hook in \&quot;Constructor Validation Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;signers = await ethers.getSigners();\nconst DareWinToken = await ethers.getContractFactory(&#x27;DareWin&#x27;);\ntoken = await DareWinToken.deploy(signers[0].address);\nbid = ethers.parseUnits(\&quot;1000\&quot;, await token.decimals());&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;36080782-37dc-456c-9f70-bef0cd314c16&quot;,&quot;parentUUID&quot;:&quot;6bcdd4fa-a4bf-4f90-b73f-cb8622c27d82&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should revert with ZeroAddressToken when token address is zero&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract deployment Constructor Validation Tests should revert with ZeroAddressToken when token address is zero&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const Challenge = await ethers.getContractFactory(&#x27;Challenge&#x27;);\nawait expect(\n    Challenge.deploy(\n        signers[0].address,\n        \&quot;0x0000000000000000000000000000000000000000\&quot;, // Invalid token\n        duration,\n        bid,\n        description,\n        signers[0].address,\n        nonZeroMerkleRoot,\n        \&quot;ipfsCid\&quot;\n    )\n).to.be.revertedWithCustomError(Challenge, \&quot;ZeroAddressToken\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;697690d8-ccfd-4de0-9a79-809e9ef59b47&quot;,&quot;parentUUID&quot;:&quot;6bcdd4fa-a4bf-4f90-b73f-cb8622c27d82&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should revert with ZeroAddressFeeReceiver when feeReceiver address is 0&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract deployment Constructor Validation Tests should revert with ZeroAddressFeeReceiver when feeReceiver address is 0&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const Challenge = await ethers.getContractFactory(&#x27;Challenge&#x27;);\nawait expect(\n    Challenge.deploy(\n        signers[0].address,\n        token.target, // Invalid token\n        duration,\n        bid,\n        description,\n        \&quot;0x0000000000000000000000000000000000000000\&quot;,\n        nonZeroMerkleRoot,\n        \&quot;ipfsCid\&quot;\n    )\n).to.be.revertedWithCustomError(Challenge, \&quot;ZeroAddressFeeReceiver\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9bd51c84-ff11-46fc-8340-ed58a63adc05&quot;,&quot;parentUUID&quot;:&quot;6bcdd4fa-a4bf-4f90-b73f-cb8622c27d82&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should revert with InvalidDuration when duration is 0&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract deployment Constructor Validation Tests should revert with InvalidDuration when duration is 0&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const Challenge = await ethers.getContractFactory(&#x27;Challenge&#x27;);\nawait expect(\n    Challenge.deploy(\n        signers[0].address,\n        token.target,\n        0n, // Invalid duration\n        bid,\n        description,\n        signers[0].address,\n        nonZeroMerkleRoot,\n        \&quot;ipfsCid\&quot;\n    )\n).to.be.revertedWithCustomError(Challenge, \&quot;InvalidDuration\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a2d6e572-d0f5-4267-b0f7-5552b3b998a2&quot;,&quot;parentUUID&quot;:&quot;6bcdd4fa-a4bf-4f90-b73f-cb8622c27d82&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should revert with InsufficientBid when bid is 0&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract deployment Constructor Validation Tests should revert with InsufficientBid when bid is 0&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const Challenge = await ethers.getContractFactory(&#x27;Challenge&#x27;);\nawait expect(\n    Challenge.deploy(\n        signers[0].address,\n        token.target,\n        duration,\n        0n, // Invalid bid\n        description,\n        signers[0].address,\n        nonZeroMerkleRoot,\n        \&quot;ipfsCid\&quot;\n    )\n).to.be.revertedWithCustomError(Challenge, \&quot;InsufficientBid\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0f276934-b9de-4e5e-924f-5728d31b69bc&quot;,&quot;parentUUID&quot;:&quot;6bcdd4fa-a4bf-4f90-b73f-cb8622c27d82&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should revert with IPFSCidEmpty when IPFS CID is empty&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract deployment Constructor Validation Tests should revert with IPFSCidEmpty when IPFS CID is empty&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const playersAllowed = [\n    [signers[0].address],\n    [signers[1].address]\n];\nconst merkleTree = StandardMerkleTree.of(playersAllowed, [\&quot;address\&quot;]);\n\nconst Challenge = await ethers.getContractFactory(&#x27;Challenge&#x27;);\nawait expect(\n    Challenge.deploy(\n        signers[0].address,\n        token.target,\n        duration,\n        bid,\n        description,\n        signers[0].address,\n        merkleTree.root,\n        \&quot;\&quot;\n    )\n).to.be.revertedWithCustomError(Challenge, \&quot;IPFSCidEmpty\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9ede83f2-a578-466f-b0d3-1a9b30d7cabd&quot;,&quot;parentUUID&quot;:&quot;6bcdd4fa-a4bf-4f90-b73f-cb8622c27d82&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should revert with MerkleRootRequired if the merkle root is 0&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract deployment Constructor Validation Tests should revert with MerkleRootRequired if the merkle root is 0&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const Challenge = await ethers.getContractFactory(&#x27;Challenge&#x27;); \nawait expect(\n    Challenge.deploy(signers[0].address, token.target, duration, bid, description, signers[0].address, ethers.ZeroHash, \&quot;ipfsCid\&quot;)\n).to.be.revertedWithCustomError(Challenge, \&quot;MerkleRootRequired\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0296b636-8e03-4bc5-a097-690309df1a91&quot;,&quot;parentUUID&quot;:&quot;6bcdd4fa-a4bf-4f90-b73f-cb8622c27d82&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;697690d8-ccfd-4de0-9a79-809e9ef59b47&quot;,&quot;9bd51c84-ff11-46fc-8340-ed58a63adc05&quot;,&quot;a2d6e572-d0f5-4267-b0f7-5552b3b998a2&quot;,&quot;0f276934-b9de-4e5e-924f-5728d31b69bc&quot;,&quot;9ede83f2-a578-466f-b0d3-1a9b30d7cabd&quot;,&quot;0296b636-8e03-4bc5-a097-690309df1a91&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:50,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000}],&quot;passes&quot;:[&quot;67324752-62a4-42e1-8f7e-7fbbe9bbd227&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:16,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;291262d1-c957-4ff6-8fe8-0af7974306c7&quot;,&quot;title&quot;:&quot;gathering players state&quot;,&quot;fullFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js&quot;,&quot;file&quot;:&quot;/test/Challenge.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;gathering players state\&quot;&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract gathering players state \&quot;before each\&quot; hook in \&quot;gathering players state\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;({challenge, signers, bid, token, merkleTree} = await loadFixture(deployedChallengeFixtureBase));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8ba751ce-2126-40e8-95ae-9848a5aa07bb&quot;,&quot;parentUUID&quot;:&quot;291262d1-c957-4ff6-8fe8-0af7974306c7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should allow a player to join, and sends the money to the challenge contract correctly&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract gathering players state should allow a player to join, and sends the money to the challenge contract correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { v, r, s, deadline } = await GetRSVsig(signers[0], token, bid, challenge);\nconst proof1 = merkleTree.getProof([signers[0].address]);\nexpect(\n    await token.balanceOf(challenge)\n).to.equal(0)\nawait expect(\n    challenge.joinChallenge(deadline, v, r, s, proof1)\n)\n.to.not.be.reverted;\n\nexpect(\n    await token.balanceOf(challenge)\n).to.equal(bid)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0f8be9c1-f927-4ced-926b-b2e4ce747f29&quot;,&quot;parentUUID&quot;:&quot;291262d1-c957-4ff6-8fe8-0af7974306c7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow a player to join if the permit is wrong&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract gathering players state should not allow a player to join if the permit is wrong&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { v, r, s, deadline } = await GetRSVsig(signers[1], token, bid, challenge);\nconst proof1 = merkleTree.getProof([signers[0].address]);\nawait expect(\n    challenge.connect(signers[0]).joinChallenge(deadline, v, r, s, proof1)\n)\n.to.be.revertedWithCustomError(token, \&quot;ERC20InsufficientAllowance\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8cd826f1-a5bc-404b-9c40-5b44ad4c5b49&quot;,&quot;parentUUID&quot;:&quot;291262d1-c957-4ff6-8fe8-0af7974306c7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow a player to join if he is not among those chosen by the admin at creation&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract gathering players state should not allow a player to join if he is not among those chosen by the admin at creation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { v: v1, r: r1, s: s1, deadline: deadline1 } = await GetRSVsig(signers[5], token, bid, challenge);\nconst proof1 = merkleTree.getProof([signers[0].address]);\nawait expect(\n    challenge.connect(signers[5]).joinChallenge(deadline1, v1, r1, s1, proof1)\n).to.be.revertedWithCustomError(challenge, \&quot;NotWhitelisted\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;969de01f-006b-4bec-bac8-1e39d66de7b1&quot;,&quot;parentUUID&quot;:&quot;291262d1-c957-4ff6-8fe8-0af7974306c7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow a participant to join twice&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract gathering players state should not allow a participant to join twice&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { v: v1, r: r1, s: s1, deadline: deadline1 } = await GetRSVsig(signers[0], token, bid, challenge);\nconst proof1 = merkleTree.getProof([signers[0].address]);\nawait challenge.joinChallenge(deadline1, v1, r1, s1, proof1);\nawait expect(challenge.joinChallenge(deadline1, v1, r1, s1, proof1)).to.be.revertedWithCustomError(challenge, \&quot;AlreadyJoined\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9852fb68-bc99-4ee5-a3c1-759176c08fef&quot;,&quot;parentUUID&quot;:&quot;291262d1-c957-4ff6-8fe8-0af7974306c7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow a player to join even if his permit has been frontran (avoid DoS)&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract gathering players state should allow a player to join even if his permit has been frontran (avoid DoS)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { v: v1, r: r1, s: s1, deadline: deadline1 } = await GetRSVsig(signers[0], token, bid, challenge);\nconst proof1 = merkleTree.getProof([signers[0].address]);\n//Frontrun the permit call\nawait token.permit(signers[0].address, challenge, bid, deadline1, v1, r1, s1);\nawait expect(\n    challenge.connect(signers[0]).joinChallenge(deadline1, v1, r1, s1, proof1)\n).to.not.be.reverted;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8c6d8ba9-9161-4490-adc6-3466d42f6d92&quot;,&quot;parentUUID&quot;:&quot;291262d1-c957-4ff6-8fe8-0af7974306c7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow a player to withdraw from the challenge (before start), while letting the challenge start when required without issues. Money should be sent back to him&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract gathering players state should allow a player to withdraw from the challenge (before start), while letting the challenge start when required without issues. Money should be sent back to him&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:28,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//5 players join\nconst { v: v1, r: r1, s: s1, deadline: deadline1 } = await GetRSVsig(signers[0], token, bid, challenge);\nconst { v: v2, r: r2, s: s2, deadline: deadline2 } = await GetRSVsig(signers[1], token, bid, challenge);\nconst { v: v3, r: r3, s: s3, deadline: deadline3 } = await GetRSVsig(signers[2], token, bid, challenge);\nconst { v: v4, r: r4, s: s4, deadline: deadline4 } = await GetRSVsig(signers[3], token, bid, challenge);\nconst { v: v5, r: r5, s: s5, deadline: deadline5 } = await GetRSVsig(signers[4], token, bid, challenge);\nconst proof1 = merkleTree.getProof([signers[0].address]);\nconst proof2 = merkleTree.getProof([signers[1].address]);\nconst proof3 = merkleTree.getProof([signers[2].address]);\nconst proof4 = merkleTree.getProof([signers[3].address]);\nconst proof5 = merkleTree.getProof([signers[4].address]);\nawait challenge.joinChallenge(deadline1, v1, r1, s1, proof1);\nawait challenge.connect(signers[1]).joinChallenge(deadline2, v2, r2, s2, proof2);\nawait challenge.connect(signers[2]).joinChallenge(deadline3, v3, r3, s3, proof3);\nawait challenge.connect(signers[3]).joinChallenge(deadline4, v4, r4, s4, proof4);\nawait challenge.connect(signers[4]).joinChallenge(deadline5, v5, r5, s5, proof5);\n//one player withdraws from challenge\nexpect(\n    await token.balanceOf(signers[2].address)\n).to.equal(0);\nawait challenge.connect(signers[2]).withdrawFromChallenge();\n//His balance should be 1000\nexpect(\n    await token.balanceOf(signers[2].address)\n).to.equal(bid);\n//Admin successfully starts challenge\nawait challenge.startChallenge();\nexpect(\n   await challenge.currentStatus()\n).to.equal(ChallengeStatus.OngoingChallenge);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;22a55f4b-06ec-41c4-94e3-b4a90c9696e3&quot;,&quot;parentUUID&quot;:&quot;291262d1-c957-4ff6-8fe8-0af7974306c7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow a player to withdraw from the challenge if he hasnt joined&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract gathering players state should not allow a player to withdraw from the challenge if he hasnt joined&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//try to withdraw without having joined, reverts\nawait expect(\n   challenge.withdrawFromChallenge()\n).to.be.revertedWithCustomError(challenge, \&quot;NotJoined\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;458b30b5-a6bf-496a-8a16-525f5391c466&quot;,&quot;parentUUID&quot;:&quot;291262d1-c957-4ff6-8fe8-0af7974306c7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow a player to join, and then withdraw twice&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract gathering players state should not allow a player to join, and then withdraw twice&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { v: v1, r: r1, s: s1, deadline: deadline1 } = await GetRSVsig(signers[0], token, bid, challenge);\nconst proof1 = merkleTree.getProof([signers[0].address]);\nawait challenge.joinChallenge(deadline1, v1, r1, s1, proof1);\nawait challenge.withdrawFromChallenge();\n//try to withdraw without having joined, reverts\nawait expect(\n   challenge.withdrawFromChallenge()\n).to.be.revertedWithCustomError(challenge, \&quot;NotJoined\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3708f0af-5c5c-48ec-8330-d2b8c576d2a7&quot;,&quot;parentUUID&quot;:&quot;291262d1-c957-4ff6-8fe8-0af7974306c7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow a player to join, withdraw and then join again the challenge&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract gathering players state should allow a player to join, withdraw and then join again the challenge&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//Needed twice, because of the nonce\nconst { v: v1, r: r1, s: s1, deadline: deadline1 } = await GetRSVsig(signers[0], token, bid, challenge);\nconst proof1 = merkleTree.getProof([signers[0].address]);\nawait challenge.joinChallenge(deadline1, v1, r1, s1, proof1);\nawait challenge.withdrawFromChallenge();\nconst { v: v2, r: r2, s: s2, deadline: deadline2 } = await GetRSVsig(signers[0], token, bid, challenge);\nconst proof2 = merkleTree.getProof([signers[0].address]);\nawait expect(\n   challenge.joinChallenge(deadline2, v2, r2, s2, proof2)\n).to.not.be.reverted&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e7a7f75c-9fde-496d-97fa-06d48a3b6156&quot;,&quot;parentUUID&quot;:&quot;291262d1-c957-4ff6-8fe8-0af7974306c7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow to start the challenge if there is less than 2 players&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract gathering players state should not allow to start the challenge if there is less than 2 players&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { v: v1, r: r1, s: s1, deadline: deadline1 } = await GetRSVsig(signers[0], token, bid, challenge);\nconst proof1 = merkleTree.getProof([signers[0].address]);\nawait challenge.joinChallenge(deadline1, v1, r1, s1, proof1);\nawait expect(\n    challenge.startChallenge()\n).to.be.revertedWithCustomError(challenge, \&quot;InsufficientPlayersToStart\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9e17f0a8-8f55-4dff-9e63-3289616a0be2&quot;,&quot;parentUUID&quot;:&quot;291262d1-c957-4ff6-8fe8-0af7974306c7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow the admin to go to the next state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract gathering players state should allow the admin to go to the next state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { v: v1, r: r1, s: s1, deadline: deadline1 } = await GetRSVsig(signers[0], token, bid, challenge);\nconst { v: v2, r: r2, s: s2, deadline: deadline2 } = await GetRSVsig(signers[1], token, bid, challenge);\nconst proof1 = merkleTree.getProof([signers[0].address]);\nconst proof2 = merkleTree.getProof([signers[1].address]);\nawait challenge.joinChallenge(deadline1, v1, r1, s1, proof1);\nawait challenge.connect(signers[1]).joinChallenge(deadline2, v2, r2, s2, proof2);\nawait challenge.startChallenge();\nexpect(\n   await challenge.currentStatus()\n).to.equal(ChallengeStatus.OngoingChallenge);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;308f6adc-ae19-473f-aefc-9eff4bef4988&quot;,&quot;parentUUID&quot;:&quot;291262d1-c957-4ff6-8fe8-0af7974306c7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0f8be9c1-f927-4ced-926b-b2e4ce747f29&quot;,&quot;8cd826f1-a5bc-404b-9c40-5b44ad4c5b49&quot;,&quot;969de01f-006b-4bec-bac8-1e39d66de7b1&quot;,&quot;9852fb68-bc99-4ee5-a3c1-759176c08fef&quot;,&quot;8c6d8ba9-9161-4490-adc6-3466d42f6d92&quot;,&quot;22a55f4b-06ec-41c4-94e3-b4a90c9696e3&quot;,&quot;458b30b5-a6bf-496a-8a16-525f5391c466&quot;,&quot;3708f0af-5c5c-48ec-8330-d2b8c576d2a7&quot;,&quot;e7a7f75c-9fde-496d-97fa-06d48a3b6156&quot;,&quot;9e17f0a8-8f55-4dff-9e63-3289616a0be2&quot;,&quot;308f6adc-ae19-473f-aefc-9eff4bef4988&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:107,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;f5f5afe3-26fb-470c-85ad-37e63a83fc77&quot;,&quot;title&quot;:&quot;ongoing challenge state&quot;,&quot;fullFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js&quot;,&quot;file&quot;:&quot;/test/Challenge.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;ongoing challenge state\&quot;&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract ongoing challenge state \&quot;before each\&quot; hook in \&quot;ongoing challenge state\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:71,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;({challenge, signers} = await loadFixture(OngoingChallengeFixture));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;31357cbc-1441-4c45-9a3e-295d6ddd0250&quot;,&quot;parentUUID&quot;:&quot;f5f5afe3-26fb-470c-85ad-37e63a83fc77&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;state should be \&quot;OngoingChallenge\&quot; during the challenge. &quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract ongoing challenge state state should be \&quot;OngoingChallenge\&quot; during the challenge. &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;expect(await challenge.currentStatus()).to.equal(ChallengeStatus.OngoingChallenge);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0c448753-fbbc-4910-bb72-d9996cd4188e&quot;,&quot;parentUUID&quot;:&quot;f5f5afe3-26fb-470c-85ad-37e63a83fc77&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0c448753-fbbc-4910-bb72-d9996cd4188e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;01d0296d-7cdf-4283-a6b2-631df4ade630&quot;,&quot;title&quot;:&quot;voting for winner state&quot;,&quot;fullFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js&quot;,&quot;file&quot;:&quot;/test/Challenge.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;voting for winner state\&quot;&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract voting for winner state \&quot;before each\&quot; hook in \&quot;voting for winner state\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;({challenge, signers} = await loadFixture(VotingForWinnerFixture));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e3abe0f0-3fd7-4f47-a85b-6aa987192de5&quot;,&quot;parentUUID&quot;:&quot;01d0296d-7cdf-4283-a6b2-631df4ade630&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should allow a player to vote (for another player).&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract voting for winner state should allow a player to vote (for another player).&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n    challenge.voteForWinner(signers[1].address)\n).to.not.be.reverted;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;06b85d6c-e1c3-4288-8e9e-ec209901c8f6&quot;,&quot;parentUUID&quot;:&quot;01d0296d-7cdf-4283-a6b2-631df4ade630&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow a non player to vote&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract voting for winner state should not allow a non player to vote&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n   challenge.connect(signers[5]).voteForWinner(signers[1].address)\n).to.be.revertedWithCustomError(challenge, \&quot;NotAPlayer\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a3367f6b-a34a-4776-8dab-9ec0263d5caf&quot;,&quot;parentUUID&quot;:&quot;01d0296d-7cdf-4283-a6b2-631df4ade630&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow a player to vote twice&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract voting for winner state should not allow a player to vote twice&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await challenge.voteForWinner(signers[1].address);\nawait expect(\n   challenge.voteForWinner(signers[1].address)\n).to.be.revertedWithCustomError(challenge, \&quot;AlreadyVoted\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;92667ee2-29ae-4fed-9b18-d19a7411e09a&quot;,&quot;parentUUID&quot;:&quot;01d0296d-7cdf-4283-a6b2-631df4ade630&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should revert with InvalidVoteTarget when voting for non-player&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract voting for winner state should revert with InvalidVoteTarget when voting for non-player&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n    challenge.voteForWinner(signers[5].address) // signer[5] never joined\n).to.be.revertedWithCustomError(challenge, \&quot;InvalidVoteTarget\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8912e179-29ec-415f-848f-5bf3d321ad8b&quot;,&quot;parentUUID&quot;:&quot;01d0296d-7cdf-4283-a6b2-631df4ade630&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should revert with InvalidVoteTarget when voting for zero address&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract voting for winner state should revert with InvalidVoteTarget when voting for zero address&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n    challenge.voteForWinner(ethers.ZeroAddress)\n).to.be.revertedWithCustomError(challenge, \&quot;InvalidVoteTarget\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0c431000-cf1d-4d92-8846-13f0a811d6fd&quot;,&quot;parentUUID&quot;:&quot;01d0296d-7cdf-4283-a6b2-631df4ade630&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow to go to next state (ChallengeWon) if everyone has not voted (and minimum delay hasn&#x27;t passed)&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract voting for winner state should not allow to go to next state (ChallengeWon) if everyone has not voted (and minimum delay hasn&#x27;t passed)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await challenge.voteForWinner(signers[1].address)\nawait challenge.connect(signers[1]).voteForWinner(signers[1].address)\nawait expect(\n   challenge.endWinnerVote()\n).to.be.revertedWithCustomError(challenge, \&quot;VotingStillOngoing\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;388ce521-f1bd-4818-a506-5351569f39ab&quot;,&quot;parentUUID&quot;:&quot;01d0296d-7cdf-4283-a6b2-631df4ade630&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow ANYONE to go to next state (ChallengeWon) if everyone has not voted but minimum delay has passed&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract voting for winner state should allow ANYONE to go to next state (ChallengeWon) if everyone has not voted but minimum delay has passed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await challenge.voteForWinner(signers[1].address)\nawait challenge.connect(signers[1]).voteForWinner(signers[1].address)\n//Pass enough time\nawait time.increase(votingDelay);\nawait expect(\n   challenge.connect(signers[2]).endWinnerVote()\n).not.to.be.reverted;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;16275709-beb5-4522-ada7-6607de3f02fc&quot;,&quot;parentUUID&quot;:&quot;01d0296d-7cdf-4283-a6b2-631df4ade630&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow ANYONE to go to next state (ChallengeWon) when everyone voted&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract voting for winner state should allow ANYONE to go to next state (ChallengeWon) when everyone voted&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await challenge.voteForWinner(signers[1].address)\nawait challenge.connect(signers[1]).voteForWinner(signers[1].address) \nawait challenge.connect(signers[2]).voteForWinner(signers[2].address) \nawait challenge.connect(signers[3]).voteForWinner(signers[1].address) \nawait challenge.connect(signers[4]).voteForWinner(signers[2].address) \n//Any player can end vote, because everyone has voted\nawait challenge.connect(signers[1]).endWinnerVote();\nexpect(await challenge.currentStatus()).to.equal(ChallengeStatus.ChallengeWon);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6d97aa53-21af-4c37-8cb1-72ae5c087cf8&quot;,&quot;parentUUID&quot;:&quot;01d0296d-7cdf-4283-a6b2-631df4ade630&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow ANYONE to go to next state (ChallengeWon) if no one has voted (even if time has passed)&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract voting for winner state should not allow ANYONE to go to next state (ChallengeWon) if no one has voted (even if time has passed)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//Pass enough time\n            await time.increase(votingDelay);\n            //Any player can end vote, because everyone has voted\n            await expect(challenge.connect(signers[1]).endWinnerVote()).to.be.revertedWithCustomError(challenge, \&quot;InvalidState\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;199eaf20-198b-457c-8a00-cc9882993644&quot;,&quot;parentUUID&quot;:&quot;01d0296d-7cdf-4283-a6b2-631df4ade630&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;06b85d6c-e1c3-4288-8e9e-ec209901c8f6&quot;,&quot;a3367f6b-a34a-4776-8dab-9ec0263d5caf&quot;,&quot;92667ee2-29ae-4fed-9b18-d19a7411e09a&quot;,&quot;8912e179-29ec-415f-848f-5bf3d321ad8b&quot;,&quot;0c431000-cf1d-4d92-8846-13f0a811d6fd&quot;,&quot;388ce521-f1bd-4818-a506-5351569f39ab&quot;,&quot;16275709-beb5-4522-ada7-6607de3f02fc&quot;,&quot;6d97aa53-21af-4c37-8cb1-72ae5c087cf8&quot;,&quot;199eaf20-198b-457c-8a00-cc9882993644&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:37,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;e1f9bc97-8369-40ba-8b12-dfb86189d281&quot;,&quot;title&quot;:&quot;challenge won state&quot;,&quot;fullFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js&quot;,&quot;file&quot;:&quot;/test/Challenge.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;challenge won state\&quot;&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract challenge won state \&quot;before each\&quot; hook in \&quot;challenge won state\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;({challenge, signers, bid, token} = await loadFixture(VotingForWinnerFixture));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;18274467-79a9-426a-8502-8aa98ccd9e7c&quot;,&quot;parentUUID&quot;:&quot;e1f9bc97-8369-40ba-8b12-dfb86189d281&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;winner should be able to retrieve prize when endWinnerVote() is triggered&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract challenge won state winner should be able to retrieve prize when endWinnerVote() is triggered&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//Players voting\nawait challenge.voteForWinner(signers[1].address)\nawait challenge.connect(signers[1]).voteForWinner(signers[2].address) \nawait challenge.connect(signers[2]).voteForWinner(signers[2].address) \nawait challenge.connect(signers[3]).voteForWinner(signers[1].address) \nawait challenge.connect(signers[4]).voteForWinner(signers[2].address) \n//Check balance before\nconst balanceBefore = await token.balanceOf(signers[2].address);\n//End vote\nawait challenge.endWinnerVote();\nawait challenge.connect(signers[2]).withdrawPrize();\n//Check balance after\nconst balanceAfter = await token.balanceOf(signers[2].address);\nconst diff = balanceAfter - balanceBefore;\nconst expectedDiff = bid*5n - 5n*bid*bronze/100n;\n//Difference should be equal to cash prize won\nexpect(diff).to.equal(expectedDiff); // substract fees too&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;99b12469-7bb5-495e-b6f1-5ed90c854a7d&quot;,&quot;parentUUID&quot;:&quot;e1f9bc97-8369-40ba-8b12-dfb86189d281&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should revert with NotAWinner when non-winner tries to withdraw&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract challenge won state should revert with NotAWinner when non-winner tries to withdraw&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// signers[2] has 2 votes, signers[1] has 3 votes (winner)\n// signers[0] has 0 votes, signers[3] has 0 votes, signers[4] has 0 votes\n//Players voting\nawait challenge.voteForWinner(signers[1].address)\nawait challenge.connect(signers[1]).voteForWinner(signers[2].address) \nawait challenge.connect(signers[2]).voteForWinner(signers[2].address) \nawait challenge.connect(signers[3]).voteForWinner(signers[1].address) \nawait challenge.connect(signers[4]).voteForWinner(signers[2].address) \n//End vote\nawait challenge.endWinnerVote();\nawait expect(\n    challenge.connect(signers[0]).withdrawPrize()\n).to.be.revertedWithCustomError(challenge, \&quot;NotAWinner\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6da2751b-547c-4f77-b6e1-eff7c901a138&quot;,&quot;parentUUID&quot;:&quot;e1f9bc97-8369-40ba-8b12-dfb86189d281&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should revert with NotAWinner when player with votes (but not highest) tries to withdraw&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract challenge won state should revert with NotAWinner when player with votes (but not highest) tries to withdraw&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// In EndingVoteFixture, signers[2] has 2 votes but signers[1] has 3 (highest)\n//Players voting\nawait challenge.voteForWinner(signers[1].address)\nawait challenge.connect(signers[1]).voteForWinner(signers[2].address) \nawait challenge.connect(signers[2]).voteForWinner(signers[2].address) \nawait challenge.connect(signers[3]).voteForWinner(signers[1].address) \nawait challenge.connect(signers[4]).voteForWinner(signers[2].address) \n//End vote\nawait challenge.endWinnerVote();\nawait expect(\n    challenge.connect(signers[1]).withdrawPrize()\n).to.be.revertedWithCustomError(challenge, \&quot;NotAWinner\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2ad4b5cf-8855-49c1-b62a-7673a08252fb&quot;,&quot;parentUUID&quot;:&quot;e1f9bc97-8369-40ba-8b12-dfb86189d281&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;winner should NOT be able to retrieve prize multiple times&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract challenge won state winner should NOT be able to retrieve prize multiple times&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//Players voting\nawait challenge.voteForWinner(signers[1].address)\nawait challenge.connect(signers[1]).voteForWinner(signers[2].address) \nawait challenge.connect(signers[2]).voteForWinner(signers[2].address) \nawait challenge.connect(signers[3]).voteForWinner(signers[1].address) \nawait challenge.connect(signers[4]).voteForWinner(signers[2].address) \n//End vote\nawait challenge.endWinnerVote();\nawait challenge.connect(signers[2]).withdrawPrize();\nawait expect(\n    challenge.connect(signers[2]).withdrawPrize()\n).to.be.revertedWithCustomError(challenge, \&quot;PrizeAlreadyWithdrawn\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4f9fb41a-a14f-4f20-a696-f5a1b0cf26f7&quot;,&quot;parentUUID&quot;:&quot;e1f9bc97-8369-40ba-8b12-dfb86189d281&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;When there is a tie, should allow both winners to receive prize&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract challenge won state When there is a tie, should allow both winners to receive prize&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//Players voting\nawait challenge.voteForWinner(signers[3].address)\nawait challenge.connect(signers[1]).voteForWinner(signers[1].address)\nawait challenge.connect(signers[2]).voteForWinner(signers[3].address)\nawait challenge.connect(signers[3]).voteForWinner(signers[1].address)\nawait challenge.connect(signers[4]).voteForWinner(signers[4].address)\n//Check balance before for both winners\nconst balanceBefore1 = await token.balanceOf(signers[1].address);\nconst balanceBefore2 = await token.balanceOf(signers[3].address);\n//End vote\nawait challenge.endWinnerVote();\nawait challenge.connect(signers[1]).withdrawPrize();\n//Check balance after (winner1)\nconst balanceAfter1 = await token.balanceOf(signers[1].address);\nconst diff1 = balanceAfter1 - balanceBefore1;\nconst expectedDiff1 = bid*5n/2n - bid*5n/2n*gold/100n;\nexpect(\n    diff1\n).to.equal(expectedDiff1);\nawait challenge.connect(signers[3]).withdrawPrize();\n//Check balance after (winner2)\nconst balanceAfter2 = await token.balanceOf(signers[3].address);\nconst diff2 = balanceAfter2 - balanceBefore2;\nconst expectedDiff2 = bid*5n/2n - bid*5n/2n*silver/100n;\nexpect(\n    diff2\n).to.equal(expectedDiff2); //substract fees too&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;85544f6e-27c9-4e1b-8f3d-3f32f286ef31&quot;,&quot;parentUUID&quot;:&quot;e1f9bc97-8369-40ba-8b12-dfb86189d281&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;if more tokens (signers[1] gold tier here), winner should receive more tokens&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract challenge won state if more tokens (signers[1] gold tier here), winner should receive more tokens&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//Players voting\nawait challenge.voteForWinner(signers[1].address)\nawait challenge.connect(signers[1]).voteForWinner(signers[1].address) \nawait challenge.connect(signers[2]).voteForWinner(signers[1].address) \nawait challenge.connect(signers[3]).voteForWinner(signers[0].address) \nawait challenge.connect(signers[4]).voteForWinner(signers[2].address) \n//Check balance before\nconst balanceBefore = await token.balanceOf(signers[1].address);\n//End vote\nawait challenge.endWinnerVote();\nawait challenge.connect(signers[1]).withdrawPrize();\n//Check balance after\nconst balanceAfter = await token.balanceOf(signers[1].address);\nconst diff = balanceAfter - balanceBefore;\nconst expectedDiff = bid*5n - 5n*bid*gold/100n;\n//Difference should be equal to cash prize won\nexpect(diff).to.equal(expectedDiff); // substract fees too&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4bf4be12-6420-42e0-a35b-91c9b31aa827&quot;,&quot;parentUUID&quot;:&quot;e1f9bc97-8369-40ba-8b12-dfb86189d281&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fee receiver should receive half of the fees (the rest is burnt)&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract challenge won state fee receiver should receive half of the fees (the rest is burnt)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//Players voting\nawait challenge.voteForWinner(signers[2].address)\nawait challenge.connect(signers[1]).voteForWinner(signers[2].address)\nawait challenge.connect(signers[2]).voteForWinner(signers[2].address)\nawait challenge.connect(signers[3]).voteForWinner(signers[1].address)\nawait challenge.connect(signers[4]).voteForWinner(signers[4].address)\nconst balanceBefore = await token.balanceOf(signers[0].address);\n//End vote\nawait challenge.endWinnerVote();\nawait challenge.connect(signers[2]).withdrawPrize();\nconst balanceAfter = await token.balanceOf(signers[0].address);\nconst diff = balanceAfter - balanceBefore;\nconst expectedFeesReceived = 5n*bid/2n*bronze/100n;\n\nexpect(\n    diff\n).to.equal(expectedFeesReceived);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b145ddc6-0178-475f-9375-f908119dc9d2&quot;,&quot;parentUUID&quot;:&quot;e1f9bc97-8369-40ba-8b12-dfb86189d281&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;half of the fees should have been burnt&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract challenge won state half of the fees should have been burnt&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//Players voting\nawait challenge.voteForWinner(signers[0].address)\nawait challenge.connect(signers[1]).voteForWinner(signers[0].address)\nawait challenge.connect(signers[2]).voteForWinner(signers[2].address)\nawait challenge.connect(signers[3]).voteForWinner(signers[1].address)\nawait challenge.connect(signers[4]).voteForWinner(signers[4].address)\nconst initialTotalSupply = await token.totalSupply();\n//End vote\nawait challenge.endWinnerVote();\nawait challenge.connect(signers[0]).withdrawPrize();\nconst finalTotalSupply = await token.totalSupply();\nconst diff = initialTotalSupply - finalTotalSupply;\nconst expectedBurntAmount = bid*5n/2n*platinum/100n;\n\nexpect(\n    diff\n).to.equal(expectedBurntAmount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7dd1ac54-5d4c-4725-b63c-b397f30ef7dc&quot;,&quot;parentUUID&quot;:&quot;e1f9bc97-8369-40ba-8b12-dfb86189d281&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;99b12469-7bb5-495e-b6f1-5ed90c854a7d&quot;,&quot;6da2751b-547c-4f77-b6e1-eff7c901a138&quot;,&quot;2ad4b5cf-8855-49c1-b62a-7673a08252fb&quot;,&quot;4f9fb41a-a14f-4f20-a696-f5a1b0cf26f7&quot;,&quot;85544f6e-27c9-4e1b-8f3d-3f32f286ef31&quot;,&quot;4bf4be12-6420-42e0-a35b-91c9b31aa827&quot;,&quot;b145ddc6-0178-475f-9375-f908119dc9d2&quot;,&quot;7dd1ac54-5d4c-4725-b63c-b397f30ef7dc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:110,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;55ad8522-edfe-4c66-a853-4072cd61fe96&quot;,&quot;title&quot;:&quot;Owner functions&quot;,&quot;fullFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js&quot;,&quot;file&quot;:&quot;/test/Challenge.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should not allow not admin player to go to OngoingChallenge state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract Owner functions should not allow not admin player to go to OngoingChallenge state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const {challenge, signers} = await loadFixture(deployedChallengeFixtureBase);\nawait expect(\n   challenge.connect(signers[1]).startChallenge()\n).to.be.revertedWithCustomError(challenge, \&quot;OwnableUnauthorizedAccount\&quot;).withArgs(signers[1].address);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6da2ab42-31f8-4ab8-bb08-712892402631&quot;,&quot;parentUUID&quot;:&quot;55ad8522-edfe-4c66-a853-4072cd61fe96&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6da2ab42-31f8-4ab8-bb08-712892402631&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;5e9094fc-caec-4286-8786-55649a7b8887&quot;,&quot;title&quot;:&quot;State functions availability&quot;,&quot;fullFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js&quot;,&quot;file&quot;:&quot;/test/Challenge.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;379fd2dc-131b-499c-8edb-97fd1f8a91f4&quot;,&quot;title&quot;:&quot;state GatheringPlayers&quot;,&quot;fullFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js&quot;,&quot;file&quot;:&quot;/test/Challenge.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;state GatheringPlayers\&quot;&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract State functions availability state GatheringPlayers \&quot;before each\&quot; hook in \&quot;state GatheringPlayers\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;({challenge, signers} = await loadFixture(deployedChallengeFixtureBase));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;82c19dea-83dd-44ca-aaed-b414da99373b&quot;,&quot;parentUUID&quot;:&quot;379fd2dc-131b-499c-8edb-97fd1f8a91f4&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should not allow voteForWinner() in GatheringPlayers state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract State functions availability state GatheringPlayers should not allow voteForWinner() in GatheringPlayers state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n    challenge.voteForWinner(signers[1].address)\n).to.be.revertedWithCustomError(challenge, \&quot;InvalidState\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;593a4c19-ac2b-4948-937f-c26af7731c58&quot;,&quot;parentUUID&quot;:&quot;379fd2dc-131b-499c-8edb-97fd1f8a91f4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow endWinnerVote() in GatheringPlayers state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract State functions availability state GatheringPlayers should not allow endWinnerVote() in GatheringPlayers state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n    challenge.endWinnerVote()\n).to.be.revertedWithCustomError(challenge, \&quot;InvalidState\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c377bf7a-c39b-4653-9e78-828be5d4d942&quot;,&quot;parentUUID&quot;:&quot;379fd2dc-131b-499c-8edb-97fd1f8a91f4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow withdrawPrize() in GatheringPlayers state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract State functions availability state GatheringPlayers should not allow withdrawPrize() in GatheringPlayers state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n    challenge.withdrawPrize()\n).to.be.revertedWithCustomError(challenge, \&quot;InvalidState\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2d65e2ef-f62f-4621-a521-44c7a476cef3&quot;,&quot;parentUUID&quot;:&quot;379fd2dc-131b-499c-8edb-97fd1f8a91f4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;593a4c19-ac2b-4948-937f-c26af7731c58&quot;,&quot;c377bf7a-c39b-4653-9e78-828be5d4d942&quot;,&quot;2d65e2ef-f62f-4621-a521-44c7a476cef3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;59da7fcd-7ffd-43f0-9c74-0949078457af&quot;,&quot;title&quot;:&quot;state OngoingChallenge&quot;,&quot;fullFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js&quot;,&quot;file&quot;:&quot;/test/Challenge.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;state OngoingChallenge\&quot;&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract State functions availability state OngoingChallenge \&quot;before each\&quot; hook in \&quot;state OngoingChallenge\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;({challenge, signers, bid, token} = await loadFixture(OngoingChallengeFixture));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fd24bf94-137c-4bbd-8458-523dc77876d9&quot;,&quot;parentUUID&quot;:&quot;59da7fcd-7ffd-43f0-9c74-0949078457af&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should not allow joinChallenge() in OngoingChallenge state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract State functions availability state OngoingChallenge should not allow joinChallenge() in OngoingChallenge state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { v: v1, r: r1, s: s1, deadline: deadline1 } = await GetRSVsig(signers[0], token, bid, challenge);\nawait expect(\n    challenge.joinChallenge(deadline1, v1, r1, s1, [])\n).to.be.revertedWithCustomError(challenge, \&quot;InvalidState\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;565293ec-5472-4cb6-871f-01c3e7ff4930&quot;,&quot;parentUUID&quot;:&quot;59da7fcd-7ffd-43f0-9c74-0949078457af&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow withdrawFromChallenge() in OngoingChallenge state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract State functions availability state OngoingChallenge should not allow withdrawFromChallenge() in OngoingChallenge state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n    challenge.withdrawFromChallenge()\n).to.be.revertedWithCustomError(challenge, \&quot;InvalidState\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4187ecba-f9cf-4aad-9342-672842fe8dc6&quot;,&quot;parentUUID&quot;:&quot;59da7fcd-7ffd-43f0-9c74-0949078457af&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow startChallenge() in OngoingChallenge state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract State functions availability state OngoingChallenge should not allow startChallenge() in OngoingChallenge state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n    challenge.startChallenge()\n).to.be.revertedWithCustomError(challenge, \&quot;InvalidState\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7d527a66-7f92-4354-92e9-20ac855921e0&quot;,&quot;parentUUID&quot;:&quot;59da7fcd-7ffd-43f0-9c74-0949078457af&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow voteForWinner() in OngoingChallenge state (if the challenge is not over)&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract State functions availability state OngoingChallenge should not allow voteForWinner() in OngoingChallenge state (if the challenge is not over)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n    challenge.voteForWinner(signers[1].address)\n).to.be.revertedWithCustomError(challenge, \&quot;VotingNotAllowed\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1cd87810-2e60-46c5-9f25-910d8f4f2a5c&quot;,&quot;parentUUID&quot;:&quot;59da7fcd-7ffd-43f0-9c74-0949078457af&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow voteForWinner() in OngoingChallenge state (if the challenge is over). state should become \&quot;VotingForWinner\&quot; after first player votes at the end of the challenge. &quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract State functions availability state OngoingChallenge should allow voteForWinner() in OngoingChallenge state (if the challenge is over). state should become \&quot;VotingForWinner\&quot; after first player votes at the end of the challenge. &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;expect(await challenge.currentStatus()).to.equal(ChallengeStatus.OngoingChallenge);\n//wait for challenge to end\nawait time.increase(duration);\n\n//should be allowed\nawait expect(\n    challenge.voteForWinner(signers[1].address)\n).to.not.be.reverted;\n//State should have changed\nexpect(await challenge.currentStatus()).to.equal(ChallengeStatus.VotingForWinner);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;14633c60-bcc3-4a2a-901b-22c1887f6e91&quot;,&quot;parentUUID&quot;:&quot;59da7fcd-7ffd-43f0-9c74-0949078457af&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow endWinnerVote() in OngoingChallenge state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract State functions availability state OngoingChallenge should not allow endWinnerVote() in OngoingChallenge state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n    challenge.endWinnerVote()\n).to.be.revertedWithCustomError(challenge, \&quot;InvalidState\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a5765762-0b41-4cf4-9446-edfcf4b24b50&quot;,&quot;parentUUID&quot;:&quot;59da7fcd-7ffd-43f0-9c74-0949078457af&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow withdrawPrize() in OnGoingChallenge state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract State functions availability state OngoingChallenge should not allow withdrawPrize() in OnGoingChallenge state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n    challenge.withdrawPrize()\n).to.be.revertedWithCustomError(challenge, \&quot;InvalidState\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;86f129cd-1175-4eea-8226-e696c439767a&quot;,&quot;parentUUID&quot;:&quot;59da7fcd-7ffd-43f0-9c74-0949078457af&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;565293ec-5472-4cb6-871f-01c3e7ff4930&quot;,&quot;4187ecba-f9cf-4aad-9342-672842fe8dc6&quot;,&quot;7d527a66-7f92-4354-92e9-20ac855921e0&quot;,&quot;1cd87810-2e60-46c5-9f25-910d8f4f2a5c&quot;,&quot;14633c60-bcc3-4a2a-901b-22c1887f6e91&quot;,&quot;a5765762-0b41-4cf4-9446-edfcf4b24b50&quot;,&quot;86f129cd-1175-4eea-8226-e696c439767a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:16,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;00116e32-c994-4d2c-b338-fbb1ac6920bc&quot;,&quot;title&quot;:&quot;state VotingForWinner&quot;,&quot;fullFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js&quot;,&quot;file&quot;:&quot;/test/Challenge.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;state VotingForWinner\&quot;&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract State functions availability state VotingForWinner \&quot;before each\&quot; hook in \&quot;state VotingForWinner\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;({challenge, signers, bid, token} = await loadFixture(VotingForWinnerFixture));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;803c581e-8d2b-45bd-ad4b-2ded34996965&quot;,&quot;parentUUID&quot;:&quot;00116e32-c994-4d2c-b338-fbb1ac6920bc&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should not allow joinChallenge() in VotingForWinner state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract State functions availability state VotingForWinner should not allow joinChallenge() in VotingForWinner state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { v: v1, r: r1, s: s1, deadline: deadline1 } = await GetRSVsig(signers[0], token, bid, challenge);\nawait expect(\n    challenge.joinChallenge(deadline1, v1, r1, s1, [])\n).to.be.revertedWithCustomError(challenge, \&quot;InvalidState\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ec17c5da-3375-4f63-abb5-692e0e9c0c84&quot;,&quot;parentUUID&quot;:&quot;00116e32-c994-4d2c-b338-fbb1ac6920bc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow withdrawFromChallenge() in OngoingChallenge state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract State functions availability state VotingForWinner should not allow withdrawFromChallenge() in OngoingChallenge state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n    challenge.withdrawFromChallenge()\n).to.be.revertedWithCustomError(challenge, \&quot;InvalidState\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7ee82862-54c0-4b18-b18d-92414de0a319&quot;,&quot;parentUUID&quot;:&quot;00116e32-c994-4d2c-b338-fbb1ac6920bc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow startChallenge() in VotingForWinner state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract State functions availability state VotingForWinner should not allow startChallenge() in VotingForWinner state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n    challenge.startChallenge()\n).to.be.revertedWithCustomError(challenge, \&quot;InvalidState\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;66834db5-6504-4119-aeb4-db8c2d824128&quot;,&quot;parentUUID&quot;:&quot;00116e32-c994-4d2c-b338-fbb1ac6920bc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow withdrawPrize() in VotingForWinner state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract State functions availability state VotingForWinner should not allow withdrawPrize() in VotingForWinner state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n    challenge.withdrawPrize()\n).to.be.revertedWithCustomError(challenge, \&quot;InvalidState\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;94f0c58b-c7c3-45f1-8750-07b940537712&quot;,&quot;parentUUID&quot;:&quot;00116e32-c994-4d2c-b338-fbb1ac6920bc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ec17c5da-3375-4f63-abb5-692e0e9c0c84&quot;,&quot;7ee82862-54c0-4b18-b18d-92414de0a319&quot;,&quot;66834db5-6504-4119-aeb4-db8c2d824128&quot;,&quot;94f0c58b-c7c3-45f1-8750-07b940537712&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;19f0d91b-225e-4ef9-897f-5ac6d140faf1&quot;,&quot;title&quot;:&quot;state ChallengeWon&quot;,&quot;fullFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js&quot;,&quot;file&quot;:&quot;/test/Challenge.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;state ChallengeWon\&quot;&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract State functions availability state ChallengeWon \&quot;before each\&quot; hook in \&quot;state ChallengeWon\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;({challenge, signers, bid, token} = await loadFixture(EndingVoteFixture));\nawait challenge.endWinnerVote();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dd762ecf-dd8a-466f-841d-c15461f65807&quot;,&quot;parentUUID&quot;:&quot;19f0d91b-225e-4ef9-897f-5ac6d140faf1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should not allow joinChallenge() in ChallengeWon state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract State functions availability state ChallengeWon should not allow joinChallenge() in ChallengeWon state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { v: v1, r: r1, s: s1, deadline: deadline1 } = await GetRSVsig(signers[0], token, bid, challenge);\nawait expect(\n    challenge.joinChallenge(deadline1, v1, r1, s1, [])\n).to.be.revertedWithCustomError(challenge, \&quot;InvalidState\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;69c8a23c-c0f9-40fe-bc8c-66d20b18d19b&quot;,&quot;parentUUID&quot;:&quot;19f0d91b-225e-4ef9-897f-5ac6d140faf1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow withdrawFromChallenge() in OngoingChallenge state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract State functions availability state ChallengeWon should not allow withdrawFromChallenge() in OngoingChallenge state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n    challenge.withdrawFromChallenge()\n).to.be.revertedWithCustomError(challenge, \&quot;InvalidState\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;61843265-ae90-427f-a808-2da739f7f722&quot;,&quot;parentUUID&quot;:&quot;19f0d91b-225e-4ef9-897f-5ac6d140faf1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow startChallenge() in ChallengeWon state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract State functions availability state ChallengeWon should not allow startChallenge() in ChallengeWon state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n    challenge.startChallenge()\n).to.be.revertedWithCustomError(challenge, \&quot;InvalidState\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f9c36fdf-0089-41f8-aa81-c5f1358e87dc&quot;,&quot;parentUUID&quot;:&quot;19f0d91b-225e-4ef9-897f-5ac6d140faf1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow voteForWinner() in ChallengeWon state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract State functions availability state ChallengeWon should not allow voteForWinner() in ChallengeWon state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n    challenge.voteForWinner(signers[1].address)\n).to.be.revertedWithCustomError(challenge, \&quot;InvalidState\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;72038445-9e51-4258-aeca-4c1c851445ec&quot;,&quot;parentUUID&quot;:&quot;19f0d91b-225e-4ef9-897f-5ac6d140faf1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow endWinnerVote() in ChallengeWon state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract State functions availability state ChallengeWon should not allow endWinnerVote() in ChallengeWon state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n    challenge.endWinnerVote()\n).to.be.revertedWithCustomError(challenge, \&quot;InvalidState\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;880b6356-6faa-424d-b86e-f32891ee6e8d&quot;,&quot;parentUUID&quot;:&quot;19f0d91b-225e-4ef9-897f-5ac6d140faf1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;69c8a23c-c0f9-40fe-bc8c-66d20b18d19b&quot;,&quot;61843265-ae90-427f-a808-2da739f7f722&quot;,&quot;f9c36fdf-0089-41f8-aa81-c5f1358e87dc&quot;,&quot;72038445-9e51-4258-aeca-4c1c851445ec&quot;,&quot;880b6356-6faa-424d-b86e-f32891ee6e8d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:14,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;157d2bfb-c55d-45b9-aedf-919cac080c19&quot;,&quot;title&quot;:&quot;Events&quot;,&quot;fullFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js&quot;,&quot;file&quot;:&quot;/test/Challenge.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should emit an event when a Player Joined&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract Events should emit an event when a Player Joined&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const {challenge, signers, bid, token} = await loadFixture(deployedChallengeFixtureBase)\nconst { v: v1, r: r1, s: s1, deadline: deadline1 } = await GetRSVsig(signers[0], token, bid, challenge);\nconst proof1 = merkleTree.getProof([signers[0].address]);\nawait expect(challenge.joinChallenge(deadline1, v1, r1, s1, proof1))\n    .to.emit(challenge, \&quot;PlayerJoined\&quot;)\n    .withArgs(signers[0].address);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ec5c2bf9-8616-4629-ae09-df721570afd9&quot;,&quot;parentUUID&quot;:&quot;157d2bfb-c55d-45b9-aedf-919cac080c19&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit an event when a Player Withdraws from challenge&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract Events should emit an event when a Player Withdraws from challenge&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const {challenge, signers, bid, token} = await loadFixture(deployedChallengeFixtureBase)\nconst { v: v1, r: r1, s: s1, deadline: deadline1 } = await GetRSVsig(signers[0], token, bid, challenge);\nconst proof1 = merkleTree.getProof([signers[0].address]);\nawait challenge.joinChallenge(deadline1, v1, r1, s1, proof1);\nawait expect(challenge.withdrawFromChallenge())\n    .to.emit(challenge, \&quot;PlayerWithdrawn\&quot;)\n    .withArgs(signers[0].address);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;def12375-a10f-4cd3-8bc0-e5ed91d05e5e&quot;,&quot;parentUUID&quot;:&quot;157d2bfb-c55d-45b9-aedf-919cac080c19&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit an event when ChallengeStarted&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract Events should emit an event when ChallengeStarted&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const {challenge, signers, bid, token} = await loadFixture(deployedChallengeFixtureBase)\nconst { v: v1, r: r1, s: s1, deadline: deadline1 } = await GetRSVsig(signers[0], token, bid, challenge);\nconst { v: v2, r: r2, s: s2, deadline: deadline2 } = await GetRSVsig(signers[1], token, bid, challenge);\nconst proof1 = merkleTree.getProof([signers[0].address]);\nconst proof2 = merkleTree.getProof([signers[1].address]);\nawait challenge.joinChallenge(deadline1, v1, r1, s1, proof1);\nawait challenge.connect(signers[1]).joinChallenge(deadline2, v2, r2, s2, proof2);\nawait expect(challenge.startChallenge())\n    .to.emit(challenge, \&quot;ChallengeStarted\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9cab7b47-5772-42ab-bb98-5fcd2a66b372&quot;,&quot;parentUUID&quot;:&quot;157d2bfb-c55d-45b9-aedf-919cac080c19&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit an event when ChallengeEnded &quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract Events should emit an event when ChallengeEnded &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:78,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const {challenge, signers} = await loadFixture(OngoingChallengeFixture)\n//Pass enough time\nawait time.increase(duration)\nawait expect(challenge.voteForWinner(signers[1].address))\n    .to.emit(challenge, \&quot;ChallengeEnded\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;683b3746-62b5-4501-9519-f86ad049382b&quot;,&quot;parentUUID&quot;:&quot;157d2bfb-c55d-45b9-aedf-919cac080c19&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit an event when PlayerVoted&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract Events should emit an event when PlayerVoted&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:124,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const {challenge, signers} = await loadFixture(VotingForWinnerFixture)\nawait expect(challenge.voteForWinner(signers[1].address))\n    .to.emit(challenge, \&quot;PlayerVoted\&quot;)\n    .withArgs(signers[0].address, signers[1].address)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;25349f29-be25-421b-8377-3f331f6fa2d6&quot;,&quot;parentUUID&quot;:&quot;157d2bfb-c55d-45b9-aedf-919cac080c19&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit an event when a prize is sent&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract Events should emit an event when a prize is sent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:105,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const {challenge, signers, bid} = await loadFixture(EndingVoteFixture)\nawait challenge.endWinnerVote()\nconst expectedPrize = bid*5n - 5n*bid*BigInt(gold)/100n;\nawait expect(\n    await challenge.connect(signers[1]).withdrawPrize()\n).to.emit(challenge, \&quot;PrizeWithdrawn\&quot;)\n    .withArgs(signers[1].address, expectedPrize)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;96d60329-0aae-416a-8b04-fa0cbe350575&quot;,&quot;parentUUID&quot;:&quot;157d2bfb-c55d-45b9-aedf-919cac080c19&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ec5c2bf9-8616-4629-ae09-df721570afd9&quot;,&quot;def12375-a10f-4cd3-8bc0-e5ed91d05e5e&quot;,&quot;9cab7b47-5772-42ab-bb98-5fcd2a66b372&quot;,&quot;683b3746-62b5-4501-9519-f86ad049382b&quot;,&quot;25349f29-be25-421b-8377-3f331f6fa2d6&quot;,&quot;96d60329-0aae-416a-8b04-fa0cbe350575&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:345,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;032e3a2b-dc2b-402f-b59b-3d834c15e252&quot;,&quot;title&quot;:&quot;tests ChallengeFactory contract&quot;,&quot;fullFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeFactory.test.js&quot;,&quot;file&quot;:&quot;/test/ChallengeFactory.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;aac50049-fda1-470b-bac6-6a91632716eb&quot;,&quot;title&quot;:&quot;First tests&quot;,&quot;fullFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeFactory.test.js&quot;,&quot;file&quot;:&quot;/test/ChallengeFactory.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;First tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;tests ChallengeFactory contract First tests \&quot;before each\&quot; hook in \&quot;First tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;({challengeFactory, signers, token } = await loadFixture(deployedChallengeFactoryFixtureBase));\nawait challengeFactory.createChallenge(duration, bid, description, merkleRoot, \&quot;ipfsCid\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b054e07a-2af0-411c-8493-da8f21590fd7&quot;,&quot;parentUUID&quot;:&quot;aac50049-fda1-470b-bac6-6a91632716eb&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should just deploy the challenge factory, and create a challenge&quot;,&quot;fullTitle&quot;:&quot;tests ChallengeFactory contract First tests should just deploy the challenge factory, and create a challenge&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d43cc885-d333-4801-9f46-5bba87af894f&quot;,&quot;parentUUID&quot;:&quot;aac50049-fda1-470b-bac6-6a91632716eb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit an event on new challenge deployment&quot;,&quot;fullTitle&quot;:&quot;tests ChallengeFactory contract First tests should emit an event on new challenge deployment&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const filter = challengeFactory.filters.ChallengeCreated(signers[0].address);\n            const events = await challengeFactory.queryFilter(filter, -1)\n            const event = events[0]\n            expect(event.fragment.name).to.equal(&#x27;ChallengeCreated&#x27;)\n            const args = event.args\n            expect(args.admin).to.equal(signers[0].address)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1024ccc7-5434-4146-884d-86bb729b2e8c&quot;,&quot;parentUUID&quot;:&quot;aac50049-fda1-470b-bac6-6a91632716eb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow to deploy a new challenge contract&quot;,&quot;fullTitle&quot;:&quot;tests ChallengeFactory contract First tests should allow to deploy a new challenge contract&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// 2. Extract the address from the event\n            const filter = challengeFactory.filters.ChallengeCreated;\n            const events = await challengeFactory.queryFilter(filter, -1)\n            const event = events[0]\n            const newContractAddress = event.args.challengeAddress;\n            // 3. Attach to the deployed challenge\n            const Challenge = await ethers.getContractFactory(\&quot;Challenge\&quot;);\n            const challenge = Challenge.attach(newContractAddress);\n            // Verify initialisation\n            const _duration = await challenge.duration();\n            const _bid = await challenge.bid();\n            const _description = await challenge.description();\n            expect(_duration).to.equal(1000n);\n            expect(_bid).to.equal(bid);\n            expect(_description).to.equal(\&quot;test\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3cb8143a-b22d-42c6-aa3a-f44795c55a88&quot;,&quot;parentUUID&quot;:&quot;aac50049-fda1-470b-bac6-6a91632716eb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should set the caller of the function createChallenge as owner of the challenge&quot;,&quot;fullTitle&quot;:&quot;tests ChallengeFactory contract First tests should set the caller of the function createChallenge as owner of the challenge&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// 2. Extract the address from the event\n            const filter = challengeFactory.filters.ChallengeCreated;\n            const events = await challengeFactory.queryFilter(filter, -1)\n            const event = events[0]\n            const newContractAddress = event.args.challengeAddress;\n            // 3. Attach to the deployed challenge\n            const Challenge = await ethers.getContractFactory(\&quot;Challenge\&quot;);\n            const challenge = Challenge.attach(newContractAddress);\n            const owner = await challenge.owner()\n            expect(owner).to.equal(signers[0].address)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;54be6757-e791-490a-bbf7-ac8f12668e3f&quot;,&quot;parentUUID&quot;:&quot;aac50049-fda1-470b-bac6-6a91632716eb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d43cc885-d333-4801-9f46-5bba87af894f&quot;,&quot;1024ccc7-5434-4146-884d-86bb729b2e8c&quot;,&quot;3cb8143a-b22d-42c6-aa3a-f44795c55a88&quot;,&quot;54be6757-e791-490a-bbf7-ac8f12668e3f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:21,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;90b6ea33-0e3f-40eb-8a6d-38bd46b152ea&quot;,&quot;title&quot;:&quot;Parameter Validation Tests&quot;,&quot;fullFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeFactory.test.js&quot;,&quot;file&quot;:&quot;/test/ChallengeFactory.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;Parameter Validation Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;tests ChallengeFactory contract Parameter Validation Tests \&quot;before each\&quot; hook in \&quot;Parameter Validation Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;({challengeFactory, signers, token } = await loadFixture(deployedChallengeFactoryFixtureBase));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aef8a6b5-ca8a-4f02-83b4-485186fd72da&quot;,&quot;parentUUID&quot;:&quot;90b6ea33-0e3f-40eb-8a6d-38bd46b152ea&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should revert with ZeroAddressToken when token address is zero&quot;,&quot;fullTitle&quot;:&quot;tests ChallengeFactory contract Parameter Validation Tests should revert with ZeroAddressToken when token address is zero&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const ChallengeFactory = await ethers.getContractFactory(&#x27;ChallengeFactory&#x27;);\nawait expect(\n    ChallengeFactory.deploy(\&quot;0x0000000000000000000000000000000000000000\&quot;, signers[0].address)\n).to.be.revertedWithCustomError(ChallengeFactory, \&quot;ZeroAddressToken\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9eb39c5e-45fd-4315-babf-f93609b38611&quot;,&quot;parentUUID&quot;:&quot;90b6ea33-0e3f-40eb-8a6d-38bd46b152ea&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should revert with ZeroAddressFeeReceiver when feeReceiver address is zero&quot;,&quot;fullTitle&quot;:&quot;tests ChallengeFactory contract Parameter Validation Tests should revert with ZeroAddressFeeReceiver when feeReceiver address is zero&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const ChallengeFactory = await ethers.getContractFactory(&#x27;ChallengeFactory&#x27;);\nawait expect(\n    ChallengeFactory.deploy(token.target, \&quot;0x0000000000000000000000000000000000000000\&quot;)\n).to.be.revertedWithCustomError( ChallengeFactory, \&quot;ZeroAddressFeeReceiver\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;065ed57c-3566-44f4-aa00-023ecaba246a&quot;,&quot;parentUUID&quot;:&quot;90b6ea33-0e3f-40eb-8a6d-38bd46b152ea&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should revert with InvalidDuration when duration is 0&quot;,&quot;fullTitle&quot;:&quot;tests ChallengeFactory contract Parameter Validation Tests should revert with InvalidDuration when duration is 0&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n    challengeFactory.createChallenge(\n        0n, // Invalid duration\n        bid,\n        description,\n        merkleRoot,\n        \&quot;ipfsCid\&quot;\n    )\n).to.be.revertedWithCustomError(challengeFactory, \&quot;InvalidDuration\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5bbef10c-0d0d-442c-93f3-1b324edfc4ee&quot;,&quot;parentUUID&quot;:&quot;90b6ea33-0e3f-40eb-8a6d-38bd46b152ea&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should revert with InsufficientBid when bid is 0&quot;,&quot;fullTitle&quot;:&quot;tests ChallengeFactory contract Parameter Validation Tests should revert with InsufficientBid when bid is 0&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n    challengeFactory.createChallenge(\n        duration,\n        0n, // Invalid bid\n        description,\n        merkleRoot,\n        \&quot;ipfsCid\&quot;\n    )\n).to.be.revertedWithCustomError(challengeFactory, \&quot;InsufficientBid\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4bf9a8ed-7f7e-4045-90df-47d40eebe992&quot;,&quot;parentUUID&quot;:&quot;90b6ea33-0e3f-40eb-8a6d-38bd46b152ea&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9eb39c5e-45fd-4315-babf-f93609b38611&quot;,&quot;065ed57c-3566-44f4-aa00-023ecaba246a&quot;,&quot;5bbef10c-0d0d-442c-93f3-1b324edfc4ee&quot;,&quot;4bf9a8ed-7f7e-4045-90df-47d40eebe992&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:29,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:40000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;10.8.2&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:true,&quot;reportFilename&quot;:&quot;report&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;7.1.3&quot;},&quot;marge&quot;:{&quot;options&quot;:{&quot;reportDir&quot;:&quot;test-report&quot;,&quot;reportFilename&quot;:&quot;report&quot;,&quot;quiet&quot;:true},&quot;version&quot;:&quot;6.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;report&quot;,&quot;reportDir&quot;:&quot;test-report&quot;,&quot;reportTitle&quot;:&quot;backend&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;test-report/assets&quot;,&quot;jsonFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test-report/report.json&quot;,&quot;htmlFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test-report/report.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>