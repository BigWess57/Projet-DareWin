{
  "stats": {
    "suites": 19,
    "tests": 78,
    "passes": 78,
    "pending": 0,
    "failures": 0,
    "start": "2025-11-20T15:32:06.787Z",
    "end": "2025-11-20T15:32:08.175Z",
    "duration": 1388,
    "testsRegistered": 78,
    "passPercent": 100,
    "pendingPercent": 0,
    "other": 0,
    "hasOther": false,
    "skipped": 0,
    "hasSkipped": false
  },
  "results": [
    {
      "uuid": "8e21828f-7d51-40d9-8fc9-380c14bd2898",
      "title": "",
      "fullFile": "",
      "file": "",
      "beforeHooks": [],
      "afterHooks": [],
      "tests": [],
      "suites": [
        {
          "uuid": "d54bab79-f746-4811-a396-dc625fb7f54f",
          "title": "tests Challenge contract",
          "fullFile": "/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js",
          "file": "/test/Challenge.test.js",
          "beforeHooks": [],
          "afterHooks": [],
          "tests": [],
          "suites": [
            {
              "uuid": "158e723f-d0a8-4f57-bfbf-10ca2c144393",
              "title": "deployment",
              "fullFile": "/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js",
              "file": "/test/Challenge.test.js",
              "beforeHooks": [
                {
                  "title": "\"before each\" hook in \"deployment\"",
                  "fullTitle": "tests Challenge contract deployment \"before each\" hook in \"deployment\"",
                  "timedOut": false,
                  "duration": 7,
                  "state": null,
                  "speed": null,
                  "pass": false,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "signers = await ethers.getSigners();\n//Token deployment\nconst DareWinToken = await ethers.getContractFactory('DareWin');\ntoken = await DareWinToken.deploy(signers[0].address);\nbid = ethers.parseUnits(\"1000\", await token.decimals());",
                  "err": {},
                  "uuid": "f4aec4d1-e70c-401f-8140-51286eced698",
                  "parentUUID": "158e723f-d0a8-4f57-bfbf-10ca2c144393",
                  "isHook": true,
                  "skipped": false
                }
              ],
              "afterHooks": [],
              "tests": [
                {
                  "title": "should juste deploy the contract",
                  "fullTitle": "tests Challenge contract deployment should juste deploy the contract",
                  "timedOut": false,
                  "duration": 10,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "//Challenge Deployment\nconst Challenge = await ethers.getContractFactory('Challenge'); \nawait expect(\n    Challenge.deploy(signers[0].address, token.target, duration, maxPlayers, bid, description, signers[0].address, false, ethers.ZeroHash, \"ipfsCid\")\n).to.not.be.reverted",
                  "err": {},
                  "uuid": "10ba555b-7c1f-4721-ad40-5525f5f01869",
                  "parentUUID": "158e723f-d0a8-4f57-bfbf-10ca2c144393",
                  "isHook": false,
                  "skipped": false
                },
                {
                  "title": "should juste deploy the contract in Group mode",
                  "fullTitle": "tests Challenge contract deployment should juste deploy the contract in Group mode",
                  "timedOut": false,
                  "duration": 12,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "const playersAllowed = [\n    [signers[0].address],\n    [signers[1].address],\n    [signers[2].address],\n    [signers[3].address],\n    [signers[4].address]\n]\nmerkleTree = StandardMerkleTree.of(playersAllowed, [\"address\"]);\nconst Challenge = await ethers.getContractFactory('Challenge');\n//Challenge Deployment\nawait expect(\n    challenge = await Challenge.deploy(signers[0].address, token.target, duration, maxPlayers, bid, description, signers[0].address, true, merkleTree.root, \"ipfsCid\")\n).to.not.be.reverted",
                  "err": {},
                  "uuid": "3a5c35cf-ca05-49e4-a0de-4d186e1cf01e",
                  "parentUUID": "158e723f-d0a8-4f57-bfbf-10ca2c144393",
                  "isHook": false,
                  "skipped": false
                }
              ],
              "suites": [
                {
                  "uuid": "6db48e7a-2e04-4fc7-9282-4f6ae820fc0c",
                  "title": "Constructor Validation Tests",
                  "fullFile": "/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js",
                  "file": "/test/Challenge.test.js",
                  "beforeHooks": [
                    {
                      "title": "\"before each\" hook in \"Constructor Validation Tests\"",
                      "fullTitle": "tests Challenge contract deployment Constructor Validation Tests \"before each\" hook in \"Constructor Validation Tests\"",
                      "timedOut": false,
                      "duration": 9,
                      "state": null,
                      "speed": null,
                      "pass": false,
                      "fail": false,
                      "pending": false,
                      "context": null,
                      "code": "signers = await ethers.getSigners();\nconst DareWinToken = await ethers.getContractFactory('DareWin');\ntoken = await DareWinToken.deploy(signers[0].address);\nbid = ethers.parseUnits(\"1000\", await token.decimals());",
                      "err": {},
                      "uuid": "fdaf51d9-0550-40cf-bdaf-9b5d07b8524e",
                      "parentUUID": "6db48e7a-2e04-4fc7-9282-4f6ae820fc0c",
                      "isHook": true,
                      "skipped": false
                    }
                  ],
                  "afterHooks": [],
                  "tests": [
                    {
                      "title": "should revert with ZeroAddressToken when token address is zero",
                      "fullTitle": "tests Challenge contract deployment Constructor Validation Tests should revert with ZeroAddressToken when token address is zero",
                      "timedOut": false,
                      "duration": 10,
                      "state": "passed",
                      "speed": "fast",
                      "pass": true,
                      "fail": false,
                      "pending": false,
                      "context": null,
                      "code": "const Challenge = await ethers.getContractFactory('Challenge');\nawait expect(\n    Challenge.deploy(\n        signers[0].address,\n        \"0x0000000000000000000000000000000000000000\", // Invalid token\n        duration,\n        maxPlayers,\n        bid,\n        description,\n        signers[0].address,\n        false,\n        ethers.ZeroHash,\n        \"ipfsCid\"\n    )\n).to.be.revertedWithCustomError(Challenge, \"ZeroAddressToken\");",
                      "err": {},
                      "uuid": "e0c8185e-7506-43ac-9483-7ac3d5ae8df5",
                      "parentUUID": "6db48e7a-2e04-4fc7-9282-4f6ae820fc0c",
                      "isHook": false,
                      "skipped": false
                    },
                    {
                      "title": "should revert with ZeroAddressFeeReceiver when feeReceiver address is 0",
                      "fullTitle": "tests Challenge contract deployment Constructor Validation Tests should revert with ZeroAddressFeeReceiver when feeReceiver address is 0",
                      "timedOut": false,
                      "duration": 6,
                      "state": "passed",
                      "speed": "fast",
                      "pass": true,
                      "fail": false,
                      "pending": false,
                      "context": null,
                      "code": "const Challenge = await ethers.getContractFactory('Challenge');\nawait expect(\n    Challenge.deploy(\n        signers[0].address,\n        token.target, // Invalid token\n        duration,\n        maxPlayers,\n        bid,\n        description,\n        \"0x0000000000000000000000000000000000000000\",\n        false,\n        ethers.ZeroHash,\n        \"ipfsCid\"\n    )\n).to.be.revertedWithCustomError(Challenge, \"ZeroAddressFeeReceiver\");",
                      "err": {},
                      "uuid": "6255c74a-2a48-4c07-8d79-468faafce390",
                      "parentUUID": "6db48e7a-2e04-4fc7-9282-4f6ae820fc0c",
                      "isHook": false,
                      "skipped": false
                    },
                    {
                      "title": "should revert with InvalidDuration when duration is 0",
                      "fullTitle": "tests Challenge contract deployment Constructor Validation Tests should revert with InvalidDuration when duration is 0",
                      "timedOut": false,
                      "duration": 10,
                      "state": "passed",
                      "speed": "fast",
                      "pass": true,
                      "fail": false,
                      "pending": false,
                      "context": null,
                      "code": "const Challenge = await ethers.getContractFactory('Challenge');\nawait expect(\n    Challenge.deploy(\n        signers[0].address,\n        token.target,\n        0n, // Invalid duration\n        maxPlayers,\n        bid,\n        description,\n        signers[0].address,\n        false,\n        ethers.ZeroHash,\n        \"ipfsCid\"\n    )\n).to.be.revertedWithCustomError(Challenge, \"InvalidDuration\");",
                      "err": {},
                      "uuid": "ccdb7d8b-81dc-4b5e-8939-7798b87789da",
                      "parentUUID": "6db48e7a-2e04-4fc7-9282-4f6ae820fc0c",
                      "isHook": false,
                      "skipped": false
                    },
                    {
                      "title": "should revert with InsufficientPlayers when maxPlayers = 1 (< 2) in LINK mode",
                      "fullTitle": "tests Challenge contract deployment Constructor Validation Tests should revert with InsufficientPlayers when maxPlayers = 1 (< 2) in LINK mode",
                      "timedOut": false,
                      "duration": 10,
                      "state": "passed",
                      "speed": "fast",
                      "pass": true,
                      "fail": false,
                      "pending": false,
                      "context": null,
                      "code": "const Challenge = await ethers.getContractFactory('Challenge');\nawait expect(\n    Challenge.deploy(\n        signers[0].address,\n        token.target,\n        duration,\n        1n, // Invalid: less than 2\n        bid,\n        description,\n        signers[0].address,\n        false,\n        ethers.ZeroHash,\n        \"ipfsCid\"\n    )\n).to.be.revertedWithCustomError(Challenge, \"InsufficientPlayers\");",
                      "err": {},
                      "uuid": "cc05fe2e-f9d3-4401-b269-a55ae45c860f",
                      "parentUUID": "6db48e7a-2e04-4fc7-9282-4f6ae820fc0c",
                      "isHook": false,
                      "skipped": false
                    },
                    {
                      "title": "should revert with InsufficientPlayers when maxPlayers = 0 (< 2) in LINK mode",
                      "fullTitle": "tests Challenge contract deployment Constructor Validation Tests should revert with InsufficientPlayers when maxPlayers = 0 (< 2) in LINK mode",
                      "timedOut": false,
                      "duration": 5,
                      "state": "passed",
                      "speed": "fast",
                      "pass": true,
                      "fail": false,
                      "pending": false,
                      "context": null,
                      "code": "const Challenge = await ethers.getContractFactory('Challenge');\nawait expect(\n    Challenge.deploy(\n        signers[0].address,\n        token.target,\n        duration,\n        0n, // Invalid: less than 2\n        bid,\n        description,\n        signers[0].address,\n        false,\n        ethers.ZeroHash,\n        \"ipfsCid\"\n    )\n).to.be.revertedWithCustomError(Challenge, \"InsufficientPlayers\");",
                      "err": {},
                      "uuid": "1bc6b683-d079-4d38-9c07-152d82c77b5b",
                      "parentUUID": "6db48e7a-2e04-4fc7-9282-4f6ae820fc0c",
                      "isHook": false,
                      "skipped": false
                    },
                    {
                      "title": "should revert with InsufficientBid when bid is 0",
                      "fullTitle": "tests Challenge contract deployment Constructor Validation Tests should revert with InsufficientBid when bid is 0",
                      "timedOut": false,
                      "duration": 8,
                      "state": "passed",
                      "speed": "fast",
                      "pass": true,
                      "fail": false,
                      "pending": false,
                      "context": null,
                      "code": "const Challenge = await ethers.getContractFactory('Challenge');\nawait expect(\n    Challenge.deploy(\n        signers[0].address,\n        token.target,\n        duration,\n        maxPlayers,\n        0n, // Invalid bid\n        description,\n        signers[0].address,\n        false,\n        ethers.ZeroHash,\n        \"ipfsCid\"\n    )\n).to.be.revertedWithCustomError(Challenge, \"InsufficientBid\");",
                      "err": {},
                      "uuid": "2c232f46-eef6-4fb2-abd5-57e6a5baac21",
                      "parentUUID": "6db48e7a-2e04-4fc7-9282-4f6ae820fc0c",
                      "isHook": false,
                      "skipped": false
                    },
                    {
                      "title": "GROUP MODE: should revert with IPFSCidEmpty when IPFS CID is empty",
                      "fullTitle": "tests Challenge contract deployment Constructor Validation Tests GROUP MODE: should revert with IPFSCidEmpty when IPFS CID is empty",
                      "timedOut": false,
                      "duration": 16,
                      "state": "passed",
                      "speed": "fast",
                      "pass": true,
                      "fail": false,
                      "pending": false,
                      "context": null,
                      "code": "const playersAllowed = [\n    [signers[0].address],\n    [signers[1].address]\n];\nconst merkleTree = StandardMerkleTree.of(playersAllowed, [\"address\"]);\n\nconst Challenge = await ethers.getContractFactory('Challenge');\nawait expect(\n    Challenge.deploy(\n        signers[0].address,\n        token.target,\n        duration,\n        maxPlayers,\n        bid,\n        description,\n        signers[0].address,\n        true, // Group mode\n        merkleTree.root,\n        \"\" // Empty IPFS CID\n    )\n).to.be.revertedWithCustomError(Challenge, \"IPFSCidEmpty\");",
                      "err": {},
                      "uuid": "adee96e6-4a97-4d9b-af15-af9b6f0bccf4",
                      "parentUUID": "6db48e7a-2e04-4fc7-9282-4f6ae820fc0c",
                      "isHook": false,
                      "skipped": false
                    },
                    {
                      "title": "GROUP MODE : should revert with MerkleRootRequired if the merkle root is 0",
                      "fullTitle": "tests Challenge contract deployment Constructor Validation Tests GROUP MODE : should revert with MerkleRootRequired if the merkle root is 0",
                      "timedOut": false,
                      "duration": 6,
                      "state": "passed",
                      "speed": "fast",
                      "pass": true,
                      "fail": false,
                      "pending": false,
                      "context": null,
                      "code": "const Challenge = await ethers.getContractFactory('Challenge'); \nawait expect(\n    Challenge.deploy(signers[0].address, token.target, duration, maxPlayers, bid, description, signers[0].address, true, ethers.ZeroHash, \"ipfsCid\")\n).to.be.revertedWithCustomError(Challenge, \"MerkleRootRequired\")",
                      "err": {},
                      "uuid": "c0a43aa1-4063-4838-ac14-56df0214bd53",
                      "parentUUID": "6db48e7a-2e04-4fc7-9282-4f6ae820fc0c",
                      "isHook": false,
                      "skipped": false
                    }
                  ],
                  "suites": [],
                  "passes": [
                    "e0c8185e-7506-43ac-9483-7ac3d5ae8df5",
                    "6255c74a-2a48-4c07-8d79-468faafce390",
                    "ccdb7d8b-81dc-4b5e-8939-7798b87789da",
                    "cc05fe2e-f9d3-4401-b269-a55ae45c860f",
                    "1bc6b683-d079-4d38-9c07-152d82c77b5b",
                    "2c232f46-eef6-4fb2-abd5-57e6a5baac21",
                    "adee96e6-4a97-4d9b-af15-af9b6f0bccf4",
                    "c0a43aa1-4063-4838-ac14-56df0214bd53"
                  ],
                  "failures": [],
                  "pending": [],
                  "skipped": [],
                  "duration": 71,
                  "root": false,
                  "rootEmpty": false,
                  "_timeout": 40000
                }
              ],
              "passes": [
                "10ba555b-7c1f-4721-ad40-5525f5f01869",
                "3a5c35cf-ca05-49e4-a0de-4d186e1cf01e"
              ],
              "failures": [],
              "pending": [],
              "skipped": [],
              "duration": 22,
              "root": false,
              "rootEmpty": false,
              "_timeout": 40000
            },
            {
              "uuid": "500b5939-9336-432c-80b0-a8105d5ff0ab",
              "title": "gathering players state",
              "fullFile": "/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js",
              "file": "/test/Challenge.test.js",
              "beforeHooks": [
                {
                  "title": "\"before each\" hook in \"gathering players state\"",
                  "fullTitle": "tests Challenge contract gathering players state \"before each\" hook in \"gathering players state\"",
                  "timedOut": false,
                  "duration": 1,
                  "state": null,
                  "speed": null,
                  "pass": false,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "({challenge, signers, bid, token} = await loadFixture(deployedChallengeFixtureBase));",
                  "err": {},
                  "uuid": "fe231dfd-7aba-4d7a-9d67-5dcbb4611fe1",
                  "parentUUID": "500b5939-9336-432c-80b0-a8105d5ff0ab",
                  "isHook": true,
                  "skipped": false
                }
              ],
              "afterHooks": [],
              "tests": [
                {
                  "title": "should allow a player to join, and sends the money to the challenge contract correctly",
                  "fullTitle": "tests Challenge contract gathering players state should allow a player to join, and sends the money to the challenge contract correctly",
                  "timedOut": false,
                  "duration": 12,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "const { v, r, s, deadline } = await GetRSVsig(signers[0], token, bid, challenge);\nexpect(\n    await token.balanceOf(challenge)\n).to.equal(0)\nawait expect(\n    challenge.joinChallenge(deadline, v, r, s, [])\n)\n.to.not.be.reverted;\n\nexpect(\n    await token.balanceOf(challenge)\n).to.equal(bid)",
                  "err": {},
                  "uuid": "024fd0cc-539a-4952-9d2f-a3aa9c2dea80",
                  "parentUUID": "500b5939-9336-432c-80b0-a8105d5ff0ab",
                  "isHook": false,
                  "skipped": false
                },
                {
                  "title": "should not allow a player to join if the permit is wrong",
                  "fullTitle": "tests Challenge contract gathering players state should not allow a player to join if the permit is wrong",
                  "timedOut": false,
                  "duration": 13,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "const { v, r, s, deadline } = await GetRSVsig(signers[1], token, bid, challenge);\nawait expect(\n    challenge.connect(signers[0]).joinChallenge(deadline, v, r, s, [])\n)\n.to.be.revertedWithCustomError(token, \"ERC20InsufficientAllowance\");",
                  "err": {},
                  "uuid": "903ce9e7-3f0f-47cb-9be8-a0759d066017",
                  "parentUUID": "500b5939-9336-432c-80b0-a8105d5ff0ab",
                  "isHook": false,
                  "skipped": false
                },
                {
                  "title": "FOR LINK MODE : should not allow any more participants to join if the max is already reached",
                  "fullTitle": "tests Challenge contract gathering players state FOR LINK MODE : should not allow any more participants to join if the max is already reached",
                  "timedOut": false,
                  "duration": 31,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "const { v: v1, r: r1, s: s1, deadline: deadline1 } = await GetRSVsig(signers[0], token, bid, challenge);\nconst { v: v2, r: r2, s: s2, deadline: deadline2 } = await GetRSVsig(signers[1], token, bid, challenge);\nconst { v: v3, r: r3, s: s3, deadline: deadline3 } = await GetRSVsig(signers[2], token, bid, challenge);\nconst { v: v4, r: r4, s: s4, deadline: deadline4 } = await GetRSVsig(signers[3], token, bid, challenge);\nconst { v: v5, r: r5, s: s5, deadline: deadline5 } = await GetRSVsig(signers[4], token, bid, challenge);\nconst { v: v6, r: r6, s: s6, deadline: deadline6 } = await GetRSVsig(signers[5], token, bid, challenge);\nawait challenge.joinChallenge(deadline1, v1, r1, s1, []);  \nawait challenge.connect(signers[1]).joinChallenge(deadline2, v2, r2, s2, []);\nawait challenge.connect(signers[2]).joinChallenge(deadline3, v3, r3, s3, []);\nawait challenge.connect(signers[3]).joinChallenge(deadline4, v4, r4, s4, []);\nawait challenge.connect(signers[4]).joinChallenge(deadline5, v5, r5, s5, []);\nawait expect(\n    challenge.connect(signers[5]).joinChallenge(deadline6, v6, r6, s6, [])\n).to.be.revertedWithCustomError(challenge, \"ChallengeFull\");",
                  "err": {},
                  "uuid": "490755c2-6e44-40ce-9a26-4e712d1d474a",
                  "parentUUID": "500b5939-9336-432c-80b0-a8105d5ff0ab",
                  "isHook": false,
                  "skipped": false
                },
                {
                  "title": "should not allow a participant to join twice",
                  "fullTitle": "tests Challenge contract gathering players state should not allow a participant to join twice",
                  "timedOut": false,
                  "duration": 8,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "const { v: v1, r: r1, s: s1, deadline: deadline1 } = await GetRSVsig(signers[0], token, bid, challenge);\nawait challenge.joinChallenge(deadline1, v1, r1, s1, []);\nawait expect(challenge.joinChallenge(deadline1, v1, r1, s1, [])).to.be.revertedWithCustomError(challenge, \"AlreadyJoined\");",
                  "err": {},
                  "uuid": "81272440-55b8-4744-8fc0-dd5ad2b0ad3e",
                  "parentUUID": "500b5939-9336-432c-80b0-a8105d5ff0ab",
                  "isHook": false,
                  "skipped": false
                },
                {
                  "title": "should allow a player to join even if his permit has been frontran (avoid DoS)",
                  "fullTitle": "tests Challenge contract gathering players state should allow a player to join even if his permit has been frontran (avoid DoS)",
                  "timedOut": false,
                  "duration": 9,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "const { v: v1, r: r1, s: s1, deadline: deadline1 } = await GetRSVsig(signers[0], token, bid, challenge);\n//Frontrun the permit call\nawait token.permit(signers[0].address, challenge, bid, deadline1, v1, r1, s1);\nawait expect(\n    challenge.connect(signers[0]).joinChallenge(deadline1, v1, r1, s1, [])\n).to.not.be.reverted;",
                  "err": {},
                  "uuid": "ef209b17-3811-4e83-ae6b-2439f535fc94",
                  "parentUUID": "500b5939-9336-432c-80b0-a8105d5ff0ab",
                  "isHook": false,
                  "skipped": false
                },
                {
                  "title": "should allow a player to withdraw from the challenge (before start), while letting the challenge start when required without issues. Money should be sent back to him",
                  "fullTitle": "tests Challenge contract gathering players state should allow a player to withdraw from the challenge (before start), while letting the challenge start when required without issues. Money should be sent back to him",
                  "timedOut": false,
                  "duration": 31,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "//5 players join\nconst { v: v1, r: r1, s: s1, deadline: deadline1 } = await GetRSVsig(signers[0], token, bid, challenge);\nconst { v: v2, r: r2, s: s2, deadline: deadline2 } = await GetRSVsig(signers[1], token, bid, challenge);\nconst { v: v3, r: r3, s: s3, deadline: deadline3 } = await GetRSVsig(signers[2], token, bid, challenge);\nconst { v: v4, r: r4, s: s4, deadline: deadline4 } = await GetRSVsig(signers[3], token, bid, challenge);\nconst { v: v5, r: r5, s: s5, deadline: deadline5 } = await GetRSVsig(signers[4], token, bid, challenge);\nawait challenge.joinChallenge(deadline1, v1, r1, s1, []);\nawait challenge.connect(signers[1]).joinChallenge(deadline2, v2, r2, s2, []);\nawait challenge.connect(signers[2]).joinChallenge(deadline3, v3, r3, s3, []);\nawait challenge.connect(signers[3]).joinChallenge(deadline4, v4, r4, s4, []);\nawait challenge.connect(signers[4]).joinChallenge(deadline5, v5, r5, s5, []);\n//one player withdraws from challenge\nexpect(\n    await token.balanceOf(signers[2].address)\n).to.equal(0);\nawait challenge.connect(signers[2]).withdrawFromChallenge();\n//His balance should be 1000\nexpect(\n    await token.balanceOf(signers[2].address)\n).to.equal(bid);\n//Admin successfully starts challenge\nawait challenge.startChallenge();\nexpect(\n   await challenge.currentStatus()\n).to.equal(ChallengeStatus.OngoingChallenge);",
                  "err": {},
                  "uuid": "f5158d7c-b81c-4c76-bf65-e77fb4d24b95",
                  "parentUUID": "500b5939-9336-432c-80b0-a8105d5ff0ab",
                  "isHook": false,
                  "skipped": false
                },
                {
                  "title": "should not allow a player to withdraw from the challenge if he hasnt joined",
                  "fullTitle": "tests Challenge contract gathering players state should not allow a player to withdraw from the challenge if he hasnt joined",
                  "timedOut": false,
                  "duration": 2,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "//try to withdraw without having joined, reverts\nawait expect(\n   challenge.withdrawFromChallenge()\n).to.be.revertedWithCustomError(challenge, \"NotJoined\");",
                  "err": {},
                  "uuid": "c26bed4f-e64b-47aa-ad32-efc00ce73e03",
                  "parentUUID": "500b5939-9336-432c-80b0-a8105d5ff0ab",
                  "isHook": false,
                  "skipped": false
                },
                {
                  "title": "should not allow a player to join, and then withdraw twice",
                  "fullTitle": "tests Challenge contract gathering players state should not allow a player to join, and then withdraw twice",
                  "timedOut": false,
                  "duration": 14,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "const { v: v1, r: r1, s: s1, deadline: deadline1 } = await GetRSVsig(signers[0], token, bid, challenge);\nawait challenge.joinChallenge(deadline1, v1, r1, s1, []);\nawait challenge.withdrawFromChallenge();\n//try to withdraw without having joined, reverts\nawait expect(\n   challenge.withdrawFromChallenge()\n).to.be.revertedWithCustomError(challenge, \"NotJoined\");",
                  "err": {},
                  "uuid": "ad41eab1-49c1-4e5e-8c20-64bd5ca64df7",
                  "parentUUID": "500b5939-9336-432c-80b0-a8105d5ff0ab",
                  "isHook": false,
                  "skipped": false
                },
                {
                  "title": "should allow a player to join, withdraw and then join again the challenge",
                  "fullTitle": "tests Challenge contract gathering players state should allow a player to join, withdraw and then join again the challenge",
                  "timedOut": false,
                  "duration": 12,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "//Needed twice, because of the nonce\nconst { v: v1, r: r1, s: s1, deadline: deadline1 } = await GetRSVsig(signers[0], token, bid, challenge);\n\nawait challenge.joinChallenge(deadline1, v1, r1, s1, []);\nawait challenge.withdrawFromChallenge();\nconst { v: v2, r: r2, s: s2, deadline: deadline2 } = await GetRSVsig(signers[0], token, bid, challenge);\nawait expect(\n   challenge.joinChallenge(deadline2, v2, r2, s2, [])\n).to.not.be.reverted",
                  "err": {},
                  "uuid": "be616311-4b6f-4278-81b7-f6d6a3db4178",
                  "parentUUID": "500b5939-9336-432c-80b0-a8105d5ff0ab",
                  "isHook": false,
                  "skipped": false
                },
                {
                  "title": "should not allow to start the challenge if there is less than 2 players",
                  "fullTitle": "tests Challenge contract gathering players state should not allow to start the challenge if there is less than 2 players",
                  "timedOut": false,
                  "duration": 6,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "const { v: v1, r: r1, s: s1, deadline: deadline1 } = await GetRSVsig(signers[0], token, bid, challenge);\nawait challenge.joinChallenge(deadline1, v1, r1, s1, []);\nawait expect(\n    challenge.startChallenge()\n).to.be.revertedWithCustomError(challenge, \"InsufficientPlayersToStart\")",
                  "err": {},
                  "uuid": "6a0800b8-5513-4877-9717-39539845b65c",
                  "parentUUID": "500b5939-9336-432c-80b0-a8105d5ff0ab",
                  "isHook": false,
                  "skipped": false
                },
                {
                  "title": "should allow the admin to go to the next state",
                  "fullTitle": "tests Challenge contract gathering players state should allow the admin to go to the next state",
                  "timedOut": false,
                  "duration": 13,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "const { v: v1, r: r1, s: s1, deadline: deadline1 } = await GetRSVsig(signers[0], token, bid, challenge);\nconst { v: v2, r: r2, s: s2, deadline: deadline2 } = await GetRSVsig(signers[1], token, bid, challenge);\nawait challenge.joinChallenge(deadline1, v1, r1, s1, []);\nawait challenge.connect(signers[1]).joinChallenge(deadline2, v2, r2, s2, []);\nawait challenge.startChallenge();\nexpect(\n   await challenge.currentStatus()\n).to.equal(ChallengeStatus.OngoingChallenge);",
                  "err": {},
                  "uuid": "be888960-250b-413d-9a6b-7aefbbf91d5f",
                  "parentUUID": "500b5939-9336-432c-80b0-a8105d5ff0ab",
                  "isHook": false,
                  "skipped": false
                }
              ],
              "suites": [],
              "passes": [
                "024fd0cc-539a-4952-9d2f-a3aa9c2dea80",
                "903ce9e7-3f0f-47cb-9be8-a0759d066017",
                "490755c2-6e44-40ce-9a26-4e712d1d474a",
                "81272440-55b8-4744-8fc0-dd5ad2b0ad3e",
                "ef209b17-3811-4e83-ae6b-2439f535fc94",
                "f5158d7c-b81c-4c76-bf65-e77fb4d24b95",
                "c26bed4f-e64b-47aa-ad32-efc00ce73e03",
                "ad41eab1-49c1-4e5e-8c20-64bd5ca64df7",
                "be616311-4b6f-4278-81b7-f6d6a3db4178",
                "6a0800b8-5513-4877-9717-39539845b65c",
                "be888960-250b-413d-9a6b-7aefbbf91d5f"
              ],
              "failures": [],
              "pending": [],
              "skipped": [],
              "duration": 151,
              "root": false,
              "rootEmpty": false,
              "_timeout": 40000
            },
            {
              "uuid": "389f2642-a66e-43e9-a8bd-a794150519dc",
              "title": "gathering players state (FOR GROUP MODE SPECIFIC TESTS)",
              "fullFile": "/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js",
              "file": "/test/Challenge.test.js",
              "beforeHooks": [
                {
                  "title": "\"before each\" hook in \"gathering players state (FOR GROUP MODE SPECIFIC TESTS)\"",
                  "fullTitle": "tests Challenge contract gathering players state (FOR GROUP MODE SPECIFIC TESTS) \"before each\" hook in \"gathering players state (FOR GROUP MODE SPECIFIC TESTS)\"",
                  "timedOut": false,
                  "duration": 1,
                  "state": null,
                  "speed": null,
                  "pass": false,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "//Deploying in group mode\n({challenge, signers, bid, token, merkleTree} = await loadFixture(groupModeFixture));",
                  "err": {},
                  "uuid": "b51dd91e-9fab-444d-bc55-9f30ba169842",
                  "parentUUID": "389f2642-a66e-43e9-a8bd-a794150519dc",
                  "isHook": true,
                  "skipped": false
                }
              ],
              "afterHooks": [],
              "tests": [
                {
                  "title": "FOR GROUP MODE : should still allow players to join",
                  "fullTitle": "tests Challenge contract gathering players state (FOR GROUP MODE SPECIFIC TESTS) FOR GROUP MODE : should still allow players to join",
                  "timedOut": false,
                  "duration": 21,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "const { v: v1, r: r1, s: s1, deadline: deadline1 } = await GetRSVsig(signers[0], token, bid, challenge);\nconst { v: v2, r: r2, s: s2, deadline: deadline2 } = await GetRSVsig(signers[1], token, bid, challenge);\nconst { v: v3, r: r3, s: s3, deadline: deadline3 } = await GetRSVsig(signers[2], token, bid, challenge);\nconst { v: v4, r: r4, s: s4, deadline: deadline4 } = await GetRSVsig(signers[3], token, bid, challenge);\n//Get merkle proof for each player\nconst proof1 = merkleTree.getProof([signers[0].address]);\nconst proof2 = merkleTree.getProof([signers[1].address]);\nconst proof3 = merkleTree.getProof([signers[2].address]);\nconst proof4 = merkleTree.getProof([signers[3].address]);\n//join with proof\nawait expect(\n    challenge.connect(signers[0]).joinChallenge(deadline1, v1, r1, s1, proof1)\n).to.not.be.reverted;\nawait expect(\n    challenge.connect(signers[1]).joinChallenge(deadline2, v2, r2, s2, proof2)\n).to.not.be.reverted;\nawait expect(\n    challenge.connect(signers[2]).joinChallenge(deadline3, v3, r3, s3, proof3)\n).to.not.be.reverted;\nawait expect(\n    challenge.connect(signers[3]).joinChallenge(deadline4, v4, r4, s4, proof4)\n).to.not.be.reverted;",
                  "err": {},
                  "uuid": "c02d1501-6f53-41e5-b188-da092cc6e412",
                  "parentUUID": "389f2642-a66e-43e9-a8bd-a794150519dc",
                  "isHook": false,
                  "skipped": false
                },
                {
                  "title": "FOR GROUP MODE : should not allow a player to join if he is not among those chosen by the admin at creation",
                  "fullTitle": "tests Challenge contract gathering players state (FOR GROUP MODE SPECIFIC TESTS) FOR GROUP MODE : should not allow a player to join if he is not among those chosen by the admin at creation",
                  "timedOut": false,
                  "duration": 4,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "const { v: v1, r: r1, s: s1, deadline: deadline1 } = await GetRSVsig(signers[5], token, bid, challenge);\nconst proof1 = merkleTree.getProof([signers[0].address]);\nawait expect(\n    challenge.connect(signers[5]).joinChallenge(deadline1, v1, r1, s1, proof1)\n).to.be.revertedWithCustomError(challenge, \"NotWhitelisted\")",
                  "err": {},
                  "uuid": "47fc5467-8f16-4dbd-ad75-0bae52b1afba",
                  "parentUUID": "389f2642-a66e-43e9-a8bd-a794150519dc",
                  "isHook": false,
                  "skipped": false
                }
              ],
              "suites": [],
              "passes": [
                "c02d1501-6f53-41e5-b188-da092cc6e412",
                "47fc5467-8f16-4dbd-ad75-0bae52b1afba"
              ],
              "failures": [],
              "pending": [],
              "skipped": [],
              "duration": 25,
              "root": false,
              "rootEmpty": false,
              "_timeout": 40000
            },
            {
              "uuid": "459e3fd6-fe4a-4f30-a640-6866146d7b7d",
              "title": "ongoing challenge state",
              "fullFile": "/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js",
              "file": "/test/Challenge.test.js",
              "beforeHooks": [
                {
                  "title": "\"before each\" hook in \"ongoing challenge state\"",
                  "fullTitle": "tests Challenge contract ongoing challenge state \"before each\" hook in \"ongoing challenge state\"",
                  "timedOut": false,
                  "duration": 55,
                  "state": null,
                  "speed": null,
                  "pass": false,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "({challenge, signers} = await loadFixture(OngoingChallengeFixture));",
                  "err": {},
                  "uuid": "0f5e4b65-2422-4d6a-a8e0-3b045752bc52",
                  "parentUUID": "459e3fd6-fe4a-4f30-a640-6866146d7b7d",
                  "isHook": true,
                  "skipped": false
                }
              ],
              "afterHooks": [],
              "tests": [
                {
                  "title": "state should be \"OngoingChallenge\" during the challenge. ",
                  "fullTitle": "tests Challenge contract ongoing challenge state state should be \"OngoingChallenge\" during the challenge. ",
                  "timedOut": false,
                  "duration": 0,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "expect(await challenge.currentStatus()).to.equal(ChallengeStatus.OngoingChallenge);",
                  "err": {},
                  "uuid": "57da00f9-0f05-44e9-b017-d54bc9684202",
                  "parentUUID": "459e3fd6-fe4a-4f30-a640-6866146d7b7d",
                  "isHook": false,
                  "skipped": false
                }
              ],
              "suites": [],
              "passes": [
                "57da00f9-0f05-44e9-b017-d54bc9684202"
              ],
              "failures": [],
              "pending": [],
              "skipped": [],
              "duration": 0,
              "root": false,
              "rootEmpty": false,
              "_timeout": 40000
            },
            {
              "uuid": "da10092f-402c-4213-86b0-08011732c702",
              "title": "voting for winner state",
              "fullFile": "/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js",
              "file": "/test/Challenge.test.js",
              "beforeHooks": [
                {
                  "title": "\"before each\" hook in \"voting for winner state\"",
                  "fullTitle": "tests Challenge contract voting for winner state \"before each\" hook in \"voting for winner state\"",
                  "timedOut": false,
                  "duration": 0,
                  "state": null,
                  "speed": null,
                  "pass": false,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "({challenge, signers} = await loadFixture(VotingForWinnerFixture));",
                  "err": {},
                  "uuid": "52583eb7-c44a-4425-97bd-686b40ba7542",
                  "parentUUID": "da10092f-402c-4213-86b0-08011732c702",
                  "isHook": true,
                  "skipped": false
                }
              ],
              "afterHooks": [],
              "tests": [
                {
                  "title": "should allow a player to vote (for another player).",
                  "fullTitle": "tests Challenge contract voting for winner state should allow a player to vote (for another player).",
                  "timedOut": false,
                  "duration": 2,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "await expect(\n    challenge.voteForWinner(signers[1].address)\n).to.not.be.reverted;",
                  "err": {},
                  "uuid": "10a5d600-02b4-4771-9be6-fc799debdd25",
                  "parentUUID": "da10092f-402c-4213-86b0-08011732c702",
                  "isHook": false,
                  "skipped": false
                },
                {
                  "title": "should not allow a non player to vote",
                  "fullTitle": "tests Challenge contract voting for winner state should not allow a non player to vote",
                  "timedOut": false,
                  "duration": 2,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "await expect(\n   challenge.connect(signers[5]).voteForWinner(signers[1].address)\n).to.be.revertedWithCustomError(challenge, \"NotAPlayer\");",
                  "err": {},
                  "uuid": "97b00925-2322-4066-9ebe-76d44bb26514",
                  "parentUUID": "da10092f-402c-4213-86b0-08011732c702",
                  "isHook": false,
                  "skipped": false
                },
                {
                  "title": "should not allow a player to vote twice",
                  "fullTitle": "tests Challenge contract voting for winner state should not allow a player to vote twice",
                  "timedOut": false,
                  "duration": 4,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "await challenge.voteForWinner(signers[1].address);\nawait expect(\n   challenge.voteForWinner(signers[1].address)\n).to.be.revertedWithCustomError(challenge, \"AlreadyVoted\");",
                  "err": {},
                  "uuid": "5dee954e-8f8f-4d13-9536-ae212a765919",
                  "parentUUID": "da10092f-402c-4213-86b0-08011732c702",
                  "isHook": false,
                  "skipped": false
                },
                {
                  "title": "should revert with InvalidVoteTarget when voting for non-player",
                  "fullTitle": "tests Challenge contract voting for winner state should revert with InvalidVoteTarget when voting for non-player",
                  "timedOut": false,
                  "duration": 3,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "await expect(\n    challenge.voteForWinner(signers[5].address) // signer[5] never joined\n).to.be.revertedWithCustomError(challenge, \"InvalidVoteTarget\");",
                  "err": {},
                  "uuid": "724305ce-67b7-412a-8074-ac733aeb1385",
                  "parentUUID": "da10092f-402c-4213-86b0-08011732c702",
                  "isHook": false,
                  "skipped": false
                },
                {
                  "title": "should revert with InvalidVoteTarget when voting for zero address",
                  "fullTitle": "tests Challenge contract voting for winner state should revert with InvalidVoteTarget when voting for zero address",
                  "timedOut": false,
                  "duration": 2,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "await expect(\n    challenge.voteForWinner(ethers.ZeroAddress)\n).to.be.revertedWithCustomError(challenge, \"InvalidVoteTarget\");",
                  "err": {},
                  "uuid": "fc017087-5ec5-4963-806d-7acdd4d0fc2d",
                  "parentUUID": "da10092f-402c-4213-86b0-08011732c702",
                  "isHook": false,
                  "skipped": false
                },
                {
                  "title": "should not allow to go to next state (ChallengeWon) if everyone has not voted (and minimum delay hasn't passed)",
                  "fullTitle": "tests Challenge contract voting for winner state should not allow to go to next state (ChallengeWon) if everyone has not voted (and minimum delay hasn't passed)",
                  "timedOut": false,
                  "duration": 5,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "await challenge.voteForWinner(signers[1].address)\nawait challenge.connect(signers[1]).voteForWinner(signers[1].address)\nawait expect(\n   challenge.endWinnerVote()\n).to.be.revertedWithCustomError(challenge, \"VotingStillOngoing\");",
                  "err": {},
                  "uuid": "1010d259-9d3d-4c46-80e1-38235073b7af",
                  "parentUUID": "da10092f-402c-4213-86b0-08011732c702",
                  "isHook": false,
                  "skipped": false
                },
                {
                  "title": "should allow ANYONE to go to next state (ChallengeWon) if everyone has not voted but minimum delay has passed",
                  "fullTitle": "tests Challenge contract voting for winner state should allow ANYONE to go to next state (ChallengeWon) if everyone has not voted but minimum delay has passed",
                  "timedOut": false,
                  "duration": 9,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "await challenge.voteForWinner(signers[1].address)\nawait challenge.connect(signers[1]).voteForWinner(signers[1].address)\n//Pass enough time\nawait time.increase(votingDelay);\nawait expect(\n   challenge.connect(signers[2]).endWinnerVote()\n).not.to.be.reverted;",
                  "err": {},
                  "uuid": "df233d41-6e5a-4e03-93a5-4b3ed55fdf69",
                  "parentUUID": "da10092f-402c-4213-86b0-08011732c702",
                  "isHook": false,
                  "skipped": false
                },
                {
                  "title": "should allow ANYONE to go to next state (ChallengeWon) when everyone voted",
                  "fullTitle": "tests Challenge contract voting for winner state should allow ANYONE to go to next state (ChallengeWon) when everyone voted",
                  "timedOut": false,
                  "duration": 10,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "await challenge.voteForWinner(signers[1].address)\nawait challenge.connect(signers[1]).voteForWinner(signers[1].address) \nawait challenge.connect(signers[2]).voteForWinner(signers[2].address) \nawait challenge.connect(signers[3]).voteForWinner(signers[1].address) \nawait challenge.connect(signers[4]).voteForWinner(signers[2].address) \n//Any player can end vote, because everyone has voted\nawait challenge.connect(signers[1]).endWinnerVote();\nexpect(await challenge.currentStatus()).to.equal(ChallengeStatus.ChallengeWon);",
                  "err": {},
                  "uuid": "f2419326-9111-420d-950d-70a9ef67c149",
                  "parentUUID": "da10092f-402c-4213-86b0-08011732c702",
                  "isHook": false,
                  "skipped": false
                },
                {
                  "title": "should not allow ANYONE to go to next state (ChallengeWon) if no one has voted (even if time has passed)",
                  "fullTitle": "tests Challenge contract voting for winner state should not allow ANYONE to go to next state (ChallengeWon) if no one has voted (even if time has passed)",
                  "timedOut": false,
                  "duration": 3,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "//Pass enough time\n            await time.increase(votingDelay);\n            //Any player can end vote, because everyone has voted\n            await expect(challenge.connect(signers[1]).endWinnerVote()).to.be.revertedWithCustomError(challenge, \"InvalidState\");",
                  "err": {},
                  "uuid": "de8d6e1d-9b78-4912-af7f-bc481d01644f",
                  "parentUUID": "da10092f-402c-4213-86b0-08011732c702",
                  "isHook": false,
                  "skipped": false
                }
              ],
              "suites": [],
              "passes": [
                "10a5d600-02b4-4771-9be6-fc799debdd25",
                "97b00925-2322-4066-9ebe-76d44bb26514",
                "5dee954e-8f8f-4d13-9536-ae212a765919",
                "724305ce-67b7-412a-8074-ac733aeb1385",
                "fc017087-5ec5-4963-806d-7acdd4d0fc2d",
                "1010d259-9d3d-4c46-80e1-38235073b7af",
                "df233d41-6e5a-4e03-93a5-4b3ed55fdf69",
                "f2419326-9111-420d-950d-70a9ef67c149",
                "de8d6e1d-9b78-4912-af7f-bc481d01644f"
              ],
              "failures": [],
              "pending": [],
              "skipped": [],
              "duration": 40,
              "root": false,
              "rootEmpty": false,
              "_timeout": 40000
            },
            {
              "uuid": "a3bf9256-d451-4857-89b9-9f0fb114da20",
              "title": "challenge won state",
              "fullFile": "/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js",
              "file": "/test/Challenge.test.js",
              "beforeHooks": [
                {
                  "title": "\"before each\" hook in \"challenge won state\"",
                  "fullTitle": "tests Challenge contract challenge won state \"before each\" hook in \"challenge won state\"",
                  "timedOut": false,
                  "duration": 0,
                  "state": null,
                  "speed": null,
                  "pass": false,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "({challenge, signers, bid, token} = await loadFixture(VotingForWinnerFixture));",
                  "err": {},
                  "uuid": "ae46b3b8-24fd-465f-88a2-2d3c120a9fcf",
                  "parentUUID": "a3bf9256-d451-4857-89b9-9f0fb114da20",
                  "isHook": true,
                  "skipped": false
                }
              ],
              "afterHooks": [],
              "tests": [
                {
                  "title": "winner should be able to retrieve prize when endWinnerVote() is triggered",
                  "fullTitle": "tests Challenge contract challenge won state winner should be able to retrieve prize when endWinnerVote() is triggered",
                  "timedOut": false,
                  "duration": 12,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "//Players voting\nawait challenge.voteForWinner(signers[1].address)\nawait challenge.connect(signers[1]).voteForWinner(signers[2].address) \nawait challenge.connect(signers[2]).voteForWinner(signers[2].address) \nawait challenge.connect(signers[3]).voteForWinner(signers[1].address) \nawait challenge.connect(signers[4]).voteForWinner(signers[2].address) \n//Check balance before\nconst balanceBefore = await token.balanceOf(signers[2].address);\n//End vote\nawait challenge.endWinnerVote();\nawait challenge.connect(signers[2]).withdrawPrize();\n//Check balance after\nconst balanceAfter = await token.balanceOf(signers[2].address);\nconst diff = balanceAfter - balanceBefore;\nconst expectedDiff = bid*5n - 5n*bid*bronze/100n;\n//Difference should be equal to cash prize won\nexpect(diff).to.equal(expectedDiff); // substract fees too",
                  "err": {},
                  "uuid": "53fd9c5f-402f-4010-a3dc-072d2323fd76",
                  "parentUUID": "a3bf9256-d451-4857-89b9-9f0fb114da20",
                  "isHook": false,
                  "skipped": false
                },
                {
                  "title": "should revert with NotAWinner when non-winner tries to withdraw",
                  "fullTitle": "tests Challenge contract challenge won state should revert with NotAWinner when non-winner tries to withdraw",
                  "timedOut": false,
                  "duration": 11,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "// signers[2] has 2 votes, signers[1] has 3 votes (winner)\n// signers[0] has 0 votes, signers[3] has 0 votes, signers[4] has 0 votes\n//Players voting\nawait challenge.voteForWinner(signers[1].address)\nawait challenge.connect(signers[1]).voteForWinner(signers[2].address) \nawait challenge.connect(signers[2]).voteForWinner(signers[2].address) \nawait challenge.connect(signers[3]).voteForWinner(signers[1].address) \nawait challenge.connect(signers[4]).voteForWinner(signers[2].address) \n//End vote\nawait challenge.endWinnerVote();\nawait expect(\n    challenge.connect(signers[0]).withdrawPrize()\n).to.be.revertedWithCustomError(challenge, \"NotAWinner\");",
                  "err": {},
                  "uuid": "abadeae5-a010-423e-ab22-42be12c2a58f",
                  "parentUUID": "a3bf9256-d451-4857-89b9-9f0fb114da20",
                  "isHook": false,
                  "skipped": false
                },
                {
                  "title": "should revert with NotAWinner when player with votes (but not highest) tries to withdraw",
                  "fullTitle": "tests Challenge contract challenge won state should revert with NotAWinner when player with votes (but not highest) tries to withdraw",
                  "timedOut": false,
                  "duration": 12,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "// In EndingVoteFixture, signers[2] has 2 votes but signers[1] has 3 (highest)\n//Players voting\nawait challenge.voteForWinner(signers[1].address)\nawait challenge.connect(signers[1]).voteForWinner(signers[2].address) \nawait challenge.connect(signers[2]).voteForWinner(signers[2].address) \nawait challenge.connect(signers[3]).voteForWinner(signers[1].address) \nawait challenge.connect(signers[4]).voteForWinner(signers[2].address) \n//End vote\nawait challenge.endWinnerVote();\nawait expect(\n    challenge.connect(signers[1]).withdrawPrize()\n).to.be.revertedWithCustomError(challenge, \"NotAWinner\");",
                  "err": {},
                  "uuid": "5e7017e6-b0d2-433d-9da7-502b02286126",
                  "parentUUID": "a3bf9256-d451-4857-89b9-9f0fb114da20",
                  "isHook": false,
                  "skipped": false
                },
                {
                  "title": "winner should NOT be able to retrieve prize multiple times",
                  "fullTitle": "tests Challenge contract challenge won state winner should NOT be able to retrieve prize multiple times",
                  "timedOut": false,
                  "duration": 14,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "//Players voting\nawait challenge.voteForWinner(signers[1].address)\nawait challenge.connect(signers[1]).voteForWinner(signers[2].address) \nawait challenge.connect(signers[2]).voteForWinner(signers[2].address) \nawait challenge.connect(signers[3]).voteForWinner(signers[1].address) \nawait challenge.connect(signers[4]).voteForWinner(signers[2].address) \n//End vote\nawait challenge.endWinnerVote();\nawait challenge.connect(signers[2]).withdrawPrize();\nawait expect(\n    challenge.connect(signers[2]).withdrawPrize()\n).to.be.revertedWithCustomError(challenge, \"PrizeAlreadyWithdrawn\");",
                  "err": {},
                  "uuid": "db53466a-a60b-4740-a5ef-864b6d67dd59",
                  "parentUUID": "a3bf9256-d451-4857-89b9-9f0fb114da20",
                  "isHook": false,
                  "skipped": false
                },
                {
                  "title": "When there is a tie, should allow both winners to receive prize",
                  "fullTitle": "tests Challenge contract challenge won state When there is a tie, should allow both winners to receive prize",
                  "timedOut": false,
                  "duration": 17,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "//Players voting\nawait challenge.voteForWinner(signers[3].address)\nawait challenge.connect(signers[1]).voteForWinner(signers[1].address)\nawait challenge.connect(signers[2]).voteForWinner(signers[3].address)\nawait challenge.connect(signers[3]).voteForWinner(signers[1].address)\nawait challenge.connect(signers[4]).voteForWinner(signers[4].address)\n//Check balance before for both winners\nconst balanceBefore1 = await token.balanceOf(signers[1].address);\nconst balanceBefore2 = await token.balanceOf(signers[3].address);\n//End vote\nawait challenge.endWinnerVote();\nawait challenge.connect(signers[1]).withdrawPrize();\n//Check balance after (winner1)\nconst balanceAfter1 = await token.balanceOf(signers[1].address);\nconst diff1 = balanceAfter1 - balanceBefore1;\nconst expectedDiff1 = bid*5n/2n - bid*5n/2n*gold/100n;\nexpect(\n    diff1\n).to.equal(expectedDiff1);\nawait challenge.connect(signers[3]).withdrawPrize();\n//Check balance after (winner2)\nconst balanceAfter2 = await token.balanceOf(signers[3].address);\nconst diff2 = balanceAfter2 - balanceBefore2;\nconst expectedDiff2 = bid*5n/2n - bid*5n/2n*silver/100n;\nexpect(\n    diff2\n).to.equal(expectedDiff2); //substract fees too",
                  "err": {},
                  "uuid": "f679cd9c-4f08-4fc4-8a9d-79413ca62c82",
                  "parentUUID": "a3bf9256-d451-4857-89b9-9f0fb114da20",
                  "isHook": false,
                  "skipped": false
                },
                {
                  "title": "if more tokens (signers[1] gold tier here), winner should receive more tokens",
                  "fullTitle": "tests Challenge contract challenge won state if more tokens (signers[1] gold tier here), winner should receive more tokens",
                  "timedOut": false,
                  "duration": 13,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "//Players voting\nawait challenge.voteForWinner(signers[1].address)\nawait challenge.connect(signers[1]).voteForWinner(signers[1].address) \nawait challenge.connect(signers[2]).voteForWinner(signers[1].address) \nawait challenge.connect(signers[3]).voteForWinner(signers[0].address) \nawait challenge.connect(signers[4]).voteForWinner(signers[2].address) \n//Check balance before\nconst balanceBefore = await token.balanceOf(signers[1].address);\n//End vote\nawait challenge.endWinnerVote();\nawait challenge.connect(signers[1]).withdrawPrize();\n//Check balance after\nconst balanceAfter = await token.balanceOf(signers[1].address);\nconst diff = balanceAfter - balanceBefore;\nconst expectedDiff = bid*5n - 5n*bid*gold/100n;\n//Difference should be equal to cash prize won\nexpect(diff).to.equal(expectedDiff); // substract fees too",
                  "err": {},
                  "uuid": "1abd3f19-1a38-4800-a55e-1b3202d883f2",
                  "parentUUID": "a3bf9256-d451-4857-89b9-9f0fb114da20",
                  "isHook": false,
                  "skipped": false
                },
                {
                  "title": "fee receiver should receive half of the fees (the rest is burnt)",
                  "fullTitle": "tests Challenge contract challenge won state fee receiver should receive half of the fees (the rest is burnt)",
                  "timedOut": false,
                  "duration": 13,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "//Players voting\nawait challenge.voteForWinner(signers[2].address)\nawait challenge.connect(signers[1]).voteForWinner(signers[2].address)\nawait challenge.connect(signers[2]).voteForWinner(signers[2].address)\nawait challenge.connect(signers[3]).voteForWinner(signers[1].address)\nawait challenge.connect(signers[4]).voteForWinner(signers[4].address)\nconst balanceBefore = await token.balanceOf(signers[0].address);\n//End vote\nawait challenge.endWinnerVote();\nawait challenge.connect(signers[2]).withdrawPrize();\nconst balanceAfter = await token.balanceOf(signers[0].address);\nconst diff = balanceAfter - balanceBefore;\nconst expectedFeesReceived = 5n*bid/2n*bronze/100n;\n\nexpect(\n    diff\n).to.equal(expectedFeesReceived);",
                  "err": {},
                  "uuid": "8d07a4a3-0945-4974-b6f6-3f89ac1c1972",
                  "parentUUID": "a3bf9256-d451-4857-89b9-9f0fb114da20",
                  "isHook": false,
                  "skipped": false
                },
                {
                  "title": "half of the fees should have been burnt",
                  "fullTitle": "tests Challenge contract challenge won state half of the fees should have been burnt",
                  "timedOut": false,
                  "duration": 13,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "//Players voting\nawait challenge.voteForWinner(signers[0].address)\nawait challenge.connect(signers[1]).voteForWinner(signers[0].address)\nawait challenge.connect(signers[2]).voteForWinner(signers[2].address)\nawait challenge.connect(signers[3]).voteForWinner(signers[1].address)\nawait challenge.connect(signers[4]).voteForWinner(signers[4].address)\nconst initialTotalSupply = await token.totalSupply();\n//End vote\nawait challenge.endWinnerVote();\nawait challenge.connect(signers[0]).withdrawPrize();\nconst finalTotalSupply = await token.totalSupply();\nconst diff = initialTotalSupply - finalTotalSupply;\nconst expectedBurntAmount = bid*5n/2n*platinum/100n;\n\nexpect(\n    diff\n).to.equal(expectedBurntAmount);",
                  "err": {},
                  "uuid": "0aa40a4f-8a33-4568-9904-3b58d6216eff",
                  "parentUUID": "a3bf9256-d451-4857-89b9-9f0fb114da20",
                  "isHook": false,
                  "skipped": false
                }
              ],
              "suites": [],
              "passes": [
                "53fd9c5f-402f-4010-a3dc-072d2323fd76",
                "abadeae5-a010-423e-ab22-42be12c2a58f",
                "5e7017e6-b0d2-433d-9da7-502b02286126",
                "db53466a-a60b-4740-a5ef-864b6d67dd59",
                "f679cd9c-4f08-4fc4-8a9d-79413ca62c82",
                "1abd3f19-1a38-4800-a55e-1b3202d883f2",
                "8d07a4a3-0945-4974-b6f6-3f89ac1c1972",
                "0aa40a4f-8a33-4568-9904-3b58d6216eff"
              ],
              "failures": [],
              "pending": [],
              "skipped": [],
              "duration": 105,
              "root": false,
              "rootEmpty": false,
              "_timeout": 40000
            },
            {
              "uuid": "68f558b0-d38b-431b-85b4-62e256e92b46",
              "title": "Owner functions",
              "fullFile": "/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js",
              "file": "/test/Challenge.test.js",
              "beforeHooks": [],
              "afterHooks": [],
              "tests": [
                {
                  "title": "should not allow not admin player to go to OngoingChallenge state",
                  "fullTitle": "tests Challenge contract Owner functions should not allow not admin player to go to OngoingChallenge state",
                  "timedOut": false,
                  "duration": 4,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "const {challenge, signers} = await loadFixture(deployedChallengeFixtureBase);\nawait expect(\n   challenge.connect(signers[1]).startChallenge()\n).to.be.revertedWithCustomError(challenge, \"OwnableUnauthorizedAccount\").withArgs(signers[1].address);",
                  "err": {},
                  "uuid": "478c4a5c-b540-4309-9005-575f5e9fb6aa",
                  "parentUUID": "68f558b0-d38b-431b-85b4-62e256e92b46",
                  "isHook": false,
                  "skipped": false
                }
              ],
              "suites": [],
              "passes": [
                "478c4a5c-b540-4309-9005-575f5e9fb6aa"
              ],
              "failures": [],
              "pending": [],
              "skipped": [],
              "duration": 4,
              "root": false,
              "rootEmpty": false,
              "_timeout": 40000
            },
            {
              "uuid": "c11b5607-0b6b-4c8f-8219-22d8607d6da5",
              "title": "State functions availability",
              "fullFile": "/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js",
              "file": "/test/Challenge.test.js",
              "beforeHooks": [],
              "afterHooks": [],
              "tests": [],
              "suites": [
                {
                  "uuid": "deaef0c6-ea55-49b9-8db1-311ffe846231",
                  "title": "state GatheringPlayers",
                  "fullFile": "/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js",
                  "file": "/test/Challenge.test.js",
                  "beforeHooks": [
                    {
                      "title": "\"before each\" hook in \"state GatheringPlayers\"",
                      "fullTitle": "tests Challenge contract State functions availability state GatheringPlayers \"before each\" hook in \"state GatheringPlayers\"",
                      "timedOut": false,
                      "duration": 0,
                      "state": null,
                      "speed": null,
                      "pass": false,
                      "fail": false,
                      "pending": false,
                      "context": null,
                      "code": "({challenge, signers} = await loadFixture(deployedChallengeFixtureBase));",
                      "err": {},
                      "uuid": "d05a7850-51e5-45f8-8acd-a1fe221ed58b",
                      "parentUUID": "deaef0c6-ea55-49b9-8db1-311ffe846231",
                      "isHook": true,
                      "skipped": false
                    }
                  ],
                  "afterHooks": [],
                  "tests": [
                    {
                      "title": "should not allow voteForWinner() in GatheringPlayers state",
                      "fullTitle": "tests Challenge contract State functions availability state GatheringPlayers should not allow voteForWinner() in GatheringPlayers state",
                      "timedOut": false,
                      "duration": 2,
                      "state": "passed",
                      "speed": "fast",
                      "pass": true,
                      "fail": false,
                      "pending": false,
                      "context": null,
                      "code": "await expect(\n    challenge.voteForWinner(signers[1].address)\n).to.be.revertedWithCustomError(challenge, \"InvalidState\");",
                      "err": {},
                      "uuid": "1f5bbf69-a868-4f18-a9e0-484fcec5ce32",
                      "parentUUID": "deaef0c6-ea55-49b9-8db1-311ffe846231",
                      "isHook": false,
                      "skipped": false
                    },
                    {
                      "title": "should not allow endWinnerVote() in GatheringPlayers state",
                      "fullTitle": "tests Challenge contract State functions availability state GatheringPlayers should not allow endWinnerVote() in GatheringPlayers state",
                      "timedOut": false,
                      "duration": 2,
                      "state": "passed",
                      "speed": "fast",
                      "pass": true,
                      "fail": false,
                      "pending": false,
                      "context": null,
                      "code": "await expect(\n    challenge.endWinnerVote()\n).to.be.revertedWithCustomError(challenge, \"InvalidState\");",
                      "err": {},
                      "uuid": "dd466c98-da34-4803-bbae-3f4ad5c59f9c",
                      "parentUUID": "deaef0c6-ea55-49b9-8db1-311ffe846231",
                      "isHook": false,
                      "skipped": false
                    },
                    {
                      "title": "should not allow withdrawPrize() in GatheringPlayers state",
                      "fullTitle": "tests Challenge contract State functions availability state GatheringPlayers should not allow withdrawPrize() in GatheringPlayers state",
                      "timedOut": false,
                      "duration": 3,
                      "state": "passed",
                      "speed": "fast",
                      "pass": true,
                      "fail": false,
                      "pending": false,
                      "context": null,
                      "code": "await expect(\n    challenge.withdrawPrize()\n).to.be.revertedWithCustomError(challenge, \"InvalidState\");",
                      "err": {},
                      "uuid": "3798ee9b-0e87-43a6-9d79-777480d60349",
                      "parentUUID": "deaef0c6-ea55-49b9-8db1-311ffe846231",
                      "isHook": false,
                      "skipped": false
                    }
                  ],
                  "suites": [],
                  "passes": [
                    "1f5bbf69-a868-4f18-a9e0-484fcec5ce32",
                    "dd466c98-da34-4803-bbae-3f4ad5c59f9c",
                    "3798ee9b-0e87-43a6-9d79-777480d60349"
                  ],
                  "failures": [],
                  "pending": [],
                  "skipped": [],
                  "duration": 7,
                  "root": false,
                  "rootEmpty": false,
                  "_timeout": 40000
                },
                {
                  "uuid": "a30f3af6-2308-4c8d-853c-a182cd93aa7c",
                  "title": "state OngoingChallenge",
                  "fullFile": "/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js",
                  "file": "/test/Challenge.test.js",
                  "beforeHooks": [
                    {
                      "title": "\"before each\" hook in \"state OngoingChallenge\"",
                      "fullTitle": "tests Challenge contract State functions availability state OngoingChallenge \"before each\" hook in \"state OngoingChallenge\"",
                      "timedOut": false,
                      "duration": 0,
                      "state": null,
                      "speed": null,
                      "pass": false,
                      "fail": false,
                      "pending": false,
                      "context": null,
                      "code": "({challenge, signers, bid, token} = await loadFixture(OngoingChallengeFixture));",
                      "err": {},
                      "uuid": "e5243d39-cb59-4dd1-bc75-0fde6873ba70",
                      "parentUUID": "a30f3af6-2308-4c8d-853c-a182cd93aa7c",
                      "isHook": true,
                      "skipped": false
                    }
                  ],
                  "afterHooks": [],
                  "tests": [
                    {
                      "title": "should not allow joinChallenge() in OngoingChallenge state",
                      "fullTitle": "tests Challenge contract State functions availability state OngoingChallenge should not allow joinChallenge() in OngoingChallenge state",
                      "timedOut": false,
                      "duration": 5,
                      "state": "passed",
                      "speed": "fast",
                      "pass": true,
                      "fail": false,
                      "pending": false,
                      "context": null,
                      "code": "const { v: v1, r: r1, s: s1, deadline: deadline1 } = await GetRSVsig(signers[0], token, bid, challenge);\nawait expect(\n    challenge.joinChallenge(deadline1, v1, r1, s1, [])\n).to.be.revertedWithCustomError(challenge, \"InvalidState\");",
                      "err": {},
                      "uuid": "dabdd279-39a2-4fae-ac10-0e13cae83639",
                      "parentUUID": "a30f3af6-2308-4c8d-853c-a182cd93aa7c",
                      "isHook": false,
                      "skipped": false
                    },
                    {
                      "title": "should not allow withdrawFromChallenge() in OngoingChallenge state",
                      "fullTitle": "tests Challenge contract State functions availability state OngoingChallenge should not allow withdrawFromChallenge() in OngoingChallenge state",
                      "timedOut": false,
                      "duration": 1,
                      "state": "passed",
                      "speed": "fast",
                      "pass": true,
                      "fail": false,
                      "pending": false,
                      "context": null,
                      "code": "await expect(\n    challenge.withdrawFromChallenge()\n).to.be.revertedWithCustomError(challenge, \"InvalidState\");",
                      "err": {},
                      "uuid": "b9ada7dc-1499-4d9d-9207-5a23a3abc185",
                      "parentUUID": "a30f3af6-2308-4c8d-853c-a182cd93aa7c",
                      "isHook": false,
                      "skipped": false
                    },
                    {
                      "title": "should not allow startChallenge() in OngoingChallenge state",
                      "fullTitle": "tests Challenge contract State functions availability state OngoingChallenge should not allow startChallenge() in OngoingChallenge state",
                      "timedOut": false,
                      "duration": 1,
                      "state": "passed",
                      "speed": "fast",
                      "pass": true,
                      "fail": false,
                      "pending": false,
                      "context": null,
                      "code": "await expect(\n    challenge.startChallenge()\n).to.be.revertedWithCustomError(challenge, \"InvalidState\");",
                      "err": {},
                      "uuid": "dca37a00-06d7-4fe1-bc30-851d4d689d1c",
                      "parentUUID": "a30f3af6-2308-4c8d-853c-a182cd93aa7c",
                      "isHook": false,
                      "skipped": false
                    },
                    {
                      "title": "should not allow voteForWinner() in OngoingChallenge state (if the challenge is not over)",
                      "fullTitle": "tests Challenge contract State functions availability state OngoingChallenge should not allow voteForWinner() in OngoingChallenge state (if the challenge is not over)",
                      "timedOut": false,
                      "duration": 1,
                      "state": "passed",
                      "speed": "fast",
                      "pass": true,
                      "fail": false,
                      "pending": false,
                      "context": null,
                      "code": "await expect(\n    challenge.voteForWinner(signers[1].address)\n).to.be.revertedWithCustomError(challenge, \"VotingNotAllowed\");",
                      "err": {},
                      "uuid": "2bc7cdaa-7c12-4c36-b748-d1d243c1d447",
                      "parentUUID": "a30f3af6-2308-4c8d-853c-a182cd93aa7c",
                      "isHook": false,
                      "skipped": false
                    },
                    {
                      "title": "should allow voteForWinner() in OngoingChallenge state (if the challenge is over). state should become \"VotingForWinner\" after first player votes at the end of the challenge. ",
                      "fullTitle": "tests Challenge contract State functions availability state OngoingChallenge should allow voteForWinner() in OngoingChallenge state (if the challenge is over). state should become \"VotingForWinner\" after first player votes at the end of the challenge. ",
                      "timedOut": false,
                      "duration": 4,
                      "state": "passed",
                      "speed": "fast",
                      "pass": true,
                      "fail": false,
                      "pending": false,
                      "context": null,
                      "code": "expect(await challenge.currentStatus()).to.equal(ChallengeStatus.OngoingChallenge);\n//wait for challenge to end\nawait time.increase(duration);\n\n//should be allowed\nawait expect(\n    challenge.voteForWinner(signers[1].address)\n).to.not.be.reverted;\n//State should have changed\nexpect(await challenge.currentStatus()).to.equal(ChallengeStatus.VotingForWinner);",
                      "err": {},
                      "uuid": "cbb29fc6-62f6-4edd-b0f4-e84f5362a6c9",
                      "parentUUID": "a30f3af6-2308-4c8d-853c-a182cd93aa7c",
                      "isHook": false,
                      "skipped": false
                    },
                    {
                      "title": "should not allow endWinnerVote() in OngoingChallenge state",
                      "fullTitle": "tests Challenge contract State functions availability state OngoingChallenge should not allow endWinnerVote() in OngoingChallenge state",
                      "timedOut": false,
                      "duration": 2,
                      "state": "passed",
                      "speed": "fast",
                      "pass": true,
                      "fail": false,
                      "pending": false,
                      "context": null,
                      "code": "await expect(\n    challenge.endWinnerVote()\n).to.be.revertedWithCustomError(challenge, \"InvalidState\");",
                      "err": {},
                      "uuid": "c0b98007-0571-4520-969d-9a521dc27b36",
                      "parentUUID": "a30f3af6-2308-4c8d-853c-a182cd93aa7c",
                      "isHook": false,
                      "skipped": false
                    },
                    {
                      "title": "should not allow withdrawPrize() in OnGoingChallenge state",
                      "fullTitle": "tests Challenge contract State functions availability state OngoingChallenge should not allow withdrawPrize() in OnGoingChallenge state",
                      "timedOut": false,
                      "duration": 2,
                      "state": "passed",
                      "speed": "fast",
                      "pass": true,
                      "fail": false,
                      "pending": false,
                      "context": null,
                      "code": "await expect(\n    challenge.withdrawPrize()\n).to.be.revertedWithCustomError(challenge, \"InvalidState\");",
                      "err": {},
                      "uuid": "b0528b6b-e2cc-41f4-a23d-8d092881c3d4",
                      "parentUUID": "a30f3af6-2308-4c8d-853c-a182cd93aa7c",
                      "isHook": false,
                      "skipped": false
                    }
                  ],
                  "suites": [],
                  "passes": [
                    "dabdd279-39a2-4fae-ac10-0e13cae83639",
                    "b9ada7dc-1499-4d9d-9207-5a23a3abc185",
                    "dca37a00-06d7-4fe1-bc30-851d4d689d1c",
                    "2bc7cdaa-7c12-4c36-b748-d1d243c1d447",
                    "cbb29fc6-62f6-4edd-b0f4-e84f5362a6c9",
                    "c0b98007-0571-4520-969d-9a521dc27b36",
                    "b0528b6b-e2cc-41f4-a23d-8d092881c3d4"
                  ],
                  "failures": [],
                  "pending": [],
                  "skipped": [],
                  "duration": 16,
                  "root": false,
                  "rootEmpty": false,
                  "_timeout": 40000
                },
                {
                  "uuid": "b666a3d0-5e77-4b59-97be-8f333a573f0e",
                  "title": "state VotingForWinner",
                  "fullFile": "/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js",
                  "file": "/test/Challenge.test.js",
                  "beforeHooks": [
                    {
                      "title": "\"before each\" hook in \"state VotingForWinner\"",
                      "fullTitle": "tests Challenge contract State functions availability state VotingForWinner \"before each\" hook in \"state VotingForWinner\"",
                      "timedOut": false,
                      "duration": 1,
                      "state": null,
                      "speed": null,
                      "pass": false,
                      "fail": false,
                      "pending": false,
                      "context": null,
                      "code": "({challenge, signers, bid, token} = await loadFixture(VotingForWinnerFixture));",
                      "err": {},
                      "uuid": "2613eafe-72e4-4a01-9a9d-fed6147b9831",
                      "parentUUID": "b666a3d0-5e77-4b59-97be-8f333a573f0e",
                      "isHook": true,
                      "skipped": false
                    }
                  ],
                  "afterHooks": [],
                  "tests": [
                    {
                      "title": "should not allow joinChallenge() in VotingForWinner state",
                      "fullTitle": "tests Challenge contract State functions availability state VotingForWinner should not allow joinChallenge() in VotingForWinner state",
                      "timedOut": false,
                      "duration": 5,
                      "state": "passed",
                      "speed": "fast",
                      "pass": true,
                      "fail": false,
                      "pending": false,
                      "context": null,
                      "code": "const { v: v1, r: r1, s: s1, deadline: deadline1 } = await GetRSVsig(signers[0], token, bid, challenge);\nawait expect(\n    challenge.joinChallenge(deadline1, v1, r1, s1, [])\n).to.be.revertedWithCustomError(challenge, \"InvalidState\");",
                      "err": {},
                      "uuid": "196d3ef9-1b33-4945-80ea-f17cd3e0653f",
                      "parentUUID": "b666a3d0-5e77-4b59-97be-8f333a573f0e",
                      "isHook": false,
                      "skipped": false
                    },
                    {
                      "title": "should not allow withdrawFromChallenge() in OngoingChallenge state",
                      "fullTitle": "tests Challenge contract State functions availability state VotingForWinner should not allow withdrawFromChallenge() in OngoingChallenge state",
                      "timedOut": false,
                      "duration": 2,
                      "state": "passed",
                      "speed": "fast",
                      "pass": true,
                      "fail": false,
                      "pending": false,
                      "context": null,
                      "code": "await expect(\n    challenge.withdrawFromChallenge()\n).to.be.revertedWithCustomError(challenge, \"InvalidState\");",
                      "err": {},
                      "uuid": "d3daed32-889e-4683-98b0-90c7a92e6a46",
                      "parentUUID": "b666a3d0-5e77-4b59-97be-8f333a573f0e",
                      "isHook": false,
                      "skipped": false
                    },
                    {
                      "title": "should not allow startChallenge() in VotingForWinner state",
                      "fullTitle": "tests Challenge contract State functions availability state VotingForWinner should not allow startChallenge() in VotingForWinner state",
                      "timedOut": false,
                      "duration": 1,
                      "state": "passed",
                      "speed": "fast",
                      "pass": true,
                      "fail": false,
                      "pending": false,
                      "context": null,
                      "code": "await expect(\n    challenge.startChallenge()\n).to.be.revertedWithCustomError(challenge, \"InvalidState\");",
                      "err": {},
                      "uuid": "c61c9e89-bbe4-4578-826a-ec6dd02e3f36",
                      "parentUUID": "b666a3d0-5e77-4b59-97be-8f333a573f0e",
                      "isHook": false,
                      "skipped": false
                    },
                    {
                      "title": "should not allow withdrawPrize() in VotingForWinner state",
                      "fullTitle": "tests Challenge contract State functions availability state VotingForWinner should not allow withdrawPrize() in VotingForWinner state",
                      "timedOut": false,
                      "duration": 2,
                      "state": "passed",
                      "speed": "fast",
                      "pass": true,
                      "fail": false,
                      "pending": false,
                      "context": null,
                      "code": "await expect(\n    challenge.withdrawPrize()\n).to.be.revertedWithCustomError(challenge, \"InvalidState\");",
                      "err": {},
                      "uuid": "d28e0346-030d-45e2-8df9-20fc39388b80",
                      "parentUUID": "b666a3d0-5e77-4b59-97be-8f333a573f0e",
                      "isHook": false,
                      "skipped": false
                    }
                  ],
                  "suites": [],
                  "passes": [
                    "196d3ef9-1b33-4945-80ea-f17cd3e0653f",
                    "d3daed32-889e-4683-98b0-90c7a92e6a46",
                    "c61c9e89-bbe4-4578-826a-ec6dd02e3f36",
                    "d28e0346-030d-45e2-8df9-20fc39388b80"
                  ],
                  "failures": [],
                  "pending": [],
                  "skipped": [],
                  "duration": 10,
                  "root": false,
                  "rootEmpty": false,
                  "_timeout": 40000
                },
                {
                  "uuid": "91875761-2a78-43d4-aa56-69e3680806dd",
                  "title": "state ChallengeWon",
                  "fullFile": "/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js",
                  "file": "/test/Challenge.test.js",
                  "beforeHooks": [
                    {
                      "title": "\"before each\" hook in \"state ChallengeWon\"",
                      "fullTitle": "tests Challenge contract State functions availability state ChallengeWon \"before each\" hook in \"state ChallengeWon\"",
                      "timedOut": false,
                      "duration": 4,
                      "state": null,
                      "speed": null,
                      "pass": false,
                      "fail": false,
                      "pending": false,
                      "context": null,
                      "code": "({challenge, signers, bid, token} = await loadFixture(EndingVoteFixture));\nawait challenge.endWinnerVote();",
                      "err": {},
                      "uuid": "a0248a3e-88c0-41e5-912f-65e79dbc0d69",
                      "parentUUID": "91875761-2a78-43d4-aa56-69e3680806dd",
                      "isHook": true,
                      "skipped": false
                    }
                  ],
                  "afterHooks": [],
                  "tests": [
                    {
                      "title": "should not allow joinChallenge() in ChallengeWon state",
                      "fullTitle": "tests Challenge contract State functions availability state ChallengeWon should not allow joinChallenge() in ChallengeWon state",
                      "timedOut": false,
                      "duration": 5,
                      "state": "passed",
                      "speed": "fast",
                      "pass": true,
                      "fail": false,
                      "pending": false,
                      "context": null,
                      "code": "const { v: v1, r: r1, s: s1, deadline: deadline1 } = await GetRSVsig(signers[0], token, bid, challenge);\nawait expect(\n    challenge.joinChallenge(deadline1, v1, r1, s1, [])\n).to.be.revertedWithCustomError(challenge, \"InvalidState\");",
                      "err": {},
                      "uuid": "e3086e0c-0367-4350-9514-295a43bbf190",
                      "parentUUID": "91875761-2a78-43d4-aa56-69e3680806dd",
                      "isHook": false,
                      "skipped": false
                    },
                    {
                      "title": "should not allow withdrawFromChallenge() in OngoingChallenge state",
                      "fullTitle": "tests Challenge contract State functions availability state ChallengeWon should not allow withdrawFromChallenge() in OngoingChallenge state",
                      "timedOut": false,
                      "duration": 2,
                      "state": "passed",
                      "speed": "fast",
                      "pass": true,
                      "fail": false,
                      "pending": false,
                      "context": null,
                      "code": "await expect(\n    challenge.withdrawFromChallenge()\n).to.be.revertedWithCustomError(challenge, \"InvalidState\");",
                      "err": {},
                      "uuid": "99691b42-66f0-4663-8a8b-3db07be45ecf",
                      "parentUUID": "91875761-2a78-43d4-aa56-69e3680806dd",
                      "isHook": false,
                      "skipped": false
                    },
                    {
                      "title": "should not allow startChallenge() in ChallengeWon state",
                      "fullTitle": "tests Challenge contract State functions availability state ChallengeWon should not allow startChallenge() in ChallengeWon state",
                      "timedOut": false,
                      "duration": 3,
                      "state": "passed",
                      "speed": "fast",
                      "pass": true,
                      "fail": false,
                      "pending": false,
                      "context": null,
                      "code": "await expect(\n    challenge.startChallenge()\n).to.be.revertedWithCustomError(challenge, \"InvalidState\");",
                      "err": {},
                      "uuid": "0b3dfe3b-6f32-41d0-be35-2cf46e9f1e60",
                      "parentUUID": "91875761-2a78-43d4-aa56-69e3680806dd",
                      "isHook": false,
                      "skipped": false
                    },
                    {
                      "title": "should not allow voteForWinner() in ChallengeWon state",
                      "fullTitle": "tests Challenge contract State functions availability state ChallengeWon should not allow voteForWinner() in ChallengeWon state",
                      "timedOut": false,
                      "duration": 2,
                      "state": "passed",
                      "speed": "fast",
                      "pass": true,
                      "fail": false,
                      "pending": false,
                      "context": null,
                      "code": "await expect(\n    challenge.voteForWinner(signers[1].address)\n).to.be.revertedWithCustomError(challenge, \"InvalidState\");",
                      "err": {},
                      "uuid": "6b9c8e13-56cb-4583-9adb-20183a12b3b9",
                      "parentUUID": "91875761-2a78-43d4-aa56-69e3680806dd",
                      "isHook": false,
                      "skipped": false
                    },
                    {
                      "title": "should not allow endWinnerVote() in ChallengeWon state",
                      "fullTitle": "tests Challenge contract State functions availability state ChallengeWon should not allow endWinnerVote() in ChallengeWon state",
                      "timedOut": false,
                      "duration": 2,
                      "state": "passed",
                      "speed": "fast",
                      "pass": true,
                      "fail": false,
                      "pending": false,
                      "context": null,
                      "code": "await expect(\n    challenge.endWinnerVote()\n).to.be.revertedWithCustomError(challenge, \"InvalidState\");",
                      "err": {},
                      "uuid": "17415906-44b3-4cd6-b7d2-c33d9a03ba4f",
                      "parentUUID": "91875761-2a78-43d4-aa56-69e3680806dd",
                      "isHook": false,
                      "skipped": false
                    }
                  ],
                  "suites": [],
                  "passes": [
                    "e3086e0c-0367-4350-9514-295a43bbf190",
                    "99691b42-66f0-4663-8a8b-3db07be45ecf",
                    "0b3dfe3b-6f32-41d0-be35-2cf46e9f1e60",
                    "6b9c8e13-56cb-4583-9adb-20183a12b3b9",
                    "17415906-44b3-4cd6-b7d2-c33d9a03ba4f"
                  ],
                  "failures": [],
                  "pending": [],
                  "skipped": [],
                  "duration": 14,
                  "root": false,
                  "rootEmpty": false,
                  "_timeout": 40000
                }
              ],
              "passes": [],
              "failures": [],
              "pending": [],
              "skipped": [],
              "duration": 0,
              "root": false,
              "rootEmpty": false,
              "_timeout": 40000
            },
            {
              "uuid": "fba8b3d7-bfab-49ca-ae53-b6e4d850e9ea",
              "title": "Events",
              "fullFile": "/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js",
              "file": "/test/Challenge.test.js",
              "beforeHooks": [],
              "afterHooks": [],
              "tests": [
                {
                  "title": "should emit an event when a Player Joined",
                  "fullTitle": "tests Challenge contract Events should emit an event when a Player Joined",
                  "timedOut": false,
                  "duration": 8,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "const {challenge, signers, bid, token} = await loadFixture(deployedChallengeFixtureBase)\nconst { v: v1, r: r1, s: s1, deadline: deadline1 } = await GetRSVsig(signers[0], token, bid, challenge);\nawait expect(challenge.joinChallenge(deadline1, v1, r1, s1, []))\n    .to.emit(challenge, \"PlayerJoined\")\n    .withArgs(signers[0].address);",
                  "err": {},
                  "uuid": "85cd0cf0-1fad-491d-bfb5-c02e447bed8f",
                  "parentUUID": "fba8b3d7-bfab-49ca-ae53-b6e4d850e9ea",
                  "isHook": false,
                  "skipped": false
                },
                {
                  "title": "should emit an event when a Player Withdraws from challenge",
                  "fullTitle": "tests Challenge contract Events should emit an event when a Player Withdraws from challenge",
                  "timedOut": false,
                  "duration": 9,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "const {challenge, signers, bid, token} = await loadFixture(deployedChallengeFixtureBase)\nconst { v: v1, r: r1, s: s1, deadline: deadline1 } = await GetRSVsig(signers[0], token, bid, challenge);\nawait challenge.joinChallenge(deadline1, v1, r1, s1, []);\nawait expect(challenge.withdrawFromChallenge())\n    .to.emit(challenge, \"PlayerWithdrawn\")\n    .withArgs(signers[0].address);",
                  "err": {},
                  "uuid": "35a2ea3f-5409-4165-b420-1b20886e0056",
                  "parentUUID": "fba8b3d7-bfab-49ca-ae53-b6e4d850e9ea",
                  "isHook": false,
                  "skipped": false
                },
                {
                  "title": "should emit an event when ChallengeStarted",
                  "fullTitle": "tests Challenge contract Events should emit an event when ChallengeStarted",
                  "timedOut": false,
                  "duration": 10,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "const {challenge, signers, bid, token} = await loadFixture(deployedChallengeFixtureBase)\nconst { v: v1, r: r1, s: s1, deadline: deadline1 } = await GetRSVsig(signers[0], token, bid, challenge);\nconst { v: v2, r: r2, s: s2, deadline: deadline2 } = await GetRSVsig(signers[1], token, bid, challenge);\nawait challenge.joinChallenge(deadline1, v1, r1, s1, []);\nawait challenge.connect(signers[1]).joinChallenge(deadline2, v2, r2, s2, []);\nawait expect(challenge.startChallenge())\n    .to.emit(challenge, \"ChallengeStarted\")",
                  "err": {},
                  "uuid": "9fbdb7f0-e571-45c5-a580-dda7be757757",
                  "parentUUID": "fba8b3d7-bfab-49ca-ae53-b6e4d850e9ea",
                  "isHook": false,
                  "skipped": false
                },
                {
                  "title": "should emit an event when ChallengeEnded ",
                  "fullTitle": "tests Challenge contract Events should emit an event when ChallengeEnded ",
                  "timedOut": false,
                  "duration": 54,
                  "state": "passed",
                  "speed": "medium",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "const {challenge, signers} = await loadFixture(OngoingChallengeFixture)\n//Pass enough time\nawait time.increase(duration)\nawait expect(challenge.voteForWinner(signers[1].address))\n    .to.emit(challenge, \"ChallengeEnded\")",
                  "err": {},
                  "uuid": "cdb1e115-884e-4336-af3f-209cfdc1d870",
                  "parentUUID": "fba8b3d7-bfab-49ca-ae53-b6e4d850e9ea",
                  "isHook": false,
                  "skipped": false
                },
                {
                  "title": "should emit an event when PlayerVoted",
                  "fullTitle": "tests Challenge contract Events should emit an event when PlayerVoted",
                  "timedOut": false,
                  "duration": 57,
                  "state": "passed",
                  "speed": "medium",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "const {challenge, signers} = await loadFixture(VotingForWinnerFixture)\nawait expect(challenge.voteForWinner(signers[1].address))\n    .to.emit(challenge, \"PlayerVoted\")\n    .withArgs(signers[0].address, signers[1].address)",
                  "err": {},
                  "uuid": "7d5a9d5c-664f-473f-8b49-663bcb17e28e",
                  "parentUUID": "fba8b3d7-bfab-49ca-ae53-b6e4d850e9ea",
                  "isHook": false,
                  "skipped": false
                },
                {
                  "title": "should emit an event when a prize is sent",
                  "fullTitle": "tests Challenge contract Events should emit an event when a prize is sent",
                  "timedOut": false,
                  "duration": 80,
                  "state": "passed",
                  "speed": "slow",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "const {challenge, signers, bid} = await loadFixture(EndingVoteFixture)\nawait challenge.endWinnerVote()\nconst expectedPrize = bid*5n - 5n*bid*BigInt(gold)/100n;\nawait expect(\n    await challenge.connect(signers[1]).withdrawPrize()\n).to.emit(challenge, \"PrizeWithdrawn\")\n    .withArgs(signers[1].address, expectedPrize)",
                  "err": {},
                  "uuid": "ad00c12b-61fe-4449-aaf0-7185ee3b97a8",
                  "parentUUID": "fba8b3d7-bfab-49ca-ae53-b6e4d850e9ea",
                  "isHook": false,
                  "skipped": false
                }
              ],
              "suites": [],
              "passes": [
                "85cd0cf0-1fad-491d-bfb5-c02e447bed8f",
                "35a2ea3f-5409-4165-b420-1b20886e0056",
                "9fbdb7f0-e571-45c5-a580-dda7be757757",
                "cdb1e115-884e-4336-af3f-209cfdc1d870",
                "7d5a9d5c-664f-473f-8b49-663bcb17e28e",
                "ad00c12b-61fe-4449-aaf0-7185ee3b97a8"
              ],
              "failures": [],
              "pending": [],
              "skipped": [],
              "duration": 218,
              "root": false,
              "rootEmpty": false,
              "_timeout": 40000
            }
          ],
          "passes": [],
          "failures": [],
          "pending": [],
          "skipped": [],
          "duration": 0,
          "root": false,
          "rootEmpty": false,
          "_timeout": 40000
        },
        {
          "uuid": "a3539e7c-52d0-41b9-955c-6b92ccf409d9",
          "title": "tests ChallengeFactory contract",
          "fullFile": "/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeFactory.test.js",
          "file": "/test/ChallengeFactory.test.js",
          "beforeHooks": [],
          "afterHooks": [],
          "tests": [],
          "suites": [
            {
              "uuid": "ac876273-be69-40c5-b1d3-45ad57569b36",
              "title": "First tests",
              "fullFile": "/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeFactory.test.js",
              "file": "/test/ChallengeFactory.test.js",
              "beforeHooks": [
                {
                  "title": "\"before each\" hook in \"First tests\"",
                  "fullTitle": "tests ChallengeFactory contract First tests \"before each\" hook in \"First tests\"",
                  "timedOut": false,
                  "duration": 3,
                  "state": null,
                  "speed": null,
                  "pass": false,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "({challengeFactory, signers, token } = await loadFixture(deployedChallengeFactoryFixtureBase));\nawait challengeFactory.createChallenge(duration, maxPlayers, bid, description, 0, ethers.ZeroHash, \"ipfsCid\");",
                  "err": {},
                  "uuid": "c0266ae3-88ec-4126-964d-3d528b31c36b",
                  "parentUUID": "ac876273-be69-40c5-b1d3-45ad57569b36",
                  "isHook": true,
                  "skipped": false
                }
              ],
              "afterHooks": [],
              "tests": [
                {
                  "title": "should just deploy the challenge factory, and create a challenge",
                  "fullTitle": "tests ChallengeFactory contract First tests should just deploy the challenge factory, and create a challenge",
                  "timedOut": false,
                  "duration": 0,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "",
                  "err": {},
                  "uuid": "ef71b819-dde2-4ee6-bc13-19147155acc6",
                  "parentUUID": "ac876273-be69-40c5-b1d3-45ad57569b36",
                  "isHook": false,
                  "skipped": false
                },
                {
                  "title": "should emit an event on new challenge deployment",
                  "fullTitle": "tests ChallengeFactory contract First tests should emit an event on new challenge deployment",
                  "timedOut": false,
                  "duration": 4,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "const filter = challengeFactory.filters.ChallengeCreated(signers[0].address);\n            const events = await challengeFactory.queryFilter(filter, -1)\n            const event = events[0]\n            expect(event.fragment.name).to.equal('ChallengeCreated')\n            const args = event.args\n            expect(args.admin).to.equal(signers[0].address)",
                  "err": {},
                  "uuid": "2b6bfa53-880e-447b-b8b6-be34b00f36e6",
                  "parentUUID": "ac876273-be69-40c5-b1d3-45ad57569b36",
                  "isHook": false,
                  "skipped": false
                },
                {
                  "title": "should allow to deploy a new challenge contract",
                  "fullTitle": "tests ChallengeFactory contract First tests should allow to deploy a new challenge contract",
                  "timedOut": false,
                  "duration": 7,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "// 2. Extract the address from the event\n            const filter = challengeFactory.filters.ChallengeCreated;\n            const events = await challengeFactory.queryFilter(filter, -1)\n            const event = events[0]\n            const newContractAddress = event.args.challengeAddress;\n            // 3. Attach to the deployed challenge\n            const Challenge = await ethers.getContractFactory(\"Challenge\");\n            const challenge = Challenge.attach(newContractAddress);\n            // Verify initialisation\n            const _duration = await challenge.duration();\n            const _maxPlayers = await challenge.maxPlayers();\n            const _bid = await challenge.bid();\n            const _description = await challenge.description();\n            expect(_duration).to.equal(1000n);\n            expect(_maxPlayers).to.equal(5n);\n            expect(_bid).to.equal(bid);\n            expect(_description).to.equal(\"test\")",
                  "err": {},
                  "uuid": "694ea9e1-193b-4b0f-835c-553fbdb28301",
                  "parentUUID": "ac876273-be69-40c5-b1d3-45ad57569b36",
                  "isHook": false,
                  "skipped": false
                },
                {
                  "title": "should set the caller of the function createChallenge as owner of the challenge",
                  "fullTitle": "tests ChallengeFactory contract First tests should set the caller of the function createChallenge as owner of the challenge",
                  "timedOut": false,
                  "duration": 6,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "// 2. Extract the address from the event\n            const filter = challengeFactory.filters.ChallengeCreated;\n            const events = await challengeFactory.queryFilter(filter, -1)\n            const event = events[0]\n            const newContractAddress = event.args.challengeAddress;\n            // 3. Attach to the deployed challenge\n            const Challenge = await ethers.getContractFactory(\"Challenge\");\n            const challenge = Challenge.attach(newContractAddress);\n            const owner = await challenge.owner()\n            expect(owner).to.equal(signers[0].address)",
                  "err": {},
                  "uuid": "37c82df8-d28a-4d1b-8e60-dbcc7431156d",
                  "parentUUID": "ac876273-be69-40c5-b1d3-45ad57569b36",
                  "isHook": false,
                  "skipped": false
                }
              ],
              "suites": [],
              "passes": [
                "ef71b819-dde2-4ee6-bc13-19147155acc6",
                "2b6bfa53-880e-447b-b8b6-be34b00f36e6",
                "694ea9e1-193b-4b0f-835c-553fbdb28301",
                "37c82df8-d28a-4d1b-8e60-dbcc7431156d"
              ],
              "failures": [],
              "pending": [],
              "skipped": [],
              "duration": 17,
              "root": false,
              "rootEmpty": false,
              "_timeout": 40000
            },
            {
              "uuid": "3471d3cf-6e49-4b83-95d0-c0361fb4fe4f",
              "title": "Parameter Validation Tests",
              "fullFile": "/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeFactory.test.js",
              "file": "/test/ChallengeFactory.test.js",
              "beforeHooks": [
                {
                  "title": "\"before each\" hook in \"Parameter Validation Tests\"",
                  "fullTitle": "tests ChallengeFactory contract Parameter Validation Tests \"before each\" hook in \"Parameter Validation Tests\"",
                  "timedOut": false,
                  "duration": 1,
                  "state": null,
                  "speed": null,
                  "pass": false,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "({challengeFactory, signers, token } = await loadFixture(deployedChallengeFactoryFixtureBase));",
                  "err": {},
                  "uuid": "6a38c5b2-8b6e-4361-a452-a4d1ca3ffac7",
                  "parentUUID": "3471d3cf-6e49-4b83-95d0-c0361fb4fe4f",
                  "isHook": true,
                  "skipped": false
                }
              ],
              "afterHooks": [],
              "tests": [
                {
                  "title": "should revert with ZeroAddressToken when token address is zero",
                  "fullTitle": "tests ChallengeFactory contract Parameter Validation Tests should revert with ZeroAddressToken when token address is zero",
                  "timedOut": false,
                  "duration": 5,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "const ChallengeFactory = await ethers.getContractFactory('ChallengeFactory');\nawait expect(\n    ChallengeFactory.deploy(\"0x0000000000000000000000000000000000000000\", signers[0].address)\n).to.be.revertedWithCustomError(ChallengeFactory, \"ZeroAddressToken\");",
                  "err": {},
                  "uuid": "78adf913-f165-4950-9a84-b75a95db4d68",
                  "parentUUID": "3471d3cf-6e49-4b83-95d0-c0361fb4fe4f",
                  "isHook": false,
                  "skipped": false
                },
                {
                  "title": "should revert with ZeroAddressFeeReceiver when feeReceiver address is zero",
                  "fullTitle": "tests ChallengeFactory contract Parameter Validation Tests should revert with ZeroAddressFeeReceiver when feeReceiver address is zero",
                  "timedOut": false,
                  "duration": 7,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "const ChallengeFactory = await ethers.getContractFactory('ChallengeFactory');\nawait expect(\n    ChallengeFactory.deploy(token.target, \"0x0000000000000000000000000000000000000000\")\n).to.be.revertedWithCustomError( ChallengeFactory, \"ZeroAddressFeeReceiver\")",
                  "err": {},
                  "uuid": "031032ad-e65e-4491-a091-2862d50eb9fc",
                  "parentUUID": "3471d3cf-6e49-4b83-95d0-c0361fb4fe4f",
                  "isHook": false,
                  "skipped": false
                },
                {
                  "title": "should revert with InvalidDuration when duration is 0",
                  "fullTitle": "tests ChallengeFactory contract Parameter Validation Tests should revert with InvalidDuration when duration is 0",
                  "timedOut": false,
                  "duration": 3,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "await expect(\n    challengeFactory.createChallenge(\n        0n, // Invalid duration\n        maxPlayers,\n        bid,\n        description,\n        false,\n        ethers.ZeroHash,\n        \"ipfsCid\"\n    )\n).to.be.revertedWithCustomError(challengeFactory, \"InvalidDuration\");",
                  "err": {},
                  "uuid": "98cc8570-4166-4f70-bee6-192914911364",
                  "parentUUID": "3471d3cf-6e49-4b83-95d0-c0361fb4fe4f",
                  "isHook": false,
                  "skipped": false
                },
                {
                  "title": "should revert with InsufficientPlayers when maxPlayers is less than 2",
                  "fullTitle": "tests ChallengeFactory contract Parameter Validation Tests should revert with InsufficientPlayers when maxPlayers is less than 2",
                  "timedOut": false,
                  "duration": 2,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "await expect(\n    challengeFactory.createChallenge(\n        duration,\n        1n, // Invalid: less than 2\n        bid,\n        description,\n        false,\n        ethers.ZeroHash,\n        \"ipfsCid\"\n    )\n).to.be.revertedWithCustomError(challengeFactory, \"InsufficientPlayers\");",
                  "err": {},
                  "uuid": "094f735c-365a-485a-95e6-4de26189b7fe",
                  "parentUUID": "3471d3cf-6e49-4b83-95d0-c0361fb4fe4f",
                  "isHook": false,
                  "skipped": false
                },
                {
                  "title": "should revert with InsufficientPlayers when maxPlayers is 0",
                  "fullTitle": "tests ChallengeFactory contract Parameter Validation Tests should revert with InsufficientPlayers when maxPlayers is 0",
                  "timedOut": false,
                  "duration": 2,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "await expect(\n    challengeFactory.createChallenge(\n        duration,\n        0n, // Invalid: 0 players\n        bid,\n        description,\n        false,\n        ethers.ZeroHash,\n        \"ipfsCid\"\n    )\n).to.be.revertedWithCustomError(challengeFactory, \"InsufficientPlayers\");",
                  "err": {},
                  "uuid": "81a9314b-d47a-4893-9dab-7090c2fcc4bf",
                  "parentUUID": "3471d3cf-6e49-4b83-95d0-c0361fb4fe4f",
                  "isHook": false,
                  "skipped": false
                },
                {
                  "title": "should revert with InsufficientBid when bid is 0",
                  "fullTitle": "tests ChallengeFactory contract Parameter Validation Tests should revert with InsufficientBid when bid is 0",
                  "timedOut": false,
                  "duration": 2,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "await expect(\n    challengeFactory.createChallenge(\n        duration,\n        maxPlayers,\n        0n, // Invalid bid\n        description,\n        false,\n        ethers.ZeroHash,\n        \"ipfsCid\"\n    )\n).to.be.revertedWithCustomError(challengeFactory, \"InsufficientBid\");",
                  "err": {},
                  "uuid": "045e7572-d347-421d-8617-e6c80d9bf9ad",
                  "parentUUID": "3471d3cf-6e49-4b83-95d0-c0361fb4fe4f",
                  "isHook": false,
                  "skipped": false
                }
              ],
              "suites": [],
              "passes": [
                "78adf913-f165-4950-9a84-b75a95db4d68",
                "031032ad-e65e-4491-a091-2862d50eb9fc",
                "98cc8570-4166-4f70-bee6-192914911364",
                "094f735c-365a-485a-95e6-4de26189b7fe",
                "81a9314b-d47a-4893-9dab-7090c2fcc4bf",
                "045e7572-d347-421d-8617-e6c80d9bf9ad"
              ],
              "failures": [],
              "pending": [],
              "skipped": [],
              "duration": 21,
              "root": false,
              "rootEmpty": false,
              "_timeout": 40000
            },
            {
              "uuid": "d6b24afc-8275-439a-a6e1-7fcdfab00004",
              "title": "Group Mode Tests",
              "fullFile": "/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeFactory.test.js",
              "file": "/test/ChallengeFactory.test.js",
              "beforeHooks": [
                {
                  "title": "\"before each\" hook in \"Group Mode Tests\"",
                  "fullTitle": "tests ChallengeFactory contract Group Mode Tests \"before each\" hook in \"Group Mode Tests\"",
                  "timedOut": false,
                  "duration": 1,
                  "state": null,
                  "speed": null,
                  "pass": false,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "({challengeFactory, signers, token } = await loadFixture(deployedChallengeFactoryFixtureBase));",
                  "err": {},
                  "uuid": "dad600aa-c62d-40ba-ac6e-f1d9f686a038",
                  "parentUUID": "d6b24afc-8275-439a-a6e1-7fcdfab00004",
                  "isHook": true,
                  "skipped": false
                }
              ],
              "afterHooks": [],
              "tests": [
                {
                  "title": "should create challenge with groupMode false and zero merkle root",
                  "fullTitle": "tests ChallengeFactory contract Group Mode Tests should create challenge with groupMode false and zero merkle root",
                  "timedOut": false,
                  "duration": 5,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "await expect(\n    challengeFactory.createChallenge(\n        duration,\n        maxPlayers,\n        bid,\n        description,\n        false, // groupMode = false\n        ethers.ZeroHash,\n        \"ipfsCid\"\n    )\n).to.emit(challengeFactory, 'ChallengeCreated');",
                  "err": {},
                  "uuid": "c06d715a-8f40-42c4-a792-2fd9915f2c06",
                  "parentUUID": "d6b24afc-8275-439a-a6e1-7fcdfab00004",
                  "isHook": false,
                  "skipped": false
                }
              ],
              "suites": [],
              "passes": [
                "c06d715a-8f40-42c4-a792-2fd9915f2c06"
              ],
              "failures": [],
              "pending": [],
              "skipped": [],
              "duration": 5,
              "root": false,
              "rootEmpty": false,
              "_timeout": 40000
            }
          ],
          "passes": [],
          "failures": [],
          "pending": [],
          "skipped": [],
          "duration": 0,
          "root": false,
          "rootEmpty": false,
          "_timeout": 40000
        }
      ],
      "passes": [],
      "failures": [],
      "pending": [],
      "skipped": [],
      "duration": 0,
      "root": true,
      "rootEmpty": true,
      "_timeout": 40000
    }
  ],
  "meta": {
    "mocha": {
      "version": "10.8.2"
    },
    "mochawesome": {
      "options": {
        "quiet": true,
        "reportFilename": "report",
        "saveHtml": true,
        "saveJson": true,
        "consoleReporter": "spec",
        "useInlineDiffs": false,
        "code": true
      },
      "version": "7.1.3"
    },
    "marge": {
      "options": {
        "reportDir": "test-report",
        "reportFilename": "report",
        "quiet": true
      },
      "version": "6.2.0"
    }
  }
}