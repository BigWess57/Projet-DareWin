{
  "stats": {
    "suites": 3,
    "tests": 11,
    "passes": 11,
    "pending": 0,
    "failures": 0,
    "start": "2025-09-18T17:56:20.384Z",
    "end": "2025-09-18T17:56:21.035Z",
    "duration": 651,
    "testsRegistered": 11,
    "passPercent": 100,
    "pendingPercent": 0,
    "other": 0,
    "hasOther": false,
    "skipped": 0,
    "hasSkipped": false
  },
  "results": [
    {
      "uuid": "78303834-c48b-4c46-96f8-fbfb41b06c85",
      "title": "",
      "fullFile": "/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeFactoryNEW.test.js",
      "file": "/test/ChallengeFactoryNEW.test.js",
      "beforeHooks": [],
      "afterHooks": [],
      "tests": [],
      "suites": [
        {
          "uuid": "13b54d20-81b2-438a-a678-efd8e60e081a",
          "title": "tests ChallengeFactory contract",
          "fullFile": "/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeFactoryNEW.test.js",
          "file": "/test/ChallengeFactoryNEW.test.js",
          "beforeHooks": [],
          "afterHooks": [],
          "tests": [],
          "suites": [
            {
              "uuid": "6d1d2f69-f064-4080-a95f-31de615a19a5",
              "title": "First tests",
              "fullFile": "/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeFactoryNEW.test.js",
              "file": "/test/ChallengeFactoryNEW.test.js",
              "beforeHooks": [
                {
                  "title": "\"before each\" hook in \"First tests\"",
                  "fullTitle": "tests ChallengeFactory contract First tests \"before each\" hook in \"First tests\"",
                  "timedOut": false,
                  "duration": 3,
                  "state": null,
                  "speed": null,
                  "pass": false,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "({challengeFactory, signers, token } = await loadFixture(deployedChallengeFactoryFixtureBase));\nawait challengeFactory.createChallenge(duration, maxPlayers, bid, description, 0, ethers.ZeroHash);",
                  "err": {},
                  "uuid": "d4b552c6-4446-465d-9a36-f1bdabba2f5a",
                  "parentUUID": "6d1d2f69-f064-4080-a95f-31de615a19a5",
                  "isHook": true,
                  "skipped": false
                }
              ],
              "afterHooks": [],
              "tests": [
                {
                  "title": "should just deploy the challenge factory, and create a challenge",
                  "fullTitle": "tests ChallengeFactory contract First tests should just deploy the challenge factory, and create a challenge",
                  "timedOut": false,
                  "duration": 0,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "",
                  "err": {},
                  "uuid": "499ef01f-9a0d-4d7c-b253-851829bdd513",
                  "parentUUID": "6d1d2f69-f064-4080-a95f-31de615a19a5",
                  "isHook": false,
                  "skipped": false
                },
                {
                  "title": "should should not be possible to deploy with a feeReceiver address to 0",
                  "fullTitle": "tests ChallengeFactory contract First tests should should not be possible to deploy with a feeReceiver address to 0",
                  "timedOut": false,
                  "duration": 12,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "const ChallengeFactory = await ethers.getContractFactory('ChallengeFactory');\nawait expect(\n    ChallengeFactory.deploy(token.target, \"0x0000000000000000000000000000000000000000\")\n).to.be.revertedWith(\"the feeReceiver cannot be address 0!\")",
                  "err": {},
                  "uuid": "6891c4da-5ea1-4132-8688-3823f7e7c351",
                  "parentUUID": "6d1d2f69-f064-4080-a95f-31de615a19a5",
                  "isHook": false,
                  "skipped": false
                },
                {
                  "title": "should emit an event on new challenge deployment",
                  "fullTitle": "tests ChallengeFactory contract First tests should emit an event on new challenge deployment",
                  "timedOut": false,
                  "duration": 7,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "const filter = challengeFactory.filters.ChallengeCreated(signers[0].address);\n            const events = await challengeFactory.queryFilter(filter, -1)\n            const event = events[0]\n            expect(event.fragment.name).to.equal('ChallengeCreated')\n            const args = event.args\n            expect(args.admin).to.equal(signers[0].address)",
                  "err": {},
                  "uuid": "a0dcd558-e5e6-4bf6-b45d-982c826c1518",
                  "parentUUID": "6d1d2f69-f064-4080-a95f-31de615a19a5",
                  "isHook": false,
                  "skipped": false
                },
                {
                  "title": "should allow to deploy a new challenge contract",
                  "fullTitle": "tests ChallengeFactory contract First tests should allow to deploy a new challenge contract",
                  "timedOut": false,
                  "duration": 9,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "// 2. Extract the address from the event\n            const filter = challengeFactory.filters.ChallengeCreated;\n            const events = await challengeFactory.queryFilter(filter, -1)\n            const event = events[0]\n            const newContractAddress = event.args.challengeAddress;\n            // 3. Attach to the deployed challenge\n            const Challenge = await ethers.getContractFactory(\"Challenge\");\n            const challenge = Challenge.attach(newContractAddress);\n            // Verify initialisation\n            const _duration = await challenge.duration();\n            const _maxPlayers = await challenge.maxPlayers();\n            const _bid = await challenge.bid();\n            const _description = await challenge.description();\n            expect(_duration).to.equal(1000n);\n            expect(_maxPlayers).to.equal(5n);\n            expect(_bid).to.equal(bid);\n            expect(_description).to.equal(\"test\")",
                  "err": {},
                  "uuid": "41c84255-a885-4c3c-a03f-6e3b3a777dc8",
                  "parentUUID": "6d1d2f69-f064-4080-a95f-31de615a19a5",
                  "isHook": false,
                  "skipped": false
                },
                {
                  "title": "should allow to deploy a new challenge contract in GROUP mode",
                  "fullTitle": "tests ChallengeFactory contract First tests should allow to deploy a new challenge contract in GROUP mode",
                  "timedOut": false,
                  "duration": 17,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "const playersAllowed = [\n                [signers[0].address],\n                [signers[1].address],\n                [signers[2].address],\n                [signers[3].address],\n                [signers[4].address]\n            ]\n            const merkleTree = StandardMerkleTree.of(playersAllowed, [\"address\"]);\n            await challengeFactory.createChallenge(1111n, maxPlayers, bid+10n, description, true, merkleTree.root);\n            // 2. Extract the address from the event\n            const filter = challengeFactory.filters.ChallengeCreated;\n            const events = await challengeFactory.queryFilter(filter, -1)\n            const event = events[1]\n            const newContractAddress = event.args.challengeAddress;\n            // 3. Attach to the deployed challenge\n            const Challenge = await ethers.getContractFactory(\"Challenge\");\n            const challenge = Challenge.attach(newContractAddress);\n            // Verify initialisation\n            const _duration = await challenge.duration();\n            const _maxPlayers = await challenge.maxPlayers();\n            const _bid = await challenge.bid();\n            const _description = await challenge.description();\n            expect(_duration).to.equal(1111n);\n            expect(_maxPlayers).to.equal(5n);\n            expect(_bid).to.equal(bid+10n);\n            expect(_description).to.equal(\"test\")",
                  "err": {},
                  "uuid": "99b211df-4c0c-4a62-b5eb-6e8111405f1d",
                  "parentUUID": "6d1d2f69-f064-4080-a95f-31de615a19a5",
                  "isHook": false,
                  "skipped": false
                },
                {
                  "title": "should set the caller of the function createChallenge as owner of the challenge",
                  "fullTitle": "tests ChallengeFactory contract First tests should set the caller of the function createChallenge as owner of the challenge",
                  "timedOut": false,
                  "duration": 5,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "// 2. Extract the address from the event\n            const filter = challengeFactory.filters.ChallengeCreated;\n            const events = await challengeFactory.queryFilter(filter, -1)\n            const event = events[0]\n            const newContractAddress = event.args.challengeAddress;\n            // 3. Attach to the deployed challenge\n            const Challenge = await ethers.getContractFactory(\"Challenge\");\n            const challenge = Challenge.attach(newContractAddress);\n            const owner = await challenge.owner()\n            expect(owner).to.equal(signers[0].address)",
                  "err": {},
                  "uuid": "827ea1f3-4f7a-4396-99ca-d704e20b2c3f",
                  "parentUUID": "6d1d2f69-f064-4080-a95f-31de615a19a5",
                  "isHook": false,
                  "skipped": false
                }
              ],
              "suites": [],
              "passes": [
                "499ef01f-9a0d-4d7c-b253-851829bdd513",
                "6891c4da-5ea1-4132-8688-3823f7e7c351",
                "a0dcd558-e5e6-4bf6-b45d-982c826c1518",
                "41c84255-a885-4c3c-a03f-6e3b3a777dc8",
                "99b211df-4c0c-4a62-b5eb-6e8111405f1d",
                "827ea1f3-4f7a-4396-99ca-d704e20b2c3f"
              ],
              "failures": [],
              "pending": [],
              "skipped": [],
              "duration": 50,
              "root": false,
              "rootEmpty": false,
              "_timeout": 40000
            },
            {
              "uuid": "f84a3bb8-7af2-42ee-804f-d68c12a953c7",
              "title": "ChallengeFactoryNew pagination",
              "fullFile": "/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeFactoryNEW.test.js",
              "file": "/test/ChallengeFactoryNEW.test.js",
              "beforeHooks": [
                {
                  "title": "\"before each\" hook in \"ChallengeFactoryNew pagination\"",
                  "fullTitle": "tests ChallengeFactory contract ChallengeFactoryNew pagination \"before each\" hook in \"ChallengeFactoryNew pagination\"",
                  "timedOut": false,
                  "duration": 20,
                  "state": null,
                  "speed": null,
                  "pass": false,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "({challengeFactory, signers, token } = await loadFixture(deployedChallengeFactoryFixtureBase));\n            // Create a bunch of challenges\n            this.numChallenges = 7;\n            this.created = [];\n            const startBlockNumber = (await ethers.provider.getBlock(\"latest\")).number + 1;\n            for (let i = 0; i < this.numChallenges; i++) {\n                const tx = await challengeFactory.createChallenge(\n                    duration,                // duration\n                    maxPlayers,                   // maxPlayers\n                    bid + BigInt(i),  // bid (just vary slightly)\n                    `desc ${i}`,         // description\n                    false,               // groupMode\n                    ethers.ZeroHash  // merkleRoot placeholder\n                );\n                const receipt = await tx.wait();\n            }\n            //then, create table once after all creations\n            const filter = challengeFactory.filters.ChallengeCreated();\n            const fromBlock = startBlockNumber; // capture before first create\n            const events = await challengeFactory.queryFilter(filter, fromBlock, \"latest\");\n            \n            for(let i = 0; i < this.numChallenges; i++) {\n                const challengeAddress = events[i].args.challengeAddress; // or evt.args[1]\n                this.created.push(challengeAddress);\n            }",
                  "err": {},
                  "uuid": "be3bd027-c4ff-48a1-8ac2-3ad66d8f3b85",
                  "parentUUID": "f84a3bb8-7af2-42ee-804f-d68c12a953c7",
                  "isHook": true,
                  "skipped": false
                }
              ],
              "afterHooks": [],
              "tests": [
                {
                  "title": "should return the first batch when count < total",
                  "fullTitle": "tests ChallengeFactory contract ChallengeFactoryNew pagination should return the first batch when count < total",
                  "timedOut": false,
                  "duration": 3,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "const start = 0;\nconst count = 3;\nconst list = await challengeFactory.getChallenges(start, count);\nexpect(list.length).to.equal(count);\n// first `count` addresses should match\nfor (let i = 0; i < count; i++) {\n    expect(list[i]).to.equal(this.created[i]);\n}",
                  "err": {},
                  "uuid": "cee5223d-a432-452e-abec-9e44bee58770",
                  "parentUUID": "f84a3bb8-7af2-42ee-804f-d68c12a953c7",
                  "isHook": false,
                  "skipped": false
                },
                {
                  "title": "should return entire list when count >= total-start",
                  "fullTitle": "tests ChallengeFactory contract ChallengeFactoryNew pagination should return entire list when count >= total-start",
                  "timedOut": false,
                  "duration": 5,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "const start = 2;\nconst count = 10;  // more than remaining\nconst list = await challengeFactory.getChallenges(start, count);\nexpect(list.length).to.equal(this.numChallenges - start);\nfor (let i = start; i < this.numChallenges; i++) {\nexpect(list[i - start]).to.equal(this.created[i]);\n}",
                  "err": {},
                  "uuid": "2823c69f-88a9-4dde-9d19-6ff35e9fdfde",
                  "parentUUID": "f84a3bb8-7af2-42ee-804f-d68c12a953c7",
                  "isHook": false,
                  "skipped": false
                },
                {
                  "title": "should return empty array when start >= total",
                  "fullTitle": "tests ChallengeFactory contract ChallengeFactoryNew pagination should return empty array when start >= total",
                  "timedOut": false,
                  "duration": 1,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "const start = this.numChallenges;  // equals length\nconst count = 5;\nconst list = await challengeFactory.getChallenges(start, count);\nexpect(list.length).to.equal(0);",
                  "err": {},
                  "uuid": "96e7d242-5cbd-48c7-bfdc-f0cda48e3ad2",
                  "parentUUID": "f84a3bb8-7af2-42ee-804f-d68c12a953c7",
                  "isHook": false,
                  "skipped": false
                },
                {
                  "title": "should return empty if count is zero",
                  "fullTitle": "tests ChallengeFactory contract ChallengeFactoryNew pagination should return empty if count is zero",
                  "timedOut": false,
                  "duration": 1,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "const start = 1;\nconst count = 0;\nconst list = await challengeFactory.getChallenges(start, count);\nexpect(list.length).to.equal(0);",
                  "err": {},
                  "uuid": "9058cfab-b7cb-4f97-9059-c820fa9b38d2",
                  "parentUUID": "f84a3bb8-7af2-42ee-804f-d68c12a953c7",
                  "isHook": false,
                  "skipped": false
                },
                {
                  "title": "should return last element when start = total - 1 and count >=1",
                  "fullTitle": "tests ChallengeFactory contract ChallengeFactoryNew pagination should return last element when start = total - 1 and count >=1",
                  "timedOut": false,
                  "duration": 2,
                  "state": "passed",
                  "speed": "fast",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "const start = this.numChallenges - 1;\nconst count = 5;\nconst list = await challengeFactory.getChallenges(start, count);\nexpect(list.length).to.equal(1);\nexpect(list[0]).to.equal(this.created[this.numChallenges - 1]);",
                  "err": {},
                  "uuid": "cfc6ddf2-0a69-4a25-8116-f689d7dc9bf2",
                  "parentUUID": "f84a3bb8-7af2-42ee-804f-d68c12a953c7",
                  "isHook": false,
                  "skipped": false
                }
              ],
              "suites": [],
              "passes": [
                "cee5223d-a432-452e-abec-9e44bee58770",
                "2823c69f-88a9-4dde-9d19-6ff35e9fdfde",
                "96e7d242-5cbd-48c7-bfdc-f0cda48e3ad2",
                "9058cfab-b7cb-4f97-9059-c820fa9b38d2",
                "cfc6ddf2-0a69-4a25-8116-f689d7dc9bf2"
              ],
              "failures": [],
              "pending": [],
              "skipped": [],
              "duration": 12,
              "root": false,
              "rootEmpty": false,
              "_timeout": 40000
            }
          ],
          "passes": [],
          "failures": [],
          "pending": [],
          "skipped": [],
          "duration": 0,
          "root": false,
          "rootEmpty": false,
          "_timeout": 40000
        }
      ],
      "passes": [],
      "failures": [],
      "pending": [],
      "skipped": [],
      "duration": 0,
      "root": true,
      "rootEmpty": true,
      "_timeout": 40000
    }
  ],
  "meta": {
    "mocha": {
      "version": "10.8.2"
    },
    "mochawesome": {
      "options": {
        "quiet": true,
        "reportFilename": "report",
        "saveHtml": true,
        "saveJson": true,
        "consoleReporter": "spec",
        "useInlineDiffs": false,
        "code": true
      },
      "version": "7.1.3"
    },
    "marge": {
      "options": {
        "reportDir": "test-report",
        "reportFilename": "report",
        "quiet": true
      },
      "version": "6.2.0"
    }
  }
}