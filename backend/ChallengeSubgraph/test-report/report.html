<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:32,&quot;tests&quot;:69,&quot;passes&quot;:58,&quot;pending&quot;:0,&quot;failures&quot;:11,&quot;start&quot;:&quot;2025-10-01T14:35:35.351Z&quot;,&quot;end&quot;:&quot;2025-10-01T14:35:37.112Z&quot;,&quot;duration&quot;:1761,&quot;testsRegistered&quot;:124,&quot;passPercent&quot;:46.774193548387096,&quot;pendingPercent&quot;:0,&quot;other&quot;:11,&quot;hasOther&quot;:true,&quot;skipped&quot;:55,&quot;hasSkipped&quot;:true},&quot;results&quot;:[{&quot;uuid&quot;:&quot;f817dd95-8c39-4711-81c0-38d45efd4a2f&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f92c3aa1-75a8-466b-b742-b63cadc25458&quot;,&quot;title&quot;:&quot;tests Challenge contract&quot;,&quot;fullFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js&quot;,&quot;file&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;5ecc7cf9-bdc2-40fc-9cba-8496b8e69402&quot;,&quot;title&quot;:&quot;deployment&quot;,&quot;fullFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js&quot;,&quot;file&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;deployment\&quot;&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract deployment \&quot;before each\&quot; hook in \&quot;deployment\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;signers = await ethers.getSigners();\n//Token deployment\nconst DareWinToken = await ethers.getContractFactory(&#x27;DareWin&#x27;);\ntoken = await DareWinToken.deploy(signers[0].address);\nbid = ethers.parseUnits(\&quot;1000\&quot;, await token.decimals());&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;053bed85-f830-4a87-a4f8-c532036e38aa&quot;,&quot;parentUUID&quot;:&quot;5ecc7cf9-bdc2-40fc-9cba-8496b8e69402&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should juste deploy the contract&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract deployment should juste deploy the contract&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//Challenge Deployment\nconst Challenge = await ethers.getContractFactory(&#x27;Challenge&#x27;); \nawait expect(\n    Challenge.deploy(signers[0].address, token.target, duration, maxPlayers, bid, description, signers[0].address, false, [])\n).to.not.be.reverted&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d40213cd-5b59-4de2-aee0-4852644e399d&quot;,&quot;parentUUID&quot;:&quot;5ecc7cf9-bdc2-40fc-9cba-8496b8e69402&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not be possible to deploy with a feeReceiver address to 0&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract deployment should not be possible to deploy with a feeReceiver address to 0&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//Challenge Deployment\nconst Challenge = await ethers.getContractFactory(&#x27;Challenge&#x27;); \nawait expect(\n    Challenge.deploy(signers[0].address, token.target, duration, maxPlayers, bid, description, \&quot;0x0000000000000000000000000000000000000000\&quot;, false, [])\n).to.be.revertedWith(\&quot;the feeReceiver cannot be address 0!\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;403ac570-8ee6-4ee1-b217-184967529cae&quot;,&quot;parentUUID&quot;:&quot;5ecc7cf9-bdc2-40fc-9cba-8496b8e69402&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;GROUP MODE : should not be possible to deploy if one player in the array is address 0&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract deployment GROUP MODE : should not be possible to deploy if one player in the array is address 0&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//Challenge Deployment\nconst Challenge = await ethers.getContractFactory(&#x27;Challenge&#x27;); \nconst playersArray = [signers[0].address, signers[1].address, \&quot;0x0000000000000000000000000000000000000000\&quot;]\nawait expect(\n    Challenge.deploy(signers[0].address, token.target, duration, maxPlayers, bid, description, signers[0].address, true, playersArray)\n).to.be.revertedWith(\&quot;address 0 cannot be a player!\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;014bc9c7-1dc3-4f95-9217-b01db3a76922&quot;,&quot;parentUUID&quot;:&quot;5ecc7cf9-bdc2-40fc-9cba-8496b8e69402&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d40213cd-5b59-4de2-aee0-4852644e399d&quot;,&quot;403ac570-8ee6-4ee1-b217-184967529cae&quot;,&quot;014bc9c7-1dc3-4f95-9217-b01db3a76922&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:33,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;81d2e9ce-9f62-48d9-9df4-2c0bbdef6068&quot;,&quot;title&quot;:&quot;gathering players state&quot;,&quot;fullFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js&quot;,&quot;file&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;gathering players state\&quot;&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract gathering players state \&quot;before each\&quot; hook in \&quot;gathering players state\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;({challenge, signers, bid, token} = await loadFixture(deployedChallengeFixtureBase));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0843f42d-5c4e-4359-97ac-ac12da2a6e69&quot;,&quot;parentUUID&quot;:&quot;81d2e9ce-9f62-48d9-9df4-2c0bbdef6068&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should store a player in the players array (sending enough money)&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract gathering players state should store a player in the players array (sending enough money)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(challenge.joinChallenge())\n           .to.not.be.reverted;\n           await expect(challenge.connect(signers[1]).joinChallenge())\n           .to.not.be.reverted;\n           const player1 = await challenge.players(0);\n           expect(player1[0]).to.equal(signers[0].address);\n           const player2 = await challenge.players(1);\n           expect(player2[0]).to.equal(signers[1].address);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f15609cb-40b3-4931-b264-1af6d1e0ed85&quot;,&quot;parentUUID&quot;:&quot;81d2e9ce-9f62-48d9-9df4-2c0bbdef6068&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;FOR LINK MODE : should not allow any more participants to join if the max is already reached&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract gathering players state FOR LINK MODE : should not allow any more participants to join if the max is already reached&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await challenge.joinChallenge();\nawait challenge.connect(signers[1]).joinChallenge();\nawait challenge.connect(signers[2]).joinChallenge();\nawait challenge.connect(signers[3]).joinChallenge();\nawait challenge.connect(signers[4]).joinChallenge();\nconst player1 = await challenge.players(0);\nexpect(player1[0]).to.equal(signers[0].address);\nconst player2 = await challenge.players(1);\nexpect(player2[0]).to.equal(signers[1].address);\nconst player3 = await challenge.players(2);\nexpect(player3[0]).to.equal(signers[2].address);\nconst player4 = await challenge.players(3);\nexpect(player4[0]).to.equal(signers[3].address);\nconst player5 = await challenge.players(4);\nexpect(player5[0]).to.equal(signers[4].address);\nawait expect(challenge.connect(signers[5]).joinChallenge()).to.be.revertedWith(\&quot;This challenge is already full\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f65c03db-7a57-470e-aa00-cbdf150fa930&quot;,&quot;parentUUID&quot;:&quot;81d2e9ce-9f62-48d9-9df4-2c0bbdef6068&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow a participant to join twice&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract gathering players state should not allow a participant to join twice&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await challenge.joinChallenge();\nawait expect(challenge.joinChallenge()).to.be.revertedWith(\&quot;You already joined\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;627c0a55-f5bf-46cd-9c27-2c3fea5536bf&quot;,&quot;parentUUID&quot;:&quot;81d2e9ce-9f62-48d9-9df4-2c0bbdef6068&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow a player to join if he did not approve enough tokens&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract gathering players state should not allow a player to join if he did not approve enough tokens&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//signer 5 approves not enough tokens\nawait token.connect(signers[5]).approve(challenge.target, bid-1n);\nawait expect(\n    challenge.connect(signers[5]).joinChallenge()\n).to.be.revertedWith(\&quot;Need prior approval for token spending\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bcb2cf05-3e6e-40f8-ae62-1e433ce0e905&quot;,&quot;parentUUID&quot;:&quot;81d2e9ce-9f62-48d9-9df4-2c0bbdef6068&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow a player to withdraw from the challenge (before start), while letting the challenge start when required without issues&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract gathering players state should allow a player to withdraw from the challenge (before start), while letting the challenge start when required without issues&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//5 players join\nawait challenge.joinChallenge();\nawait challenge.connect(signers[1]).joinChallenge();\nawait challenge.connect(signers[2]).joinChallenge();\nawait challenge.connect(signers[3]).joinChallenge();\nawait challenge.connect(signers[4]).joinChallenge();\n//one player withdraws from challenge\nawait challenge.connect(signers[2]).withdrawFromChallenge();\nconst player1 = await challenge.players(0);\nexpect(player1[0]).to.equal(signers[0].address);\nconst player2 = await challenge.players(1);\nexpect(player2[0]).to.equal(signers[1].address);\nconst player3 = await challenge.players(2);\nexpect(player3[0]).to.equal(signers[4].address);\nconst player4 = await challenge.players(3);\nexpect(player4[0]).to.equal(signers[3].address);\n//the 3rd player should not be in the array anymore, this should revert\nawait expect(\n    challenge.players(4)\n).to.be.reverted;\n//Admin successfully starts challenge\nawait challenge.startChallenge();\nexpect(\n   await challenge.currentStatus()\n).to.equal(ChallengeStatus.OngoingChallenge);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a46fdd9f-0190-4ee6-a352-ba4fc0cb0dce&quot;,&quot;parentUUID&quot;:&quot;81d2e9ce-9f62-48d9-9df4-2c0bbdef6068&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow a player to withdraw from the challenge if he hasnt joined&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract gathering players state should not allow a player to withdraw from the challenge if he hasnt joined&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//try to withdraw without having joined, reverts\nawait expect(\n   challenge.withdrawFromChallenge()\n).to.be.revertedWith(\&quot;You are not in players list\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fd0ec608-00be-4bfb-8454-9edb81b59480&quot;,&quot;parentUUID&quot;:&quot;81d2e9ce-9f62-48d9-9df4-2c0bbdef6068&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow a player to join, withdraw and then join again the challenge&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract gathering players state should allow a player to join, withdraw and then join again the challenge&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await challenge.joinChallenge();\nawait challenge.withdrawFromChallenge();\nawait expect(\n   challenge.joinChallenge()\n).to.not.be.reverted&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2ffcb64d-ae7e-424b-82c4-6b0867879a28&quot;,&quot;parentUUID&quot;:&quot;81d2e9ce-9f62-48d9-9df4-2c0bbdef6068&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow to start the challenge if there is less than 2 players&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract gathering players state should not allow to start the challenge if there is less than 2 players&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;challenge.joinChallenge();\nawait expect(\n    challenge.startChallenge()\n).to.be.revertedWith(\&quot;Not enough players to start the challenge\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;63d2ce1d-2080-4f42-82fc-183ebfc4bfb5&quot;,&quot;parentUUID&quot;:&quot;81d2e9ce-9f62-48d9-9df4-2c0bbdef6068&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should revert startChallenge() if a participant doesnt have enough tokens&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract gathering players state should revert startChallenge() if a participant doesnt have enough tokens&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await challenge.joinChallenge()\n//signer 0 sends tokens to signer 6, but not enough\nawait token.transfer(signers[6], bid-1n);\nawait token.connect(signers[6]).approve(challenge.target, bid);\nawait challenge.connect(signers[6]).joinChallenge()\nawait expect(\n    challenge.startChallenge()\n).to.be.revertedWithCustomError(token, \&quot;ERC20InsufficientBalance\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6002dadc-d996-4bda-872d-2eef937f80a2&quot;,&quot;parentUUID&quot;:&quot;81d2e9ce-9f62-48d9-9df4-2c0bbdef6068&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should revert startChallenge() if a participant did not approve enough tokens&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract gathering players state should revert startChallenge() if a participant did not approve enough tokens&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await challenge.joinChallenge()\n//signer 0 sends tokens to signer 6, but not enough\nawait token.transfer(signers[6], bid);\nawait token.connect(signers[6]).approve(challenge.target, bid);\nawait challenge.connect(signers[6]).joinChallenge()\n//lowers approval amount\nawait token.connect(signers[6]).approve(challenge.target, bid-1n);\nawait expect(\n    challenge.startChallenge()\n).to.be.revertedWithCustomError(token, \&quot;ERC20InsufficientAllowance\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;797c0954-40bb-4066-8d2c-54e8d2933753&quot;,&quot;parentUUID&quot;:&quot;81d2e9ce-9f62-48d9-9df4-2c0bbdef6068&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow the admin to go to the next state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract gathering players state should allow the admin to go to the next state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await challenge.joinChallenge();\nawait challenge.connect(signers[1]).joinChallenge();\nawait challenge.startChallenge();\nexpect(\n   await challenge.currentStatus()\n).to.equal(ChallengeStatus.OngoingChallenge);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;afe553ea-3db4-40f8-b205-1461ec10d1a3&quot;,&quot;parentUUID&quot;:&quot;81d2e9ce-9f62-48d9-9df4-2c0bbdef6068&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f15609cb-40b3-4931-b264-1af6d1e0ed85&quot;,&quot;f65c03db-7a57-470e-aa00-cbdf150fa930&quot;,&quot;627c0a55-f5bf-46cd-9c27-2c3fea5536bf&quot;,&quot;bcb2cf05-3e6e-40f8-ae62-1e433ce0e905&quot;,&quot;a46fdd9f-0190-4ee6-a352-ba4fc0cb0dce&quot;,&quot;fd0ec608-00be-4bfb-8454-9edb81b59480&quot;,&quot;2ffcb64d-ae7e-424b-82c4-6b0867879a28&quot;,&quot;63d2ce1d-2080-4f42-82fc-183ebfc4bfb5&quot;,&quot;6002dadc-d996-4bda-872d-2eef937f80a2&quot;,&quot;797c0954-40bb-4066-8d2c-54e8d2933753&quot;,&quot;afe553ea-3db4-40f8-b205-1461ec10d1a3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:95,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;b64cb44e-0fd9-40d0-ac8b-198745ecbdd5&quot;,&quot;title&quot;:&quot;gathering players state (FOR GROUP MODE SPECIFIC TESTS)&quot;,&quot;fullFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js&quot;,&quot;file&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;gathering players state (FOR GROUP MODE SPECIFIC TESTS)\&quot;&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract gathering players state (FOR GROUP MODE SPECIFIC TESTS) \&quot;before each\&quot; hook in \&quot;gathering players state (FOR GROUP MODE SPECIFIC TESTS)\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//Deploying in group mode\n({challenge, signers, bid, token} = await loadFixture(groupModeFixture));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d773f822-bd83-44c2-97ab-9d0d3cb26422&quot;,&quot;parentUUID&quot;:&quot;b64cb44e-0fd9-40d0-ac8b-198745ecbdd5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;FOR GROUP MODE : the stored array of players should be correct&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract gathering players state (FOR GROUP MODE SPECIFIC TESTS) FOR GROUP MODE : the stored array of players should be correct&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await challenge.connect(signers[0]).joinChallenge()\nawait challenge.connect(signers[1]).joinChallenge()\nawait challenge.connect(signers[2]).joinChallenge()\nawait challenge.connect(signers[3]).joinChallenge()\n\nconst player1 = await challenge.players(0);\nexpect(player1[0]).to.equal(signers[0].address);\nconst player2 = await challenge.players(1);\nexpect(player2[0]).to.equal(signers[1].address);\nconst player3 = await challenge.players(2);\nexpect(player3[0]).to.equal(signers[2].address);\nconst player4 = await challenge.players(3);\nexpect(player4[0]).to.equal(signers[3].address);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;059896a2-3dd4-4b1e-a748-fe550b40171c&quot;,&quot;parentUUID&quot;:&quot;b64cb44e-0fd9-40d0-ac8b-198745ecbdd5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;FOR GROUP MODE : should not allow a player to join if he is not among those chosen by the admin at creation&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract gathering players state (FOR GROUP MODE SPECIFIC TESTS) FOR GROUP MODE : should not allow a player to join if he is not among those chosen by the admin at creation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n    challenge.connect(signers[5]).joinChallenge()\n).to.be.revertedWith(\&quot;You are not allowed to join this challenge.\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;54a3f20d-c388-4a1f-baff-032cde8cdf1c&quot;,&quot;parentUUID&quot;:&quot;b64cb44e-0fd9-40d0-ac8b-198745ecbdd5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;059896a2-3dd4-4b1e-a748-fe550b40171c&quot;,&quot;54a3f20d-c388-4a1f-baff-032cde8cdf1c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:11,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;16d6f201-33e0-4dde-9df8-1afc6933cc00&quot;,&quot;title&quot;:&quot;ongoing challenge state&quot;,&quot;fullFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js&quot;,&quot;file&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;ongoing challenge state\&quot;&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract ongoing challenge state \&quot;before each\&quot; hook in \&quot;ongoing challenge state\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:43,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;({challenge, signers} = await loadFixture(OngoingChallengeFixture));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4ff247c5-9441-42b2-a176-ef0c277feac1&quot;,&quot;parentUUID&quot;:&quot;16d6f201-33e0-4dde-9df8-1afc6933cc00&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;state should be \&quot;OngoingChallenge\&quot; during the challenge. &quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract ongoing challenge state state should be \&quot;OngoingChallenge\&quot; during the challenge. &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;expect(await challenge.currentStatus()).to.equal(ChallengeStatus.OngoingChallenge);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;75b89ab2-33d9-408a-8fd2-d7da3b302654&quot;,&quot;parentUUID&quot;:&quot;16d6f201-33e0-4dde-9df8-1afc6933cc00&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;75b89ab2-33d9-408a-8fd2-d7da3b302654&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;fdde1c81-967c-454e-b6b4-fd92ac4eed37&quot;,&quot;title&quot;:&quot;voting for winner state&quot;,&quot;fullFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js&quot;,&quot;file&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;voting for winner state\&quot;&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract voting for winner state \&quot;before each\&quot; hook in \&quot;voting for winner state\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;({challenge, signers} = await loadFixture(VotingForWinnerFixture));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5ee3b467-febc-46f4-86ec-9a69e4940f36&quot;,&quot;parentUUID&quot;:&quot;fdde1c81-967c-454e-b6b4-fd92ac4eed37&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should allow a player to vote (for another player). check that the vote is registered&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract voting for winner state should allow a player to vote (for another player). check that the vote is registered&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await challenge.voteForWinner(signers[1].address);\nconst player2 = await challenge.players(1);\nexpect(player2[1]).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6c22b778-f4c5-436a-8057-1537f60c768d&quot;,&quot;parentUUID&quot;:&quot;fdde1c81-967c-454e-b6b4-fd92ac4eed37&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow a non player to vote&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract voting for winner state should not allow a non player to vote&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n   challenge.connect(signers[5]).voteForWinner(signers[1].address)\n).to.be.revertedWith(\&quot;You are not a player. You cannot vote for winner.\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;36880581-21ba-45a4-a390-af7c414e60d5&quot;,&quot;parentUUID&quot;:&quot;fdde1c81-967c-454e-b6b4-fd92ac4eed37&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow a player to vote twice&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract voting for winner state should not allow a player to vote twice&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await challenge.voteForWinner(signers[1].address);\nawait expect(\n   challenge.voteForWinner(signers[1].address)\n).to.be.revertedWith(\&quot;You have already voted.\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;692fd067-b716-43b5-bb5c-57be216d77e5&quot;,&quot;parentUUID&quot;:&quot;fdde1c81-967c-454e-b6b4-fd92ac4eed37&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow to go to next state (ChallengeWon) if everyone has not voted (and minimum delay hasn&#x27;t passed)&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract voting for winner state should not allow to go to next state (ChallengeWon) if everyone has not voted (and minimum delay hasn&#x27;t passed)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await challenge.voteForWinner(signers[1].address)\nawait challenge.connect(signers[1]).voteForWinner(signers[1].address)\nawait expect(\n   challenge.endWinnerVote()\n).to.be.revertedWith(\&quot;Not all player have voted for a winner yet (and minimum delay has not passed)\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a31daff4-ebc6-4b20-a922-4e96a740799f&quot;,&quot;parentUUID&quot;:&quot;fdde1c81-967c-454e-b6b4-fd92ac4eed37&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow ANYONE to go to next state (ChallengeWon) if everyone has not voted but minimum delay has passed&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract voting for winner state should allow ANYONE to go to next state (ChallengeWon) if everyone has not voted but minimum delay has passed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await challenge.voteForWinner(signers[1].address)\nawait challenge.connect(signers[1]).voteForWinner(signers[1].address)\n//Pass enough time\nawait time.increase(votingDelay);\nawait expect(\n   challenge.connect(signers[2]).endWinnerVote()\n).not.to.be.reverted;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;91deffc5-9a40-41ee-a7e9-81b5dcea9925&quot;,&quot;parentUUID&quot;:&quot;fdde1c81-967c-454e-b6b4-fd92ac4eed37&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow ANYONE to go to next state (ChallengeWon) when everyone voted&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract voting for winner state should allow ANYONE to go to next state (ChallengeWon) when everyone voted&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await challenge.voteForWinner(signers[1].address)\nawait challenge.connect(signers[1]).voteForWinner(signers[1].address) \nawait challenge.connect(signers[2]).voteForWinner(signers[2].address) \nawait challenge.connect(signers[3]).voteForWinner(signers[1].address) \nawait challenge.connect(signers[4]).voteForWinner(signers[2].address) \n//Any player can end vote, because everyone has voted\nawait challenge.connect(signers[1]).endWinnerVote();\nexpect(await challenge.currentStatus()).to.equal(ChallengeStatus.ChallengeWon);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c8c1a7d0-8b8d-472e-8349-74ba53ad927a&quot;,&quot;parentUUID&quot;:&quot;fdde1c81-967c-454e-b6b4-fd92ac4eed37&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow ANYONE to go to next state (ChallengeWon) if no one has voted (even if time has passed)&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract voting for winner state should not allow ANYONE to go to next state (ChallengeWon) if no one has voted (even if time has passed)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//Pass enough time\n            await time.increase(votingDelay);\n            //Any player can end vote, because everyone has voted\n            await expect(challenge.connect(signers[1]).endWinnerVote()).to.be.revertedWith(&#x27;Not allowed in this state&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;51886105-6aa8-4b6b-85fd-a9c99dede00c&quot;,&quot;parentUUID&quot;:&quot;fdde1c81-967c-454e-b6b4-fd92ac4eed37&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6c22b778-f4c5-436a-8057-1537f60c768d&quot;,&quot;36880581-21ba-45a4-a390-af7c414e60d5&quot;,&quot;692fd067-b716-43b5-bb5c-57be216d77e5&quot;,&quot;a31daff4-ebc6-4b20-a922-4e96a740799f&quot;,&quot;91deffc5-9a40-41ee-a7e9-81b5dcea9925&quot;,&quot;c8c1a7d0-8b8d-472e-8349-74ba53ad927a&quot;,&quot;51886105-6aa8-4b6b-85fd-a9c99dede00c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:31,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;260816a6-6bab-4c50-8f52-8117e3bf0568&quot;,&quot;title&quot;:&quot;challenge won state&quot;,&quot;fullFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js&quot;,&quot;file&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;challenge won state\&quot;&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract challenge won state \&quot;before each\&quot; hook in \&quot;challenge won state\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;({challenge, signers, bid, token} = await loadFixture(VotingForWinnerFixture));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;25dc9dcf-6d8b-497a-948e-00d5e67d5604&quot;,&quot;parentUUID&quot;:&quot;260816a6-6bab-4c50-8f52-8117e3bf0568&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;winner should receive prize when endWinnerVote() is triggered&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract challenge won state winner should receive prize when endWinnerVote() is triggered&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//Players voting\nawait challenge.voteForWinner(signers[1].address)\nawait challenge.connect(signers[1]).voteForWinner(signers[2].address) \nawait challenge.connect(signers[2]).voteForWinner(signers[2].address) \nawait challenge.connect(signers[3]).voteForWinner(signers[1].address) \nawait challenge.connect(signers[4]).voteForWinner(signers[2].address) \n//Check balance before\nconst balanceBefore = await token.balanceOf(signers[2].address);\n//End vote\nawait challenge.endWinnerVote();\n//Check balance after\nconst balanceAfter = await token.balanceOf(signers[2].address);\nconst diff = balanceAfter - balanceBefore;\nconst expectedDiff = bid*5n - 5n*bid*bronze/100n;\n//Difference should be equal to cash prize won\nexpect(diff).to.equal(expectedDiff); // substract fees too&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6f465112-6b07-4b23-8bf9-d24d538542f1&quot;,&quot;parentUUID&quot;:&quot;260816a6-6bab-4c50-8f52-8117e3bf0568&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;if more tokens (signers[1] gold tier here) winner should receive more tokens&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract challenge won state if more tokens (signers[1] gold tier here) winner should receive more tokens&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//Players voting\nawait challenge.voteForWinner(signers[1].address)\nawait challenge.connect(signers[1]).voteForWinner(signers[1].address) \nawait challenge.connect(signers[2]).voteForWinner(signers[1].address) \nawait challenge.connect(signers[3]).voteForWinner(signers[0].address) \nawait challenge.connect(signers[4]).voteForWinner(signers[2].address) \n//Check balance before\nconst balanceBefore = await token.balanceOf(signers[1].address);\n//End vote\nawait challenge.endWinnerVote();\n//Check balance after\nconst balanceAfter = await token.balanceOf(signers[1].address);\nconst diff = balanceAfter - balanceBefore;\nconst expectedDiff = bid*5n - 5n*bid*gold/100n;\n//Difference should be equal to cash prize won\nexpect(diff).to.equal(expectedDiff); // substract fees too&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5177a4fe-c12a-44e7-a6cd-b00f1603a318&quot;,&quot;parentUUID&quot;:&quot;260816a6-6bab-4c50-8f52-8117e3bf0568&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fee receiver should receive half of the fees (the rest is burnt)&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract challenge won state fee receiver should receive half of the fees (the rest is burnt)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//Players voting\nawait challenge.voteForWinner(signers[2].address)\nawait challenge.connect(signers[1]).voteForWinner(signers[2].address)\nawait challenge.connect(signers[2]).voteForWinner(signers[2].address)\nawait challenge.connect(signers[3]).voteForWinner(signers[1].address)\nawait challenge.connect(signers[4]).voteForWinner(signers[4].address)\nconst balanceBefore = await token.balanceOf(signers[0].address);\n//End vote\nawait challenge.endWinnerVote();\nconst balanceAfter = await token.balanceOf(signers[0].address);\nconst diff = balanceAfter - balanceBefore;\nconst expectedFeesReceived = 5n*bid/2n*bronze/100n;\n\nexpect(\n    diff\n).to.equal(expectedFeesReceived);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5489598e-4a35-4b24-b46f-6d0e12047eff&quot;,&quot;parentUUID&quot;:&quot;260816a6-6bab-4c50-8f52-8117e3bf0568&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;half of the fees should have been burnt&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract challenge won state half of the fees should have been burnt&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//Players voting\nawait challenge.voteForWinner(signers[0].address)\nawait challenge.connect(signers[1]).voteForWinner(signers[0].address)\nawait challenge.connect(signers[2]).voteForWinner(signers[2].address)\nawait challenge.connect(signers[3]).voteForWinner(signers[1].address)\nawait challenge.connect(signers[4]).voteForWinner(signers[4].address)\nconst initialTotalSupply = await token.totalSupply();\n//End vote\nawait challenge.endWinnerVote();\nconst finalTotalSupply = await token.totalSupply();\nconst diff = initialTotalSupply - finalTotalSupply;\nconst expectedBurntAmount = bid*5n/2n*platinum/100n;\n\nexpect(\n    diff\n).to.equal(expectedBurntAmount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9b198a6c-5378-4209-aecd-94c9565346b1&quot;,&quot;parentUUID&quot;:&quot;260816a6-6bab-4c50-8f52-8117e3bf0568&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;When there is a tie, should allow both winners to receive prize&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract challenge won state When there is a tie, should allow both winners to receive prize&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//Players voting\nawait challenge.voteForWinner(signers[2].address)\nawait challenge.connect(signers[1]).voteForWinner(signers[1].address)\nawait challenge.connect(signers[2]).voteForWinner(signers[2].address)\nawait challenge.connect(signers[3]).voteForWinner(signers[1].address)\nawait challenge.connect(signers[4]).voteForWinner(signers[4].address)\n//Check balance before for both winners\nconst balanceBefore1 = await token.balanceOf(signers[1].address);\nconst balanceBefore2 = await token.balanceOf(signers[2].address);\n//End vote\nawait challenge.endWinnerVote();\nconst winner1 = await challenge.challengeWinners(0)\nconst winner2 = await challenge.challengeWinners(1)\nexpect(winner1).to.equal(signers[2].address);\nexpect(winner2).to.equal(signers[1].address);\n//Check balance after (winner1)\nconst balanceAfter1 = await token.balanceOf(signers[1].address);\nconst diff1 = balanceAfter1 - balanceBefore1;\nconst expectedDiff1 = bid*5n/2n - bid*5n/2n*gold/100n;\nexpect(\n    diff1\n).to.equal(expectedDiff1);\n//Check balance after (winner2)\nconst balanceAfter2 = await token.balanceOf(signers[2].address);\nconst diff2 = balanceAfter2 - balanceBefore2;\nconst expectedDiff2 = bid*5n/2n - bid*5n/2n*bronze/100n;\nexpect(\n    diff2\n).to.equal(expectedDiff2); //substract fees too&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f79cd536-5c01-48a2-ab4f-73f0f7d283f8&quot;,&quot;parentUUID&quot;:&quot;260816a6-6bab-4c50-8f52-8117e3bf0568&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6f465112-6b07-4b23-8bf9-d24d538542f1&quot;,&quot;5177a4fe-c12a-44e7-a6cd-b00f1603a318&quot;,&quot;5489598e-4a35-4b24-b46f-6d0e12047eff&quot;,&quot;9b198a6c-5378-4209-aecd-94c9565346b1&quot;,&quot;f79cd536-5c01-48a2-ab4f-73f0f7d283f8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:54,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;f8ab7ba5-98cc-4aa1-83d3-c289c47923e1&quot;,&quot;title&quot;:&quot;Owner functions&quot;,&quot;fullFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js&quot;,&quot;file&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should not allow not admin player to go to OngoingChallenge state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract Owner functions should not allow not admin player to go to OngoingChallenge state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const {challenge, signers} = await loadFixture(deployedChallengeFixtureBase);\nawait expect(\n   challenge.connect(signers[1]).startChallenge()\n).to.be.revertedWithCustomError(challenge, \&quot;OwnableUnauthorizedAccount\&quot;).withArgs(signers[1].address);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;852baa6b-5fd3-4dab-92c7-69ed62ff7243&quot;,&quot;parentUUID&quot;:&quot;f8ab7ba5-98cc-4aa1-83d3-c289c47923e1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;852baa6b-5fd3-4dab-92c7-69ed62ff7243&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;ba775f6a-9b19-4488-8fa3-6cb8885c647c&quot;,&quot;title&quot;:&quot;State functions availability&quot;,&quot;fullFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js&quot;,&quot;file&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;ed63f0c1-2b7c-4f77-9e26-674801c52610&quot;,&quot;title&quot;:&quot;state GatheringPlayers&quot;,&quot;fullFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js&quot;,&quot;file&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;state GatheringPlayers\&quot;&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract State functions availability state GatheringPlayers \&quot;before each\&quot; hook in \&quot;state GatheringPlayers\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;({challenge, signers} = await loadFixture(deployedChallengeFixtureBase));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;df3732f5-57b3-46a3-bded-fd67e9773a6b&quot;,&quot;parentUUID&quot;:&quot;ed63f0c1-2b7c-4f77-9e26-674801c52610&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should not allow voteForWinner() in GatheringPlayers state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract State functions availability state GatheringPlayers should not allow voteForWinner() in GatheringPlayers state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n    challenge.voteForWinner(signers[1].address)\n).to.be.revertedWith(\&quot;Not allowed in this state\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ec890d77-1d87-401d-afb3-ae4464155777&quot;,&quot;parentUUID&quot;:&quot;ed63f0c1-2b7c-4f77-9e26-674801c52610&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow endWinnerVote() in GatheringPlayers state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract State functions availability state GatheringPlayers should not allow endWinnerVote() in GatheringPlayers state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n    challenge.endWinnerVote()\n).to.be.revertedWith(\&quot;Not allowed in this state\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c408a476-faae-470d-bda6-75e392eb415c&quot;,&quot;parentUUID&quot;:&quot;ed63f0c1-2b7c-4f77-9e26-674801c52610&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ec890d77-1d87-401d-afb3-ae4464155777&quot;,&quot;c408a476-faae-470d-bda6-75e392eb415c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;09f19f46-41a2-48d4-907d-32fc1983ec05&quot;,&quot;title&quot;:&quot;state OngoingChallenge&quot;,&quot;fullFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js&quot;,&quot;file&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;state OngoingChallenge\&quot;&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract State functions availability state OngoingChallenge \&quot;before each\&quot; hook in \&quot;state OngoingChallenge\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;({challenge, signers} = await loadFixture(OngoingChallengeFixture));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9538c2d3-46bb-4487-b6c1-d9acafc65a07&quot;,&quot;parentUUID&quot;:&quot;09f19f46-41a2-48d4-907d-32fc1983ec05&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should not allow joinChallenge() in OngoingChallenge state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract State functions availability state OngoingChallenge should not allow joinChallenge() in OngoingChallenge state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n    challenge.joinChallenge()\n).to.be.revertedWith(\&quot;Not allowed in this state\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e98e3578-7c07-4865-87e6-a80d929fa15c&quot;,&quot;parentUUID&quot;:&quot;09f19f46-41a2-48d4-907d-32fc1983ec05&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow withdrawFromChallenge() in OngoingChallenge state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract State functions availability state OngoingChallenge should not allow withdrawFromChallenge() in OngoingChallenge state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n    challenge.withdrawFromChallenge()\n).to.be.revertedWith(\&quot;Not allowed in this state\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;333f34b3-5188-4c45-9196-5dd4b4b5ad69&quot;,&quot;parentUUID&quot;:&quot;09f19f46-41a2-48d4-907d-32fc1983ec05&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow startChallenge() in OngoingChallenge state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract State functions availability state OngoingChallenge should not allow startChallenge() in OngoingChallenge state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n    challenge.startChallenge()\n).to.be.revertedWith(\&quot;Not allowed in this state\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f3e5066d-de6f-480f-a415-96187b9b82dd&quot;,&quot;parentUUID&quot;:&quot;09f19f46-41a2-48d4-907d-32fc1983ec05&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow voteForWinner() in OngoingChallenge state (if the challenge is not over)&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract State functions availability state OngoingChallenge should not allow voteForWinner() in OngoingChallenge state (if the challenge is not over)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n    challenge.voteForWinner(signers[1].address)\n).to.be.revertedWith(\&quot;You are not allowed to vote now\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;88566c21-7323-4fca-9426-1d570aaeb48d&quot;,&quot;parentUUID&quot;:&quot;09f19f46-41a2-48d4-907d-32fc1983ec05&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow voteForWinner() in OngoingChallenge state (if the challenge is over). state should become \&quot;VotingForWinner\&quot; after first player votes at the end of the challenge. &quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract State functions availability state OngoingChallenge should allow voteForWinner() in OngoingChallenge state (if the challenge is over). state should become \&quot;VotingForWinner\&quot; after first player votes at the end of the challenge. &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;expect(await challenge.currentStatus()).to.equal(ChallengeStatus.OngoingChallenge);\n//wait for challenge to end\nawait time.increase(duration);\n\n//should be allowed\nawait expect(\n    challenge.voteForWinner(signers[1].address)\n).to.not.be.reverted;\n//State should have changed\nexpect(await challenge.currentStatus()).to.equal(ChallengeStatus.VotingForWinner);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d52031fb-9a40-4fa8-9ebf-9b5b5a1a7e30&quot;,&quot;parentUUID&quot;:&quot;09f19f46-41a2-48d4-907d-32fc1983ec05&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow endWinnerVote() in OngoingChallenge state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract State functions availability state OngoingChallenge should not allow endWinnerVote() in OngoingChallenge state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n    challenge.endWinnerVote()\n).to.be.revertedWith(\&quot;Not allowed in this state\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6a938e8b-9f2a-4b52-a239-753752eb75e5&quot;,&quot;parentUUID&quot;:&quot;09f19f46-41a2-48d4-907d-32fc1983ec05&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e98e3578-7c07-4865-87e6-a80d929fa15c&quot;,&quot;333f34b3-5188-4c45-9196-5dd4b4b5ad69&quot;,&quot;f3e5066d-de6f-480f-a415-96187b9b82dd&quot;,&quot;88566c21-7323-4fca-9426-1d570aaeb48d&quot;,&quot;d52031fb-9a40-4fa8-9ebf-9b5b5a1a7e30&quot;,&quot;6a938e8b-9f2a-4b52-a239-753752eb75e5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:15,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;406b0c30-e5d9-47c0-925d-d5b59e486836&quot;,&quot;title&quot;:&quot;state VotingForWinner&quot;,&quot;fullFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js&quot;,&quot;file&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;state VotingForWinner\&quot;&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract State functions availability state VotingForWinner \&quot;before each\&quot; hook in \&quot;state VotingForWinner\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;({challenge, signers, bid} = await loadFixture(VotingForWinnerFixture));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;49f8115c-5c0b-41fa-ac94-3a44b54572b3&quot;,&quot;parentUUID&quot;:&quot;406b0c30-e5d9-47c0-925d-d5b59e486836&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should not allow joinChallenge() in VotingForWinner state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract State functions availability state VotingForWinner should not allow joinChallenge() in VotingForWinner state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n    challenge.joinChallenge()\n).to.be.revertedWith(\&quot;Not allowed in this state\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b5ec10f6-c4b3-4769-89c4-145f920c5653&quot;,&quot;parentUUID&quot;:&quot;406b0c30-e5d9-47c0-925d-d5b59e486836&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow withdrawFromChallenge() in OngoingChallenge state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract State functions availability state VotingForWinner should not allow withdrawFromChallenge() in OngoingChallenge state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n    challenge.withdrawFromChallenge()\n).to.be.revertedWith(\&quot;Not allowed in this state\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d4681f05-9389-4ca6-9d16-0495018d6bd4&quot;,&quot;parentUUID&quot;:&quot;406b0c30-e5d9-47c0-925d-d5b59e486836&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow startChallenge() in VotingForWinner state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract State functions availability state VotingForWinner should not allow startChallenge() in VotingForWinner state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n    challenge.startChallenge()\n).to.be.revertedWith(\&quot;Not allowed in this state\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;69354375-926e-4fc4-bdf9-25d09a7d864b&quot;,&quot;parentUUID&quot;:&quot;406b0c30-e5d9-47c0-925d-d5b59e486836&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b5ec10f6-c4b3-4769-89c4-145f920c5653&quot;,&quot;d4681f05-9389-4ca6-9d16-0495018d6bd4&quot;,&quot;69354375-926e-4fc4-bdf9-25d09a7d864b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;b2bc2403-bde7-4f16-b891-a342eaf85ed3&quot;,&quot;title&quot;:&quot;state ChallengeWon&quot;,&quot;fullFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js&quot;,&quot;file&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;state ChallengeWon\&quot;&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract State functions availability state ChallengeWon \&quot;before each\&quot; hook in \&quot;state ChallengeWon\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;({challenge, signers, bid} = await loadFixture(EndingVoteFixture));\nawait challenge.endWinnerVote();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b79003b6-df96-47c7-aaa6-384df9fe1086&quot;,&quot;parentUUID&quot;:&quot;b2bc2403-bde7-4f16-b891-a342eaf85ed3&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should not allow joinChallenge() in ChallengeWon state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract State functions availability state ChallengeWon should not allow joinChallenge() in ChallengeWon state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n    challenge.joinChallenge()\n).to.be.revertedWith(\&quot;Not allowed in this state\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2a07da51-f0cb-4c3d-818b-9e922e945cfc&quot;,&quot;parentUUID&quot;:&quot;b2bc2403-bde7-4f16-b891-a342eaf85ed3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow withdrawFromChallenge() in OngoingChallenge state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract State functions availability state ChallengeWon should not allow withdrawFromChallenge() in OngoingChallenge state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n    challenge.withdrawFromChallenge()\n).to.be.revertedWith(\&quot;Not allowed in this state\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;190ea58c-b96d-498c-98de-ecfcd96e2108&quot;,&quot;parentUUID&quot;:&quot;b2bc2403-bde7-4f16-b891-a342eaf85ed3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow startChallenge() in ChallengeWon state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract State functions availability state ChallengeWon should not allow startChallenge() in ChallengeWon state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n    challenge.startChallenge()\n).to.be.revertedWith(\&quot;Not allowed in this state\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e9870c6b-197e-4a33-8e4b-b811dc1d6c31&quot;,&quot;parentUUID&quot;:&quot;b2bc2403-bde7-4f16-b891-a342eaf85ed3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow voteForWinner() in ChallengeWon state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract State functions availability state ChallengeWon should not allow voteForWinner() in ChallengeWon state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n    challenge.voteForWinner(signers[1].address)\n).to.be.revertedWith(\&quot;Not allowed in this state\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;10fda159-d392-4d79-be66-f03c5fb5e57c&quot;,&quot;parentUUID&quot;:&quot;b2bc2403-bde7-4f16-b891-a342eaf85ed3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow endWinnerVote() in ChallengeWon state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract State functions availability state ChallengeWon should not allow endWinnerVote() in ChallengeWon state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n    challenge.endWinnerVote()\n).to.be.revertedWith(\&quot;Not allowed in this state\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;af10e67f-aa04-470e-88fe-28f0b2beea99&quot;,&quot;parentUUID&quot;:&quot;b2bc2403-bde7-4f16-b891-a342eaf85ed3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2a07da51-f0cb-4c3d-818b-9e922e945cfc&quot;,&quot;190ea58c-b96d-498c-98de-ecfcd96e2108&quot;,&quot;e9870c6b-197e-4a33-8e4b-b811dc1d6c31&quot;,&quot;10fda159-d392-4d79-be66-f03c5fb5e57c&quot;,&quot;af10e67f-aa04-470e-88fe-28f0b2beea99&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;69bc68c7-451e-4aaa-89f5-a941502e8bab&quot;,&quot;title&quot;:&quot;Events&quot;,&quot;fullFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js&quot;,&quot;file&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/Challenge.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should emit an event when a Player Joined&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract Events should emit an event when a Player Joined&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const {challenge, signers, bid} = await loadFixture(deployedChallengeFixtureBase)\nawait expect(challenge.joinChallenge())\n    .to.emit(challenge, \&quot;PlayerJoined\&quot;)\n    .withArgs(signers[0].address);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;efb8af84-f695-4772-aaf2-720e77d61d35&quot;,&quot;parentUUID&quot;:&quot;69bc68c7-451e-4aaa-89f5-a941502e8bab&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit an event when a Player Withdraws from challenge&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract Events should emit an event when a Player Withdraws from challenge&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const {challenge, signers, bid} = await loadFixture(deployedChallengeFixtureBase)\nawait challenge.joinChallenge();\nawait expect(challenge.withdrawFromChallenge())\n    .to.emit(challenge, \&quot;PlayerWithdrawn\&quot;)\n    .withArgs(signers[0].address);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7181a0db-7f9e-4620-9181-121663cded0c&quot;,&quot;parentUUID&quot;:&quot;69bc68c7-451e-4aaa-89f5-a941502e8bab&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit an event when ChallengeStarted&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract Events should emit an event when ChallengeStarted&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const {challenge, signers} = await loadFixture(deployedChallengeFixtureBase)\nawait challenge.joinChallenge();\nawait challenge.connect(signers[1]).joinChallenge();\nawait expect(challenge.startChallenge())\n    .to.emit(challenge, \&quot;ChallengeStarted\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7e54792a-975f-4ac1-9c57-19fc202d2ce4&quot;,&quot;parentUUID&quot;:&quot;69bc68c7-451e-4aaa-89f5-a941502e8bab&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit an event when ChallengeEnded &quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract Events should emit an event when ChallengeEnded &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:42,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const {challenge, signers} = await loadFixture(OngoingChallengeFixture)\n//Pass enough time\nawait time.increase(duration)\nawait expect(challenge.voteForWinner(signers[1].address))\n    .to.emit(challenge, \&quot;ChallengeEnded\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bbed77d0-daf5-48d1-828c-f4f5b68d74d2&quot;,&quot;parentUUID&quot;:&quot;69bc68c7-451e-4aaa-89f5-a941502e8bab&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit an event when PlayerVoted&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract Events should emit an event when PlayerVoted&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:60,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const {challenge, signers} = await loadFixture(VotingForWinnerFixture)\nawait expect(challenge.voteForWinner(signers[1].address))\n    .to.emit(challenge, \&quot;PlayerVoted\&quot;)\n    .withArgs(signers[0].address, signers[1].address)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;03f16f7d-cf2d-4c66-9f16-95c0adf73787&quot;,&quot;parentUUID&quot;:&quot;69bc68c7-451e-4aaa-89f5-a941502e8bab&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit an event when a prize is sent&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract Events should emit an event when a prize is sent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:57,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const {challenge, signers, bid} = await loadFixture(EndingVoteFixture)\n\nconst expectedPrize = bid*5n - 5n*bid*BigInt(gold)/100n;\nawait expect(await challenge.endWinnerVote())\n    .to.emit(challenge, \&quot;PrizeSent\&quot;)\n    .withArgs(signers[1].address, expectedPrize)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;74cd839e-f5ca-4410-879f-22dc018c35e4&quot;,&quot;parentUUID&quot;:&quot;69bc68c7-451e-4aaa-89f5-a941502e8bab&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;efb8af84-f695-4772-aaf2-720e77d61d35&quot;,&quot;7181a0db-7f9e-4620-9181-121663cded0c&quot;,&quot;7e54792a-975f-4ac1-9c57-19fc202d2ce4&quot;,&quot;bbed77d0-daf5-48d1-828c-f4f5b68d74d2&quot;,&quot;03f16f7d-cf2d-4c66-9f16-95c0adf73787&quot;,&quot;74cd839e-f5ca-4410-879f-22dc018c35e4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:174,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;fef705e0-9389-4d4d-95ed-00fc5b8a2b04&quot;,&quot;title&quot;:&quot;tests ChallengeFactory contract&quot;,&quot;fullFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeFactory.test.js&quot;,&quot;file&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeFactory.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;tests ChallengeFactory contract\&quot;&quot;,&quot;fullTitle&quot;:&quot;tests ChallengeFactory contract \&quot;before each\&quot; hook in \&quot;tests ChallengeFactory contract\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;({challengeFactory, signers, token } = await loadFixture(deployedChallengeFactoryFixtureBase));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5dee8f27-55f6-435f-996d-3d432e73bb8e&quot;,&quot;parentUUID&quot;:&quot;fef705e0-9389-4d4d-95ed-00fc5b8a2b04&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should just deploy the challenge factory, and create a challenge&quot;,&quot;fullTitle&quot;:&quot;tests ChallengeFactory contract should just deploy the challenge factory, and create a challenge&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d0555a01-5040-457d-8940-938d738975d4&quot;,&quot;parentUUID&quot;:&quot;fef705e0-9389-4d4d-95ed-00fc5b8a2b04&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should should not be possible to deploy with a feeReceiver address to 0&quot;,&quot;fullTitle&quot;:&quot;tests ChallengeFactory contract should should not be possible to deploy with a feeReceiver address to 0&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const ChallengeFactory = await ethers.getContractFactory(&#x27;ChallengeFactory&#x27;);\nawait expect(\n    ChallengeFactory.deploy(token.target, \&quot;0x0000000000000000000000000000000000000000\&quot;)\n).to.be.revertedWith(\&quot;the feeReceiver cannot be address 0!\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2650eb1a-c375-41aa-9815-bb218f5cd606&quot;,&quot;parentUUID&quot;:&quot;fef705e0-9389-4d4d-95ed-00fc5b8a2b04&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit an event on new challenge deployment&quot;,&quot;fullTitle&quot;:&quot;tests ChallengeFactory contract should emit an event on new challenge deployment&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const filter = challengeFactory.filters.ChallengeCreated(signers[0].address);\n        const events = await challengeFactory.queryFilter(filter, -1)\n        const event = events[0]\n        expect(event.fragment.name).to.equal(&#x27;ChallengeCreated&#x27;)\n        const args = event.args\n        expect(args.admin).to.equal(signers[0].address)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;04537a73-8922-426b-b775-224478dc1629&quot;,&quot;parentUUID&quot;:&quot;fef705e0-9389-4d4d-95ed-00fc5b8a2b04&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow to deploy a new challenge contract&quot;,&quot;fullTitle&quot;:&quot;tests ChallengeFactory contract should allow to deploy a new challenge contract&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// 2. Extract the address from the event\n        const filter = challengeFactory.filters.ChallengeCreated;\n        const events = await challengeFactory.queryFilter(filter, -1)\n        const event = events[0]\n        const newContractAddress = event.args.challengeAddress;\n        // 3. Attach to the deployed challenge\n        const Challenge = await ethers.getContractFactory(\&quot;Challenge\&quot;);\n        const challenge = Challenge.attach(newContractAddress);\n        // Verify initialisation\n        const _duration = await challenge.duration();\n        const _maxPlayers = await challenge.maxPlayers();\n        const _bid = await challenge.bid();\n        const _description = await challenge.description();\n        expect(_duration).to.equal(1000n);\n        expect(_maxPlayers).to.equal(5n);\n        expect(_bid).to.equal(bid);\n        expect(_description).to.equal(\&quot;test\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c8de800d-6238-487d-a017-ddbc821f98f7&quot;,&quot;parentUUID&quot;:&quot;fef705e0-9389-4d4d-95ed-00fc5b8a2b04&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should set the caller of the function createChallenge as owner of the challenge&quot;,&quot;fullTitle&quot;:&quot;tests ChallengeFactory contract should set the caller of the function createChallenge as owner of the challenge&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// 2. Extract the address from the event\n        const filter = challengeFactory.filters.ChallengeCreated;\n        const events = await challengeFactory.queryFilter(filter, -1)\n        const event = events[0]\n        const newContractAddress = event.args.challengeAddress;\n        // 3. Attach to the deployed challenge\n        const Challenge = await ethers.getContractFactory(\&quot;Challenge\&quot;);\n        const challenge = Challenge.attach(newContractAddress);\n        const owner = await challenge.owner()\n        expect(owner).to.equal(signers[0].address)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;efd76091-bf75-43fc-8e36-66871302f86f&quot;,&quot;parentUUID&quot;:&quot;fef705e0-9389-4d4d-95ed-00fc5b8a2b04&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should be possible to access to all challenges previously created &quot;,&quot;fullTitle&quot;:&quot;tests ChallengeFactory contract should be possible to access to all challenges previously created &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// 1. Call factory to create 2 more challenge contracts\nawait challengeFactory.createChallenge(duration, maxPlayers, bid, description, 0, []);\nawait challengeFactory.createChallenge(duration, maxPlayers, bid, description, 0, []);\n// 2. Extract the addresses from the events\nconst filter = challengeFactory.filters.ChallengeCreated;\nconst events = await challengeFactory.queryFilter(filter, 0, \&quot;latest\&quot;)\nconst addresses = events.map((event) =&gt; event.args.challengeAddress);\n// console.log(\&quot;deployed contract addresses : \&quot;, addresses)\n//Contract ABI\nconst Challenge = await ethers.getContractFactory(\&quot;Challenge\&quot;);\nfor (const addr of addresses) {\n    const challengeContract = Challenge.attach(addr);\n    // Now you can call read-only functions to confirm it&#x27;s really a deployed contract of this type\n    const _duration = await challengeContract.duration();\n    expect(_duration).to.equal(1000n); // simple check that contract responds\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;11b02ba7-84b2-4055-9ecd-6064fc9a7556&quot;,&quot;parentUUID&quot;:&quot;fef705e0-9389-4d4d-95ed-00fc5b8a2b04&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d0555a01-5040-457d-8940-938d738975d4&quot;,&quot;2650eb1a-c375-41aa-9815-bb218f5cd606&quot;,&quot;04537a73-8922-426b-b775-224478dc1629&quot;,&quot;c8de800d-6238-487d-a017-ddbc821f98f7&quot;,&quot;efd76091-bf75-43fc-8e36-66871302f86f&quot;,&quot;11b02ba7-84b2-4055-9ecd-6064fc9a7556&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:30,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;d52ac0fe-4a4e-4faf-a938-5066298943ae&quot;,&quot;title&quot;:&quot;tests ChallengeFactory contract NEW&quot;,&quot;fullFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeFactoryNEW.test.js&quot;,&quot;file&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeFactoryNEW.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;7e46d079-0537-4ed8-aec4-8e39a3e30d95&quot;,&quot;title&quot;:&quot;First tests&quot;,&quot;fullFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeFactoryNEW.test.js&quot;,&quot;file&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeFactoryNEW.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook for \&quot;should just deploy the challenge factory, and create a challenge\&quot;&quot;,&quot;fullTitle&quot;:&quot;tests ChallengeFactory contract NEW First tests \&quot;before each\&quot; hook for \&quot;should just deploy the challenge factory, and create a challenge\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;({challengeFactory, signers, token } = await loadFixture(deployedChallengeFactoryFixtureBase));\nawait challengeFactory.createChallenge(duration, maxPlayers, bid, description, 0, ethers.ZeroHash);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;Error: no matching fragment (operation=\&quot;fragment\&quot;, info={ \&quot;args\&quot;: [ 1000, 5, 1000000000000000000, \&quot;test\&quot;, 0, \&quot;0x0000000000000000000000000000000000000000000000000000000000000000\&quot; ], \&quot;key\&quot;: \&quot;createChallenge\&quot; }, code=UNSUPPORTED_OPERATION, version=6.15.0)&quot;,&quot;estack&quot;:&quot;Error: no matching fragment (operation=\&quot;fragment\&quot;, info={ \&quot;args\&quot;: [ 1000, 5, 1000000000000000000, \&quot;test\&quot;, 0, \&quot;0x0000000000000000000000000000000000000000000000000000000000000000\&quot; ], \&quot;key\&quot;: \&quot;createChallenge\&quot; }, code=UNSUPPORTED_OPERATION, version=6.15.0)\n    at makeError (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/ethers/src.ts/utils/errors.ts:698:21)\n    at assert (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/ethers/src.ts/utils/errors.ts:719:25)\n    at getFragment (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/ethers/src.ts/contract/contract.ts:270:15)\n    at Proxy.createChallenge (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/ethers/src.ts/contract/contract.ts:350:26)\n    at Context.&lt;anonymous&gt; (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeFactoryNEW.test.js:40:36)&quot;},&quot;uuid&quot;:&quot;9be58d7b-ac2e-47d8-8775-4c7a53fc191c&quot;,&quot;parentUUID&quot;:&quot;7e46d079-0537-4ed8-aec4-8e39a3e30d95&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should just deploy the challenge factory, and create a challenge&quot;,&quot;fullTitle&quot;:&quot;tests ChallengeFactory contract NEW First tests should just deploy the challenge factory, and create a challenge&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bb5b6150-12b2-47d6-a43f-85f466a7f69f&quot;,&quot;parentUUID&quot;:&quot;7e46d079-0537-4ed8-aec4-8e39a3e30d95&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;should should not be possible to deploy with a feeReceiver address to 0&quot;,&quot;fullTitle&quot;:&quot;tests ChallengeFactory contract NEW First tests should should not be possible to deploy with a feeReceiver address to 0&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const ChallengeFactory = await ethers.getContractFactory(&#x27;ChallengeFactory&#x27;);\nawait expect(\n    ChallengeFactory.deploy(token.target, \&quot;0x0000000000000000000000000000000000000000\&quot;)\n).to.be.revertedWith(\&quot;the feeReceiver cannot be address 0!\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6c27a1fa-dae6-4def-a605-a5b262c12730&quot;,&quot;parentUUID&quot;:&quot;7e46d079-0537-4ed8-aec4-8e39a3e30d95&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;should emit an event on new challenge deployment&quot;,&quot;fullTitle&quot;:&quot;tests ChallengeFactory contract NEW First tests should emit an event on new challenge deployment&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const filter = challengeFactory.filters.ChallengeCreated(signers[0].address);\n            const events = await challengeFactory.queryFilter(filter, -1)\n            const event = events[0]\n            expect(event.fragment.name).to.equal(&#x27;ChallengeCreated&#x27;)\n            const args = event.args\n            expect(args.admin).to.equal(signers[0].address)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eaf3f47a-2575-4c6b-9ccd-bec0ca7e7659&quot;,&quot;parentUUID&quot;:&quot;7e46d079-0537-4ed8-aec4-8e39a3e30d95&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;should allow to deploy a new challenge contract&quot;,&quot;fullTitle&quot;:&quot;tests ChallengeFactory contract NEW First tests should allow to deploy a new challenge contract&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// 2. Extract the address from the event\n            const filter = challengeFactory.filters.ChallengeCreated;\n            const events = await challengeFactory.queryFilter(filter, -1)\n            const event = events[0]\n            const newContractAddress = event.args.challengeAddress;\n            // 3. Attach to the deployed challenge\n            const Challenge = await ethers.getContractFactory(\&quot;Challenge\&quot;);\n            const challenge = Challenge.attach(newContractAddress);\n            // Verify initialisation\n            const _duration = await challenge.duration();\n            const _maxPlayers = await challenge.maxPlayers();\n            const _bid = await challenge.bid();\n            const _description = await challenge.description();\n            expect(_duration).to.equal(1000n);\n            expect(_maxPlayers).to.equal(5n);\n            expect(_bid).to.equal(bid);\n            expect(_description).to.equal(\&quot;test\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6095fe64-ff76-43ae-a43d-15c657551958&quot;,&quot;parentUUID&quot;:&quot;7e46d079-0537-4ed8-aec4-8e39a3e30d95&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;should allow to deploy a new challenge contract in GROUP mode&quot;,&quot;fullTitle&quot;:&quot;tests ChallengeFactory contract NEW First tests should allow to deploy a new challenge contract in GROUP mode&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const playersAllowed = [\n                [signers[0].address],\n                [signers[1].address],\n                [signers[2].address],\n                [signers[3].address],\n                [signers[4].address]\n            ]\n            const merkleTree = StandardMerkleTree.of(playersAllowed, [\&quot;address\&quot;]);\n            await challengeFactory.createChallenge(1111n, maxPlayers, bid+10n, description, true, merkleTree.root);\n            // 2. Extract the address from the event\n            const filter = challengeFactory.filters.ChallengeCreated;\n            const events = await challengeFactory.queryFilter(filter, -1)\n            const event = events[1]\n            const newContractAddress = event.args.challengeAddress;\n            // 3. Attach to the deployed challenge\n            const Challenge = await ethers.getContractFactory(\&quot;Challenge\&quot;);\n            const challenge = Challenge.attach(newContractAddress);\n            // Verify initialisation\n            const _duration = await challenge.duration();\n            const _maxPlayers = await challenge.maxPlayers();\n            const _bid = await challenge.bid();\n            const _description = await challenge.description();\n            expect(_duration).to.equal(1111n);\n            expect(_maxPlayers).to.equal(5n);\n            expect(_bid).to.equal(bid+10n);\n            expect(_description).to.equal(\&quot;test\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d90dbf94-1ff5-45db-8bd5-4a74a4917c5c&quot;,&quot;parentUUID&quot;:&quot;7e46d079-0537-4ed8-aec4-8e39a3e30d95&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;should set the caller of the function createChallenge as owner of the challenge&quot;,&quot;fullTitle&quot;:&quot;tests ChallengeFactory contract NEW First tests should set the caller of the function createChallenge as owner of the challenge&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// 2. Extract the address from the event\n            const filter = challengeFactory.filters.ChallengeCreated;\n            const events = await challengeFactory.queryFilter(filter, -1)\n            const event = events[0]\n            const newContractAddress = event.args.challengeAddress;\n            // 3. Attach to the deployed challenge\n            const Challenge = await ethers.getContractFactory(\&quot;Challenge\&quot;);\n            const challenge = Challenge.attach(newContractAddress);\n            const owner = await challenge.owner()\n            expect(owner).to.equal(signers[0].address)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d23fd678-daf9-4452-bc9c-c4e6d2c19b11&quot;,&quot;parentUUID&quot;:&quot;7e46d079-0537-4ed8-aec4-8e39a3e30d95&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;bb5b6150-12b2-47d6-a43f-85f466a7f69f&quot;,&quot;6c27a1fa-dae6-4def-a605-a5b262c12730&quot;,&quot;eaf3f47a-2575-4c6b-9ccd-bec0ca7e7659&quot;,&quot;6095fe64-ff76-43ae-a43d-15c657551958&quot;,&quot;d90dbf94-1ff5-45db-8bd5-4a74a4917c5c&quot;,&quot;d23fd678-daf9-4452-bc9c-c4e6d2c19b11&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;5e9f049e-3864-45b7-9de9-decb731526bc&quot;,&quot;title&quot;:&quot;ChallengeFactoryNew pagination&quot;,&quot;fullFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeFactoryNEW.test.js&quot;,&quot;file&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeFactoryNEW.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook for \&quot;should return the first batch when count &lt; total\&quot;&quot;,&quot;fullTitle&quot;:&quot;tests ChallengeFactory contract NEW ChallengeFactoryNew pagination \&quot;before each\&quot; hook for \&quot;should return the first batch when count &lt; total\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;({challengeFactory, signers, token } = await loadFixture(deployedChallengeFactoryFixtureBase));\n            // Create a bunch of challenges\n            this.numChallenges = 7;\n            this.created = [];\n            const startBlockNumber = (await ethers.provider.getBlock(\&quot;latest\&quot;)).number + 1;\n            for (let i = 0; i &lt; this.numChallenges; i++) {\n                const tx = await challengeFactory.createChallenge(\n                    duration,                // duration\n                    maxPlayers,                   // maxPlayers\n                    bid + BigInt(i),  // bid (just vary slightly)\n                    `desc ${i}`,         // description\n                    false,               // groupMode\n                    ethers.ZeroHash  // merkleRoot placeholder\n                );\n                const receipt = await tx.wait();\n            }\n            //then, create table once after all creations\n            const filter = challengeFactory.filters.ChallengeCreated();\n            const fromBlock = startBlockNumber; // capture before first create\n            const events = await challengeFactory.queryFilter(filter, fromBlock, \&quot;latest\&quot;);\n            \n            for(let i = 0; i &lt; this.numChallenges; i++) {\n                const challengeAddress = events[i].args.challengeAddress; // or evt.args[1]\n                this.created.push(challengeAddress);\n            }&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;Error: no matching fragment (operation=\&quot;fragment\&quot;, info={ \&quot;args\&quot;: [ 1000, 5, 1000000000000000000, \&quot;desc 0\&quot;, false, \&quot;0x0000000000000000000000000000000000000000000000000000000000000000\&quot; ], \&quot;key\&quot;: \&quot;createChallenge\&quot; }, code=UNSUPPORTED_OPERATION, version=6.15.0)&quot;,&quot;estack&quot;:&quot;Error: no matching fragment (operation=\&quot;fragment\&quot;, info={ \&quot;args\&quot;: [ 1000, 5, 1000000000000000000, \&quot;desc 0\&quot;, false, \&quot;0x0000000000000000000000000000000000000000000000000000000000000000\&quot; ], \&quot;key\&quot;: \&quot;createChallenge\&quot; }, code=UNSUPPORTED_OPERATION, version=6.15.0)\n    at makeError (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/ethers/src.ts/utils/errors.ts:698:21)\n    at assert (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/ethers/src.ts/utils/errors.ts:719:25)\n    at getFragment (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/ethers/src.ts/contract/contract.ts:270:15)\n    at Proxy.createChallenge (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/ethers/src.ts/contract/contract.ts:350:26)\n    at Context.&lt;anonymous&gt; (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeFactoryNEW.test.js:163:51)&quot;},&quot;uuid&quot;:&quot;08a8eab7-e02d-4214-913d-593d3ef397dc&quot;,&quot;parentUUID&quot;:&quot;5e9f049e-3864-45b7-9de9-decb731526bc&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the first batch when count &lt; total&quot;,&quot;fullTitle&quot;:&quot;tests ChallengeFactory contract NEW ChallengeFactoryNew pagination should return the first batch when count &lt; total&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const start = 0;\nconst count = 3;\nconst list = await challengeFactory.getChallenges(start, count);\nexpect(list.length).to.equal(count);\n// first `count` addresses should match\nfor (let i = 0; i &lt; count; i++) {\n    expect(list[i]).to.equal(this.created[i]);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;be6f6319-ea21-4e58-a056-bc890720325c&quot;,&quot;parentUUID&quot;:&quot;5e9f049e-3864-45b7-9de9-decb731526bc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;should return entire list when count &gt;= total-start&quot;,&quot;fullTitle&quot;:&quot;tests ChallengeFactory contract NEW ChallengeFactoryNew pagination should return entire list when count &gt;= total-start&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const start = 2;\nconst count = 10;  // more than remaining\nconst list = await challengeFactory.getChallenges(start, count);\nexpect(list.length).to.equal(this.numChallenges - start);\nfor (let i = start; i &lt; this.numChallenges; i++) {\nexpect(list[i - start]).to.equal(this.created[i]);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ed5e50be-6cb9-4619-9b5e-313da7d3961c&quot;,&quot;parentUUID&quot;:&quot;5e9f049e-3864-45b7-9de9-decb731526bc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;should return empty array when start &gt;= total&quot;,&quot;fullTitle&quot;:&quot;tests ChallengeFactory contract NEW ChallengeFactoryNew pagination should return empty array when start &gt;= total&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const start = this.numChallenges;  // equals length\nconst count = 5;\nconst list = await challengeFactory.getChallenges(start, count);\nexpect(list.length).to.equal(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a0b794f2-05c9-49ba-81e4-9a6f60f2b595&quot;,&quot;parentUUID&quot;:&quot;5e9f049e-3864-45b7-9de9-decb731526bc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;should return empty if count is zero&quot;,&quot;fullTitle&quot;:&quot;tests ChallengeFactory contract NEW ChallengeFactoryNew pagination should return empty if count is zero&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const start = 1;\nconst count = 0;\nconst list = await challengeFactory.getChallenges(start, count);\nexpect(list.length).to.equal(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4ea59a96-7c4a-4752-8df4-9c8d969aa084&quot;,&quot;parentUUID&quot;:&quot;5e9f049e-3864-45b7-9de9-decb731526bc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;should return last element when start = total - 1 and count &gt;=1&quot;,&quot;fullTitle&quot;:&quot;tests ChallengeFactory contract NEW ChallengeFactoryNew pagination should return last element when start = total - 1 and count &gt;=1&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const start = this.numChallenges - 1;\nconst count = 5;\nconst list = await challengeFactory.getChallenges(start, count);\nexpect(list.length).to.equal(1);\nexpect(list[0]).to.equal(this.created[this.numChallenges - 1]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;419061c2-ef40-4e62-a136-e264406192d2&quot;,&quot;parentUUID&quot;:&quot;5e9f049e-3864-45b7-9de9-decb731526bc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;be6f6319-ea21-4e58-a056-bc890720325c&quot;,&quot;ed5e50be-6cb9-4619-9b5e-313da7d3961c&quot;,&quot;a0b794f2-05c9-49ba-81e4-9a6f60f2b595&quot;,&quot;4ea59a96-7c4a-4752-8df4-9c8d969aa084&quot;,&quot;419061c2-ef40-4e62-a136-e264406192d2&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;342fa6c2-76eb-4d86-bdfb-227b4b85cfb6&quot;,&quot;title&quot;:&quot;tests Challenge contract NEW&quot;,&quot;fullFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js&quot;,&quot;file&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;7ab6f10c-4f1f-4fe4-a3e4-c101267927b8&quot;,&quot;title&quot;:&quot;deployment&quot;,&quot;fullFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js&quot;,&quot;file&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;deployment\&quot;&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW deployment \&quot;before each\&quot; hook in \&quot;deployment\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;signers = await ethers.getSigners();\n//Token deployment\nconst DareWinToken = await ethers.getContractFactory(&#x27;DareWinNew&#x27;);\ntoken = await DareWinToken.deploy(signers[0].address);\nbid = ethers.parseUnits(\&quot;1000\&quot;, await token.decimals());&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;95c21453-7bb9-40ec-826d-2aba2e8273dc&quot;,&quot;parentUUID&quot;:&quot;7ab6f10c-4f1f-4fe4-a3e4-c101267927b8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should juste deploy the contract&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW deployment should juste deploy the contract&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;//Challenge Deployment\nconst Challenge = await ethers.getContractFactory(&#x27;ChallengeNew&#x27;); \nawait expect(\n    Challenge.deploy(signers[0].address, token.target, duration, maxPlayers, bid, description, signers[0].address, false, ethers.ZeroHash)\n).to.not.be.reverted&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;Error: incorrect number of arguments to constructor&quot;,&quot;estack&quot;:&quot;Error: incorrect number of arguments to constructor\n    at ContractFactory.getDeployTransaction (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/ethers/src.ts/contract/factory.ts:87:19)\n    at ContractFactory.deploy (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/ethers/src.ts/contract/factory.ts:105:31)\n    at Context.&lt;anonymous&gt; (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:260:27)&quot;},&quot;uuid&quot;:&quot;fee314be-13c0-4891-8c20-aca2a71733ff&quot;,&quot;parentUUID&quot;:&quot;7ab6f10c-4f1f-4fe4-a3e4-c101267927b8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should juste deploy the contract in Group mode&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW deployment should juste deploy the contract in Group mode&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const playersAllowed = [\n    [signers[0].address],\n    [signers[1].address],\n    [signers[2].address],\n    [signers[3].address],\n    [signers[4].address]\n]\nmerkleTree = StandardMerkleTree.of(playersAllowed, [\&quot;address\&quot;]);\nconst Challenge = await ethers.getContractFactory(&#x27;ChallengeNew&#x27;);\n//Challenge Deployment\nawait expect(\n    challenge = await Challenge.deploy(signers[0].address, token.target, duration, maxPlayers, bid, description, signers[0].address, true, merkleTree.root)\n).to.not.be.reverted&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;Error: incorrect number of arguments to constructor&quot;,&quot;estack&quot;:&quot;Error: incorrect number of arguments to constructor\n    at ContractFactory.getDeployTransaction (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/ethers/src.ts/contract/factory.ts:87:19)\n    at ContractFactory.deploy (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/ethers/src.ts/contract/factory.ts:105:31)\n    at Context.&lt;anonymous&gt; (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:280:45)&quot;},&quot;uuid&quot;:&quot;1e3895be-147e-407a-9185-9a6d3bde5988&quot;,&quot;parentUUID&quot;:&quot;7ab6f10c-4f1f-4fe4-a3e4-c101267927b8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not be possible to deploy with a feeReceiver address to 0&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW deployment should not be possible to deploy with a feeReceiver address to 0&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;//Challenge Deployment\nconst Challenge = await ethers.getContractFactory(&#x27;ChallengeNew&#x27;); \nawait expect(\n    Challenge.deploy(signers[0].address, token.target, duration, maxPlayers, bid, description, \&quot;0x0000000000000000000000000000000000000000\&quot;, false, ethers.ZeroHash)\n).to.be.revertedWith(\&quot;the feeReceiver cannot be address 0!\&quot;)&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;Error: incorrect number of arguments to constructor&quot;,&quot;estack&quot;:&quot;Error: incorrect number of arguments to constructor\n    at ContractFactory.getDeployTransaction (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/ethers/src.ts/contract/factory.ts:87:19)\n    at ContractFactory.deploy (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/ethers/src.ts/contract/factory.ts:105:31)\n    at Context.&lt;anonymous&gt; (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:289:27)&quot;},&quot;uuid&quot;:&quot;cd7ebf66-aa81-4d18-9ce2-1adb7a3f271f&quot;,&quot;parentUUID&quot;:&quot;7ab6f10c-4f1f-4fe4-a3e4-c101267927b8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;GROUP MODE : should not be possible to deploy if the merkle root is 0&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW deployment GROUP MODE : should not be possible to deploy if the merkle root is 0&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;//Challenge Deployment\nconst Challenge = await ethers.getContractFactory(&#x27;ChallengeNew&#x27;); \nawait expect(\n    Challenge.deploy(signers[0].address, token.target, duration, maxPlayers, bid, description, signers[0].address, true, ethers.ZeroHash)\n).to.be.revertedWith(\&quot;Merkle root required when groupMode is true\&quot;)&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;Error: incorrect number of arguments to constructor&quot;,&quot;estack&quot;:&quot;Error: incorrect number of arguments to constructor\n    at ContractFactory.getDeployTransaction (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/ethers/src.ts/contract/factory.ts:87:19)\n    at ContractFactory.deploy (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/ethers/src.ts/contract/factory.ts:105:31)\n    at Context.&lt;anonymous&gt; (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:298:27)&quot;},&quot;uuid&quot;:&quot;03754553-bd20-4ba4-a575-01bfd6a5c556&quot;,&quot;parentUUID&quot;:&quot;7ab6f10c-4f1f-4fe4-a3e4-c101267927b8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;fee314be-13c0-4891-8c20-aca2a71733ff&quot;,&quot;1e3895be-147e-407a-9185-9a6d3bde5988&quot;,&quot;cd7ebf66-aa81-4d18-9ce2-1adb7a3f271f&quot;,&quot;03754553-bd20-4ba4-a575-01bfd6a5c556&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:17,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;5d4a75b5-9fe2-481d-8f48-77960cb57657&quot;,&quot;title&quot;:&quot;gathering players state&quot;,&quot;fullFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js&quot;,&quot;file&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook for \&quot;should allow a player to join, and sends the money to the challenge contract correctly\&quot;&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW gathering players state \&quot;before each\&quot; hook for \&quot;should allow a player to join, and sends the money to the challenge contract correctly\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;({challenge, signers, bid, token} = await loadFixture(deployedChallengeFixtureBase));&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;Error: incorrect number of arguments to constructor&quot;,&quot;estack&quot;:&quot;Error: incorrect number of arguments to constructor\n    at ContractFactory.getDeployTransaction (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/ethers/src.ts/contract/factory.ts:87:19)\n    at ContractFactory.deploy (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/ethers/src.ts/contract/factory.ts:105:31)\n    at deployedChallengeFixtureBase (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:65:41)\n    at loadFixture (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/@nomicfoundation/hardhat-network-helpers/src/loadFixture.ts:59:18)\n    at Context.&lt;anonymous&gt; (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:313:49)&quot;},&quot;uuid&quot;:&quot;9427ba8d-a8ae-44da-baa0-f1685d1a1090&quot;,&quot;parentUUID&quot;:&quot;5d4a75b5-9fe2-481d-8f48-77960cb57657&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should allow a player to join, and sends the money to the challenge contract correctly&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW gathering players state should allow a player to join, and sends the money to the challenge contract correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { v, r, s, deadline } = await GetRSVsig(signers[0], token, bid, challenge);\nexpect(\n    await token.balanceOf(challenge)\n).to.equal(0)\nawait expect(\n    challenge.joinChallenge(deadline, v, r, s, [])\n)\n.to.not.be.reverted;\n\nexpect(\n    await token.balanceOf(challenge)\n).to.equal(bid)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9176354a-6e14-41b8-8b12-a7e3a389a30e&quot;,&quot;parentUUID&quot;:&quot;5d4a75b5-9fe2-481d-8f48-77960cb57657&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;FOR LINK MODE : should not allow any more participants to join if the max is already reached&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW gathering players state FOR LINK MODE : should not allow any more participants to join if the max is already reached&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { v: v1, r: r1, s: s1, deadline: deadline1 } = await GetRSVsig(signers[0], token, bid, challenge);\nconst { v: v2, r: r2, s: s2, deadline: deadline2 } = await GetRSVsig(signers[1], token, bid, challenge);\nconst { v: v3, r: r3, s: s3, deadline: deadline3 } = await GetRSVsig(signers[2], token, bid, challenge);\nconst { v: v4, r: r4, s: s4, deadline: deadline4 } = await GetRSVsig(signers[3], token, bid, challenge);\nconst { v: v5, r: r5, s: s5, deadline: deadline5 } = await GetRSVsig(signers[4], token, bid, challenge);\nconst { v: v6, r: r6, s: s6, deadline: deadline6 } = await GetRSVsig(signers[5], token, bid, challenge);\nawait challenge.joinChallenge(deadline1, v1, r1, s1, []);\nawait challenge.connect(signers[1]).joinChallenge(deadline2, v2, r2, s2, []);\nawait challenge.connect(signers[2]).joinChallenge(deadline3, v3, r3, s3, []);\nawait challenge.connect(signers[3]).joinChallenge(deadline4, v4, r4, s4, []);\nawait challenge.connect(signers[4]).joinChallenge(deadline5, v5, r5, s5, []);\nawait expect(\n    challenge.connect(signers[5]).joinChallenge(deadline6, v6, r6, s6, [])\n).to.be.revertedWith(\&quot;This challenge is already full\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;76226c81-171d-475a-b753-214d554b4333&quot;,&quot;parentUUID&quot;:&quot;5d4a75b5-9fe2-481d-8f48-77960cb57657&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;should not allow a participant to join twice&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW gathering players state should not allow a participant to join twice&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { v: v1, r: r1, s: s1, deadline: deadline1 } = await GetRSVsig(signers[0], token, bid, challenge);\nawait challenge.joinChallenge(deadline1, v1, r1, s1, []);\nawait expect(challenge.joinChallenge(deadline1, v1, r1, s1, [])).to.be.revertedWith(\&quot;You already joined\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1020dd63-c609-4297-85b5-b73dec2a253f&quot;,&quot;parentUUID&quot;:&quot;5d4a75b5-9fe2-481d-8f48-77960cb57657&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;should allow a player to withdraw from the challenge (before start), while letting the challenge start when required without issues. Money should be sent back to him&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW gathering players state should allow a player to withdraw from the challenge (before start), while letting the challenge start when required without issues. Money should be sent back to him&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//5 players join\nconst { v: v1, r: r1, s: s1, deadline: deadline1 } = await GetRSVsig(signers[0], token, bid, challenge);\nconst { v: v2, r: r2, s: s2, deadline: deadline2 } = await GetRSVsig(signers[1], token, bid, challenge);\nconst { v: v3, r: r3, s: s3, deadline: deadline3 } = await GetRSVsig(signers[2], token, bid, challenge);\nconst { v: v4, r: r4, s: s4, deadline: deadline4 } = await GetRSVsig(signers[3], token, bid, challenge);\nconst { v: v5, r: r5, s: s5, deadline: deadline5 } = await GetRSVsig(signers[4], token, bid, challenge);\nawait challenge.joinChallenge(deadline1, v1, r1, s1, []);\nawait challenge.connect(signers[1]).joinChallenge(deadline2, v2, r2, s2, []);\nawait challenge.connect(signers[2]).joinChallenge(deadline3, v3, r3, s3, []);\nawait challenge.connect(signers[3]).joinChallenge(deadline4, v4, r4, s4, []);\nawait challenge.connect(signers[4]).joinChallenge(deadline5, v5, r5, s5, []);\n//one player withdraws from challenge\nexpect(\n    await token.balanceOf(signers[2].address)\n).to.equal(0);\nawait challenge.connect(signers[2]).withdrawFromChallenge();\n//His balance should be 1000\nexpect(\n    await token.balanceOf(signers[2].address)\n).to.equal(bid);\n//Admin successfully starts challenge\nawait challenge.startChallenge();\nexpect(\n   await challenge.currentStatus()\n).to.equal(ChallengeStatus.OngoingChallenge);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b879dda7-808c-4aaa-971f-41dbef7f2967&quot;,&quot;parentUUID&quot;:&quot;5d4a75b5-9fe2-481d-8f48-77960cb57657&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;should not allow a player to withdraw from the challenge if he hasnt joined&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW gathering players state should not allow a player to withdraw from the challenge if he hasnt joined&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//try to withdraw without having joined, reverts\nawait expect(\n   challenge.withdrawFromChallenge()\n).to.be.revertedWith(\&quot;You have not joined the challenge.\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;740e2b23-4453-41e3-853d-b2571d9affe2&quot;,&quot;parentUUID&quot;:&quot;5d4a75b5-9fe2-481d-8f48-77960cb57657&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;should not allow a player to join, and then withdraw twice&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW gathering players state should not allow a player to join, and then withdraw twice&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { v: v1, r: r1, s: s1, deadline: deadline1 } = await GetRSVsig(signers[0], token, bid, challenge);\nawait challenge.joinChallenge(deadline1, v1, r1, s1, []);\nawait challenge.withdrawFromChallenge();\n//try to withdraw without having joined, reverts\nawait expect(\n   challenge.withdrawFromChallenge()\n).to.be.revertedWith(\&quot;You have not joined the challenge.\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;66ef25c9-b0b3-4d3f-8ac1-318e14146b62&quot;,&quot;parentUUID&quot;:&quot;5d4a75b5-9fe2-481d-8f48-77960cb57657&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;should allow a player to join, withdraw and then join again the challenge&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW gathering players state should allow a player to join, withdraw and then join again the challenge&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//Needed twice, because of the nonce\nconst { v: v1, r: r1, s: s1, deadline: deadline1 } = await GetRSVsig(signers[0], token, bid, challenge);\n\nawait challenge.joinChallenge(deadline1, v1, r1, s1, []);\nawait challenge.withdrawFromChallenge();\nconst { v: v2, r: r2, s: s2, deadline: deadline2 } = await GetRSVsig(signers[0], token, bid, challenge);\nawait expect(\n   challenge.joinChallenge(deadline2, v2, r2, s2, [])\n).to.not.be.reverted&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0e28632e-9728-4228-9176-8b75c7e1669f&quot;,&quot;parentUUID&quot;:&quot;5d4a75b5-9fe2-481d-8f48-77960cb57657&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;should not allow to start the challenge if there is less than 2 players&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW gathering players state should not allow to start the challenge if there is less than 2 players&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { v: v1, r: r1, s: s1, deadline: deadline1 } = await GetRSVsig(signers[0], token, bid, challenge);\nawait challenge.joinChallenge(deadline1, v1, r1, s1, []);\nawait expect(\n    challenge.startChallenge()\n).to.be.revertedWith(\&quot;Not enough players to start the challenge\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d4b63f02-055c-48ce-90d1-8b234869cd5c&quot;,&quot;parentUUID&quot;:&quot;5d4a75b5-9fe2-481d-8f48-77960cb57657&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;should allow the admin to go to the next state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW gathering players state should allow the admin to go to the next state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { v: v1, r: r1, s: s1, deadline: deadline1 } = await GetRSVsig(signers[0], token, bid, challenge);\nconst { v: v2, r: r2, s: s2, deadline: deadline2 } = await GetRSVsig(signers[1], token, bid, challenge);\nawait challenge.joinChallenge(deadline1, v1, r1, s1, []);\nawait challenge.connect(signers[1]).joinChallenge(deadline2, v2, r2, s2, []);\nawait challenge.startChallenge();\nexpect(\n   await challenge.currentStatus()\n).to.equal(ChallengeStatus.OngoingChallenge);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ac9eafac-562e-411a-978e-55429f261411&quot;,&quot;parentUUID&quot;:&quot;5d4a75b5-9fe2-481d-8f48-77960cb57657&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;9176354a-6e14-41b8-8b12-a7e3a389a30e&quot;,&quot;76226c81-171d-475a-b753-214d554b4333&quot;,&quot;1020dd63-c609-4297-85b5-b73dec2a253f&quot;,&quot;b879dda7-808c-4aaa-971f-41dbef7f2967&quot;,&quot;740e2b23-4453-41e3-853d-b2571d9affe2&quot;,&quot;66ef25c9-b0b3-4d3f-8ac1-318e14146b62&quot;,&quot;0e28632e-9728-4228-9176-8b75c7e1669f&quot;,&quot;d4b63f02-055c-48ce-90d1-8b234869cd5c&quot;,&quot;ac9eafac-562e-411a-978e-55429f261411&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;e802a96c-293a-4cc2-8c22-716228893b18&quot;,&quot;title&quot;:&quot;gathering players state (FOR GROUP MODE SPECIFIC TESTS)&quot;,&quot;fullFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js&quot;,&quot;file&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook for \&quot;FOR GROUP MODE : should still allow players to join\&quot;&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW gathering players state (FOR GROUP MODE SPECIFIC TESTS) \&quot;before each\&quot; hook for \&quot;FOR GROUP MODE : should still allow players to join\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:29,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;//Deploying in group mode\n({challenge, signers, bid, token, merkleTree} = await loadFixture(groupModeFixture));&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;Error: incorrect number of arguments to constructor&quot;,&quot;estack&quot;:&quot;Error: incorrect number of arguments to constructor\n    at ContractFactory.getDeployTransaction (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/ethers/src.ts/contract/factory.ts:87:19)\n    at ContractFactory.deploy (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/ethers/src.ts/contract/factory.ts:105:31)\n    at deployedChallengeFixtureBase (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:79:41)\n    at groupModeFixture (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:460:20)\n    at loadFixture (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/@nomicfoundation/hardhat-network-helpers/src/loadFixture.ts:59:18)\n    at Context.&lt;anonymous&gt; (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:465:61)&quot;},&quot;uuid&quot;:&quot;2154d2ec-ddc2-48ab-b794-a2bf4ad70e75&quot;,&quot;parentUUID&quot;:&quot;e802a96c-293a-4cc2-8c22-716228893b18&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;FOR GROUP MODE : should still allow players to join&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW gathering players state (FOR GROUP MODE SPECIFIC TESTS) FOR GROUP MODE : should still allow players to join&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { v: v1, r: r1, s: s1, deadline: deadline1 } = await GetRSVsig(signers[0], token, bid, challenge);\nconst { v: v2, r: r2, s: s2, deadline: deadline2 } = await GetRSVsig(signers[1], token, bid, challenge);\nconst { v: v3, r: r3, s: s3, deadline: deadline3 } = await GetRSVsig(signers[2], token, bid, challenge);\nconst { v: v4, r: r4, s: s4, deadline: deadline4 } = await GetRSVsig(signers[3], token, bid, challenge);\n//Get merkle proof for each player\nconst proof1 = merkleTree.getProof([signers[0].address]);\nconst proof2 = merkleTree.getProof([signers[1].address]);\nconst proof3 = merkleTree.getProof([signers[2].address]);\nconst proof4 = merkleTree.getProof([signers[3].address]);\n//join with proof\nawait expect(\n    challenge.connect(signers[0]).joinChallenge(deadline1, v1, r1, s1, proof1)\n).to.not.be.reverted;\nawait expect(\n    challenge.connect(signers[1]).joinChallenge(deadline2, v2, r2, s2, proof2)\n).to.not.be.reverted;\nawait expect(\n    challenge.connect(signers[2]).joinChallenge(deadline3, v3, r3, s3, proof3)\n).to.not.be.reverted;\nawait expect(\n    challenge.connect(signers[3]).joinChallenge(deadline4, v4, r4, s4, proof4)\n).to.not.be.reverted;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1f62fe27-3484-4f97-b42b-a2cee2ff66ad&quot;,&quot;parentUUID&quot;:&quot;e802a96c-293a-4cc2-8c22-716228893b18&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;FOR GROUP MODE : should not allow a player to join if he is not among those chosen by the admin at creation&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW gathering players state (FOR GROUP MODE SPECIFIC TESTS) FOR GROUP MODE : should not allow a player to join if he is not among those chosen by the admin at creation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { v: v1, r: r1, s: s1, deadline: deadline1 } = await GetRSVsig(signers[5], token, bid, challenge);\nconst proof1 = merkleTree.getProof([signers[0].address]);\nawait expect(\n    challenge.connect(signers[5]).joinChallenge(deadline1, v1, r1, s1, proof1)\n).to.be.revertedWith(\&quot;You are not allowed to join this challenge.\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;35073f8e-0162-4897-865b-51d1467d4b8a&quot;,&quot;parentUUID&quot;:&quot;e802a96c-293a-4cc2-8c22-716228893b18&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;1f62fe27-3484-4f97-b42b-a2cee2ff66ad&quot;,&quot;35073f8e-0162-4897-865b-51d1467d4b8a&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;c0383e3c-7700-4205-b440-d36abac67bc5&quot;,&quot;title&quot;:&quot;ongoing challenge state&quot;,&quot;fullFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js&quot;,&quot;file&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook for \&quot;state should be \&quot;OngoingChallenge\&quot; during the challenge. \&quot;&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW ongoing challenge state \&quot;before each\&quot; hook for \&quot;state should be \&quot;OngoingChallenge\&quot; during the challenge. \&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:21,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;({challenge, signers} = await loadFixture(OngoingChallengeFixture));&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;Error: incorrect number of arguments to constructor&quot;,&quot;estack&quot;:&quot;Error: incorrect number of arguments to constructor\n    at ContractFactory.getDeployTransaction (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/ethers/src.ts/contract/factory.ts:87:19)\n    at ContractFactory.deploy (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/ethers/src.ts/contract/factory.ts:105:31)\n    at deployedChallengeFixtureBase (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:65:41)\n    at OngoingChallengeFixture (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:95:52)\n    at loadFixture (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/@nomicfoundation/hardhat-network-helpers/src/loadFixture.ts:59:18)\n    at Context.&lt;anonymous&gt; (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:512:37)&quot;},&quot;uuid&quot;:&quot;2a6b308c-a019-4571-92f8-d6081b8803b3&quot;,&quot;parentUUID&quot;:&quot;c0383e3c-7700-4205-b440-d36abac67bc5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;state should be \&quot;OngoingChallenge\&quot; during the challenge. &quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW ongoing challenge state state should be \&quot;OngoingChallenge\&quot; during the challenge. &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;expect(await challenge.currentStatus()).to.equal(ChallengeStatus.OngoingChallenge);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a1ed7d7c-cdee-4454-b5b6-da7a6bb7e6b8&quot;,&quot;parentUUID&quot;:&quot;c0383e3c-7700-4205-b440-d36abac67bc5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;a1ed7d7c-cdee-4454-b5b6-da7a6bb7e6b8&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;54f32849-e072-4f5f-ab0d-ecfbafba6c83&quot;,&quot;title&quot;:&quot;voting for winner state&quot;,&quot;fullFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js&quot;,&quot;file&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook for \&quot;should allow a player to vote (for another player).\&quot;&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW voting for winner state \&quot;before each\&quot; hook for \&quot;should allow a player to vote (for another player).\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:21,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;({challenge, signers} = await loadFixture(VotingForWinnerFixture));&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;Error: incorrect number of arguments to constructor&quot;,&quot;estack&quot;:&quot;Error: incorrect number of arguments to constructor\n    at ContractFactory.getDeployTransaction (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/ethers/src.ts/contract/factory.ts:87:19)\n    at ContractFactory.deploy (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/ethers/src.ts/contract/factory.ts:105:31)\n    at deployedChallengeFixtureBase (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:65:41)\n    at OngoingChallengeFixture (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:95:52)\n    at VotingForWinnerFixture (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:120:52)\n    at loadFixture (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/@nomicfoundation/hardhat-network-helpers/src/loadFixture.ts:59:18)\n    at Context.&lt;anonymous&gt; (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:527:37)&quot;},&quot;uuid&quot;:&quot;d19c6ce7-9359-4808-ad0b-7430295d2bc9&quot;,&quot;parentUUID&quot;:&quot;54f32849-e072-4f5f-ab0d-ecfbafba6c83&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should allow a player to vote (for another player).&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW voting for winner state should allow a player to vote (for another player).&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n    challenge.voteForWinner(signers[1].address)\n).to.not.be.reverted;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1a7f9f3a-62b3-44fb-a6da-4addf761b7e9&quot;,&quot;parentUUID&quot;:&quot;54f32849-e072-4f5f-ab0d-ecfbafba6c83&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;should not allow a non player to vote&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW voting for winner state should not allow a non player to vote&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n   challenge.connect(signers[5]).voteForWinner(signers[1].address)\n).to.be.revertedWith(\&quot;You are not a player. You cannot vote for winner.\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1b0f9125-5e0e-4763-b0da-04cd8ffa41fa&quot;,&quot;parentUUID&quot;:&quot;54f32849-e072-4f5f-ab0d-ecfbafba6c83&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;should not allow a player to vote twice&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW voting for winner state should not allow a player to vote twice&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await challenge.voteForWinner(signers[1].address);\nawait expect(\n   challenge.voteForWinner(signers[1].address)\n).to.be.revertedWith(\&quot;You have already voted.\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;74fd4eaa-6afe-4c78-84fe-6d604fc64caa&quot;,&quot;parentUUID&quot;:&quot;54f32849-e072-4f5f-ab0d-ecfbafba6c83&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;should not allow to go to next state (ChallengeWon) if everyone has not voted (and minimum delay hasn&#x27;t passed)&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW voting for winner state should not allow to go to next state (ChallengeWon) if everyone has not voted (and minimum delay hasn&#x27;t passed)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await challenge.voteForWinner(signers[1].address)\nawait challenge.connect(signers[1]).voteForWinner(signers[1].address)\nawait expect(\n   challenge.endWinnerVote()\n).to.be.revertedWith(\&quot;Not all player have voted for a winner yet (and minimum delay has not passed)\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ce7c559b-0d5a-4f9a-b96c-8f63e421aff7&quot;,&quot;parentUUID&quot;:&quot;54f32849-e072-4f5f-ab0d-ecfbafba6c83&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;should allow ANYONE to go to next state (ChallengeWon) if everyone has not voted but minimum delay has passed&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW voting for winner state should allow ANYONE to go to next state (ChallengeWon) if everyone has not voted but minimum delay has passed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await challenge.voteForWinner(signers[1].address)\nawait challenge.connect(signers[1]).voteForWinner(signers[1].address)\n//Pass enough time\nawait time.increase(votingDelay);\nawait expect(\n   challenge.connect(signers[2]).endWinnerVote()\n).not.to.be.reverted;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;02255970-14af-4a49-af44-7ebbe1ad0c58&quot;,&quot;parentUUID&quot;:&quot;54f32849-e072-4f5f-ab0d-ecfbafba6c83&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;should allow ANYONE to go to next state (ChallengeWon) when everyone voted&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW voting for winner state should allow ANYONE to go to next state (ChallengeWon) when everyone voted&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await challenge.voteForWinner(signers[1].address)\nawait challenge.connect(signers[1]).voteForWinner(signers[1].address) \nawait challenge.connect(signers[2]).voteForWinner(signers[2].address) \nawait challenge.connect(signers[3]).voteForWinner(signers[1].address) \nawait challenge.connect(signers[4]).voteForWinner(signers[2].address) \n//Any player can end vote, because everyone has voted\nawait challenge.connect(signers[1]).endWinnerVote();\nexpect(await challenge.currentStatus()).to.equal(ChallengeStatus.ChallengeWon);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;abb8ed59-a752-4466-9331-16bbe06fe84c&quot;,&quot;parentUUID&quot;:&quot;54f32849-e072-4f5f-ab0d-ecfbafba6c83&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;should not allow ANYONE to go to next state (ChallengeWon) if no one has voted (even if time has passed)&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW voting for winner state should not allow ANYONE to go to next state (ChallengeWon) if no one has voted (even if time has passed)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//Pass enough time\n            await time.increase(votingDelay);\n            //Any player can end vote, because everyone has voted\n            await expect(challenge.connect(signers[1]).endWinnerVote()).to.be.revertedWith(&#x27;Not allowed in this state&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fd0aecab-7e0e-4a94-acce-aa07625b3dcd&quot;,&quot;parentUUID&quot;:&quot;54f32849-e072-4f5f-ab0d-ecfbafba6c83&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;1a7f9f3a-62b3-44fb-a6da-4addf761b7e9&quot;,&quot;1b0f9125-5e0e-4763-b0da-04cd8ffa41fa&quot;,&quot;74fd4eaa-6afe-4c78-84fe-6d604fc64caa&quot;,&quot;ce7c559b-0d5a-4f9a-b96c-8f63e421aff7&quot;,&quot;02255970-14af-4a49-af44-7ebbe1ad0c58&quot;,&quot;abb8ed59-a752-4466-9331-16bbe06fe84c&quot;,&quot;fd0aecab-7e0e-4a94-acce-aa07625b3dcd&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;d9579c2e-524e-47b0-98dd-f12f672e1edd&quot;,&quot;title&quot;:&quot;challenge won state&quot;,&quot;fullFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js&quot;,&quot;file&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook for \&quot;winner should be able to retrieve prize when endWinnerVote() is triggered\&quot;&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW challenge won state \&quot;before each\&quot; hook for \&quot;winner should be able to retrieve prize when endWinnerVote() is triggered\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:22,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;({challenge, signers, bid, token} = await loadFixture(VotingForWinnerFixture));&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;Error: incorrect number of arguments to constructor&quot;,&quot;estack&quot;:&quot;Error: incorrect number of arguments to constructor\n    at ContractFactory.getDeployTransaction (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/ethers/src.ts/contract/factory.ts:87:19)\n    at ContractFactory.deploy (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/ethers/src.ts/contract/factory.ts:105:31)\n    at deployedChallengeFixtureBase (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:65:41)\n    at OngoingChallengeFixture (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:95:52)\n    at VotingForWinnerFixture (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:120:52)\n    at loadFixture (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/@nomicfoundation/hardhat-network-helpers/src/loadFixture.ts:59:18)\n    at Context.&lt;anonymous&gt; (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:602:49)&quot;},&quot;uuid&quot;:&quot;6886b1fc-a588-4b6b-b1e3-a33e15080b97&quot;,&quot;parentUUID&quot;:&quot;d9579c2e-524e-47b0-98dd-f12f672e1edd&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;winner should be able to retrieve prize when endWinnerVote() is triggered&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW challenge won state winner should be able to retrieve prize when endWinnerVote() is triggered&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//Players voting\nawait challenge.voteForWinner(signers[1].address)\nawait challenge.connect(signers[1]).voteForWinner(signers[2].address) \nawait challenge.connect(signers[2]).voteForWinner(signers[2].address) \nawait challenge.connect(signers[3]).voteForWinner(signers[1].address) \nawait challenge.connect(signers[4]).voteForWinner(signers[2].address) \n//Check balance before\nconst balanceBefore = await token.balanceOf(signers[2].address);\n//End vote\nawait challenge.endWinnerVote();\nawait challenge.connect(signers[2]).withdrawPrize();\n//Check balance after\nconst balanceAfter = await token.balanceOf(signers[2].address);\nconst diff = balanceAfter - balanceBefore;\nconst expectedDiff = bid*5n - 5n*bid*bronze/100n;\n// const expectedDiff = bid*5n;\n//Difference should be equal to cash prize won\nexpect(diff).to.equal(expectedDiff); // substract fees too&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;114fbe1e-edcb-4c49-afbe-9b27a5c576a5&quot;,&quot;parentUUID&quot;:&quot;d9579c2e-524e-47b0-98dd-f12f672e1edd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;winner should NOT be able to retrieve prize multiple times&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW challenge won state winner should NOT be able to retrieve prize multiple times&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//Players voting\nawait challenge.voteForWinner(signers[1].address)\nawait challenge.connect(signers[1]).voteForWinner(signers[2].address) \nawait challenge.connect(signers[2]).voteForWinner(signers[2].address) \nawait challenge.connect(signers[3]).voteForWinner(signers[1].address) \nawait challenge.connect(signers[4]).voteForWinner(signers[2].address) \n//End vote\nawait challenge.endWinnerVote();\nawait challenge.connect(signers[2]).withdrawPrize();\nawait expect(\n    challenge.connect(signers[2]).withdrawPrize()\n).to.be.revertedWith(\&quot;You have already withdrawn your prize\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0c24ef83-594e-40c7-9f88-325c4b680e53&quot;,&quot;parentUUID&quot;:&quot;d9579c2e-524e-47b0-98dd-f12f672e1edd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;When there is a tie, should allow both winners to receive prize&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW challenge won state When there is a tie, should allow both winners to receive prize&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//Players voting\nawait challenge.voteForWinner(signers[2].address)\nawait challenge.connect(signers[1]).voteForWinner(signers[1].address)\nawait challenge.connect(signers[2]).voteForWinner(signers[2].address)\nawait challenge.connect(signers[3]).voteForWinner(signers[1].address)\nawait challenge.connect(signers[4]).voteForWinner(signers[4].address)\n//Check balance before for both winners\nconst balanceBefore1 = await token.balanceOf(signers[1].address);\nconst balanceBefore2 = await token.balanceOf(signers[2].address);\n//End vote\nawait challenge.endWinnerVote();\nawait challenge.connect(signers[1]).withdrawPrize();\n//Check balance after (winner1)\nconst balanceAfter1 = await token.balanceOf(signers[1].address);\nconst diff1 = balanceAfter1 - balanceBefore1;\nconst expectedDiff1 = bid*5n/2n - bid*5n/2n*gold/100n;\nexpect(\n    diff1\n).to.equal(expectedDiff1);\nawait challenge.connect(signers[2]).withdrawPrize();\n//Check balance after (winner2)\nconst balanceAfter2 = await token.balanceOf(signers[2].address);\nconst diff2 = balanceAfter2 - balanceBefore2;\nconst expectedDiff2 = bid*5n/2n - bid*5n/2n*bronze/100n;\nexpect(\n    diff2\n).to.equal(expectedDiff2); //substract fees too&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5d084484-2c11-4d82-bf66-423bebf8103b&quot;,&quot;parentUUID&quot;:&quot;d9579c2e-524e-47b0-98dd-f12f672e1edd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;if more tokens (signers[1] gold tier here), winner should receive more tokens&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW challenge won state if more tokens (signers[1] gold tier here), winner should receive more tokens&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//Players voting\nawait challenge.voteForWinner(signers[1].address)\nawait challenge.connect(signers[1]).voteForWinner(signers[1].address) \nawait challenge.connect(signers[2]).voteForWinner(signers[1].address) \nawait challenge.connect(signers[3]).voteForWinner(signers[0].address) \nawait challenge.connect(signers[4]).voteForWinner(signers[2].address) \n//Check balance before\nconst balanceBefore = await token.balanceOf(signers[1].address);\n//End vote\nawait challenge.endWinnerVote();\nawait challenge.connect(signers[1]).withdrawPrize();\n//Check balance after\nconst balanceAfter = await token.balanceOf(signers[1].address);\nconst diff = balanceAfter - balanceBefore;\nconst expectedDiff = bid*5n - 5n*bid*gold/100n;\n//Difference should be equal to cash prize won\nexpect(diff).to.equal(expectedDiff); // substract fees too&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f681c3bb-7967-4b08-b0df-2a08556f3889&quot;,&quot;parentUUID&quot;:&quot;d9579c2e-524e-47b0-98dd-f12f672e1edd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;fee receiver should receive half of the fees (the rest is burnt)&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW challenge won state fee receiver should receive half of the fees (the rest is burnt)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//Players voting\nawait challenge.voteForWinner(signers[2].address)\nawait challenge.connect(signers[1]).voteForWinner(signers[2].address)\nawait challenge.connect(signers[2]).voteForWinner(signers[2].address)\nawait challenge.connect(signers[3]).voteForWinner(signers[1].address)\nawait challenge.connect(signers[4]).voteForWinner(signers[4].address)\nconst balanceBefore = await token.balanceOf(signers[0].address);\n//End vote\nawait challenge.endWinnerVote();\nawait challenge.connect(signers[2]).withdrawPrize();\nconst balanceAfter = await token.balanceOf(signers[0].address);\nconst diff = balanceAfter - balanceBefore;\nconst expectedFeesReceived = 5n*bid/2n*bronze/100n;\n\nexpect(\n    diff\n).to.equal(expectedFeesReceived);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c8706455-0a9c-4937-ac24-6a0c0cfae063&quot;,&quot;parentUUID&quot;:&quot;d9579c2e-524e-47b0-98dd-f12f672e1edd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;half of the fees should have been burnt&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW challenge won state half of the fees should have been burnt&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//Players voting\nawait challenge.voteForWinner(signers[0].address)\nawait challenge.connect(signers[1]).voteForWinner(signers[0].address)\nawait challenge.connect(signers[2]).voteForWinner(signers[2].address)\nawait challenge.connect(signers[3]).voteForWinner(signers[1].address)\nawait challenge.connect(signers[4]).voteForWinner(signers[4].address)\nconst initialTotalSupply = await token.totalSupply();\n//End vote\nawait challenge.endWinnerVote();\nawait challenge.connect(signers[0]).withdrawPrize();\nconst finalTotalSupply = await token.totalSupply();\nconst diff = initialTotalSupply - finalTotalSupply;\nconst expectedBurntAmount = bid*5n/2n*platinum/100n;\n\nexpect(\n    diff\n).to.equal(expectedBurntAmount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4fa41e96-827f-4bd7-aeb3-2d8931508389&quot;,&quot;parentUUID&quot;:&quot;d9579c2e-524e-47b0-98dd-f12f672e1edd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;114fbe1e-edcb-4c49-afbe-9b27a5c576a5&quot;,&quot;0c24ef83-594e-40c7-9f88-325c4b680e53&quot;,&quot;5d084484-2c11-4d82-bf66-423bebf8103b&quot;,&quot;f681c3bb-7967-4b08-b0df-2a08556f3889&quot;,&quot;c8706455-0a9c-4937-ac24-6a0c0cfae063&quot;,&quot;4fa41e96-827f-4bd7-aeb3-2d8931508389&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;36534495-5fb8-4124-8239-4de704e670b1&quot;,&quot;title&quot;:&quot;Owner functions&quot;,&quot;fullFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js&quot;,&quot;file&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should not allow not admin player to go to OngoingChallenge state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW Owner functions should not allow not admin player to go to OngoingChallenge state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:21,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const {challenge, signers} = await loadFixture(deployedChallengeFixtureBase);\nawait expect(\n   challenge.connect(signers[1]).startChallenge()\n).to.be.revertedWithCustomError(challenge, \&quot;OwnableUnauthorizedAccount\&quot;).withArgs(signers[1].address);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;Error: incorrect number of arguments to constructor&quot;,&quot;estack&quot;:&quot;Error: incorrect number of arguments to constructor\n    at ContractFactory.getDeployTransaction (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/ethers/src.ts/contract/factory.ts:87:19)\n    at ContractFactory.deploy (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/ethers/src.ts/contract/factory.ts:105:31)\n    at deployedChallengeFixtureBase (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:65:41)\n    at loadFixture (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/@nomicfoundation/hardhat-network-helpers/src/loadFixture.ts:59:18)\n    at Context.&lt;anonymous&gt; (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:767:42)&quot;},&quot;uuid&quot;:&quot;1af3495b-5ceb-42f8-878b-c50774b75532&quot;,&quot;parentUUID&quot;:&quot;36534495-5fb8-4124-8239-4de704e670b1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;1af3495b-5ceb-42f8-878b-c50774b75532&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:21,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;84d2972d-a7d5-4456-a0c0-e4a2063b99a0&quot;,&quot;title&quot;:&quot;State functions availability&quot;,&quot;fullFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js&quot;,&quot;file&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f558be08-9377-4cf2-8790-70a15aeaf384&quot;,&quot;title&quot;:&quot;state GatheringPlayers&quot;,&quot;fullFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js&quot;,&quot;file&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook for \&quot;should not allow voteForWinner() in GatheringPlayers state\&quot;&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW State functions availability state GatheringPlayers \&quot;before each\&quot; hook for \&quot;should not allow voteForWinner() in GatheringPlayers state\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:21,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;({challenge, signers} = await loadFixture(deployedChallengeFixtureBase));&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;Error: incorrect number of arguments to constructor&quot;,&quot;estack&quot;:&quot;Error: incorrect number of arguments to constructor\n    at ContractFactory.getDeployTransaction (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/ethers/src.ts/contract/factory.ts:87:19)\n    at ContractFactory.deploy (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/ethers/src.ts/contract/factory.ts:105:31)\n    at deployedChallengeFixtureBase (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:65:41)\n    at loadFixture (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/@nomicfoundation/hardhat-network-helpers/src/loadFixture.ts:59:18)\n    at Context.&lt;anonymous&gt; (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:783:41)&quot;},&quot;uuid&quot;:&quot;46cec289-8375-43dc-8593-5bd0e95928b8&quot;,&quot;parentUUID&quot;:&quot;f558be08-9377-4cf2-8790-70a15aeaf384&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should not allow voteForWinner() in GatheringPlayers state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW State functions availability state GatheringPlayers should not allow voteForWinner() in GatheringPlayers state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n    challenge.voteForWinner(signers[1].address)\n).to.be.revertedWith(\&quot;Not allowed in this state\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;84b30fbd-66a4-4022-a8bb-98bb72b8cafb&quot;,&quot;parentUUID&quot;:&quot;f558be08-9377-4cf2-8790-70a15aeaf384&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;should not allow endWinnerVote() in GatheringPlayers state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW State functions availability state GatheringPlayers should not allow endWinnerVote() in GatheringPlayers state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n    challenge.endWinnerVote()\n).to.be.revertedWith(\&quot;Not allowed in this state\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5604c481-6f21-4ebe-9cd3-f3cc910c56db&quot;,&quot;parentUUID&quot;:&quot;f558be08-9377-4cf2-8790-70a15aeaf384&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;should not allow withdrawPrize() in GatheringPlayers state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW State functions availability state GatheringPlayers should not allow withdrawPrize() in GatheringPlayers state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n    challenge.withdrawPrize()\n).to.be.revertedWith(\&quot;Not allowed in this state\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;57894cbb-ae03-47a7-acfd-4ff83ab8038e&quot;,&quot;parentUUID&quot;:&quot;f558be08-9377-4cf2-8790-70a15aeaf384&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;84b30fbd-66a4-4022-a8bb-98bb72b8cafb&quot;,&quot;5604c481-6f21-4ebe-9cd3-f3cc910c56db&quot;,&quot;57894cbb-ae03-47a7-acfd-4ff83ab8038e&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;fc937625-a34e-4e8e-adaf-a417275df7d6&quot;,&quot;title&quot;:&quot;state OngoingChallenge&quot;,&quot;fullFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js&quot;,&quot;file&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook for \&quot;should not allow joinChallenge() in OngoingChallenge state\&quot;&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW State functions availability state OngoingChallenge \&quot;before each\&quot; hook for \&quot;should not allow joinChallenge() in OngoingChallenge state\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;({challenge, signers, bid, token} = await loadFixture(OngoingChallengeFixture));&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;Error: incorrect number of arguments to constructor&quot;,&quot;estack&quot;:&quot;Error: incorrect number of arguments to constructor\n    at ContractFactory.getDeployTransaction (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/ethers/src.ts/contract/factory.ts:87:19)\n    at ContractFactory.deploy (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/ethers/src.ts/contract/factory.ts:105:31)\n    at deployedChallengeFixtureBase (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:65:41)\n    at OngoingChallengeFixture (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:95:52)\n    at loadFixture (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/@nomicfoundation/hardhat-network-helpers/src/loadFixture.ts:59:18)\n    at Context.&lt;anonymous&gt; (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:810:53)&quot;},&quot;uuid&quot;:&quot;a400c6c1-286d-4b22-8d52-21b2a5cb2727&quot;,&quot;parentUUID&quot;:&quot;fc937625-a34e-4e8e-adaf-a417275df7d6&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should not allow joinChallenge() in OngoingChallenge state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW State functions availability state OngoingChallenge should not allow joinChallenge() in OngoingChallenge state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { v: v1, r: r1, s: s1, deadline: deadline1 } = await GetRSVsig(signers[0], token, bid, challenge);\nawait expect(\n    challenge.joinChallenge(deadline1, v1, r1, s1, [])\n).to.be.revertedWith(\&quot;Not allowed in this state\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8228c72d-2ed4-438d-98ae-23a4c7e385cb&quot;,&quot;parentUUID&quot;:&quot;fc937625-a34e-4e8e-adaf-a417275df7d6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;should not allow withdrawFromChallenge() in OngoingChallenge state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW State functions availability state OngoingChallenge should not allow withdrawFromChallenge() in OngoingChallenge state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n    challenge.withdrawFromChallenge()\n).to.be.revertedWith(\&quot;Not allowed in this state\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;221209ba-8ab3-473d-8fa6-2835d6866be0&quot;,&quot;parentUUID&quot;:&quot;fc937625-a34e-4e8e-adaf-a417275df7d6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;should not allow startChallenge() in OngoingChallenge state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW State functions availability state OngoingChallenge should not allow startChallenge() in OngoingChallenge state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n    challenge.startChallenge()\n).to.be.revertedWith(\&quot;Not allowed in this state\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5dc477f2-daf0-422d-b4aa-96dc2ba4807e&quot;,&quot;parentUUID&quot;:&quot;fc937625-a34e-4e8e-adaf-a417275df7d6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;should not allow voteForWinner() in OngoingChallenge state (if the challenge is not over)&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW State functions availability state OngoingChallenge should not allow voteForWinner() in OngoingChallenge state (if the challenge is not over)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n    challenge.voteForWinner(signers[1].address)\n).to.be.revertedWith(\&quot;You are not allowed to vote now\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a1c55fdc-d5ed-4687-9870-99174ac1168c&quot;,&quot;parentUUID&quot;:&quot;fc937625-a34e-4e8e-adaf-a417275df7d6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;should allow voteForWinner() in OngoingChallenge state (if the challenge is over). state should become \&quot;VotingForWinner\&quot; after first player votes at the end of the challenge. &quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW State functions availability state OngoingChallenge should allow voteForWinner() in OngoingChallenge state (if the challenge is over). state should become \&quot;VotingForWinner\&quot; after first player votes at the end of the challenge. &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;expect(await challenge.currentStatus()).to.equal(ChallengeStatus.OngoingChallenge);\n//wait for challenge to end\nawait time.increase(duration);\n\n//should be allowed\nawait expect(\n    challenge.voteForWinner(signers[1].address)\n).to.not.be.reverted;\n//State should have changed\nexpect(await challenge.currentStatus()).to.equal(ChallengeStatus.VotingForWinner);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;93abe0dd-4f07-4d45-815d-849a088608b8&quot;,&quot;parentUUID&quot;:&quot;fc937625-a34e-4e8e-adaf-a417275df7d6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;should not allow endWinnerVote() in OngoingChallenge state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW State functions availability state OngoingChallenge should not allow endWinnerVote() in OngoingChallenge state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n    challenge.endWinnerVote()\n).to.be.revertedWith(\&quot;Not allowed in this state\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;acc99350-3e0c-401c-84e1-2f0eac48ae7b&quot;,&quot;parentUUID&quot;:&quot;fc937625-a34e-4e8e-adaf-a417275df7d6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;should not allow withdrawPrize() in OnGoingChallenge state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW State functions availability state OngoingChallenge should not allow withdrawPrize() in OnGoingChallenge state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n    challenge.withdrawPrize()\n).to.be.revertedWith(\&quot;Not allowed in this state\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4317273e-35a4-419b-a327-a5cebce7bfd9&quot;,&quot;parentUUID&quot;:&quot;fc937625-a34e-4e8e-adaf-a417275df7d6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;8228c72d-2ed4-438d-98ae-23a4c7e385cb&quot;,&quot;221209ba-8ab3-473d-8fa6-2835d6866be0&quot;,&quot;5dc477f2-daf0-422d-b4aa-96dc2ba4807e&quot;,&quot;a1c55fdc-d5ed-4687-9870-99174ac1168c&quot;,&quot;93abe0dd-4f07-4d45-815d-849a088608b8&quot;,&quot;acc99350-3e0c-401c-84e1-2f0eac48ae7b&quot;,&quot;4317273e-35a4-419b-a327-a5cebce7bfd9&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;b39663ba-a38a-4811-a3a7-ff14cc738b5b&quot;,&quot;title&quot;:&quot;state VotingForWinner&quot;,&quot;fullFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js&quot;,&quot;file&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook for \&quot;should not allow joinChallenge() in VotingForWinner state\&quot;&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW State functions availability state VotingForWinner \&quot;before each\&quot; hook for \&quot;should not allow joinChallenge() in VotingForWinner state\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;({challenge, signers, bid, token} = await loadFixture(VotingForWinnerFixture));&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;Error: incorrect number of arguments to constructor&quot;,&quot;estack&quot;:&quot;Error: incorrect number of arguments to constructor\n    at ContractFactory.getDeployTransaction (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/ethers/src.ts/contract/factory.ts:87:19)\n    at ContractFactory.deploy (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/ethers/src.ts/contract/factory.ts:105:31)\n    at deployedChallengeFixtureBase (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:65:41)\n    at OngoingChallengeFixture (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:95:52)\n    at VotingForWinnerFixture (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:120:52)\n    at loadFixture (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/@nomicfoundation/hardhat-network-helpers/src/loadFixture.ts:59:18)\n    at Context.&lt;anonymous&gt; (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:866:53)&quot;},&quot;uuid&quot;:&quot;2bdb4fea-0441-44e6-8ec9-3716bff1c8cd&quot;,&quot;parentUUID&quot;:&quot;b39663ba-a38a-4811-a3a7-ff14cc738b5b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should not allow joinChallenge() in VotingForWinner state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW State functions availability state VotingForWinner should not allow joinChallenge() in VotingForWinner state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { v: v1, r: r1, s: s1, deadline: deadline1 } = await GetRSVsig(signers[0], token, bid, challenge);\nawait expect(\n    challenge.joinChallenge(deadline1, v1, r1, s1, [])\n).to.be.revertedWith(\&quot;Not allowed in this state\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b57f4d52-2453-450f-b459-0b45eabdebcf&quot;,&quot;parentUUID&quot;:&quot;b39663ba-a38a-4811-a3a7-ff14cc738b5b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;should not allow withdrawFromChallenge() in OngoingChallenge state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW State functions availability state VotingForWinner should not allow withdrawFromChallenge() in OngoingChallenge state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n    challenge.withdrawFromChallenge()\n).to.be.revertedWith(\&quot;Not allowed in this state\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b8e78aeb-3860-4cba-9427-81237c6ed7a1&quot;,&quot;parentUUID&quot;:&quot;b39663ba-a38a-4811-a3a7-ff14cc738b5b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;should not allow startChallenge() in VotingForWinner state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW State functions availability state VotingForWinner should not allow startChallenge() in VotingForWinner state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n    challenge.startChallenge()\n).to.be.revertedWith(\&quot;Not allowed in this state\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9cef972f-f4e3-4e7a-8e40-46fb8f865e62&quot;,&quot;parentUUID&quot;:&quot;b39663ba-a38a-4811-a3a7-ff14cc738b5b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;should not allow withdrawPrize() in VotingForWinner state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW State functions availability state VotingForWinner should not allow withdrawPrize() in VotingForWinner state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n    challenge.withdrawPrize()\n).to.be.revertedWith(\&quot;Not allowed in this state\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7264ad56-0412-41d1-8ffc-c86461316c1e&quot;,&quot;parentUUID&quot;:&quot;b39663ba-a38a-4811-a3a7-ff14cc738b5b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;b57f4d52-2453-450f-b459-0b45eabdebcf&quot;,&quot;b8e78aeb-3860-4cba-9427-81237c6ed7a1&quot;,&quot;9cef972f-f4e3-4e7a-8e40-46fb8f865e62&quot;,&quot;7264ad56-0412-41d1-8ffc-c86461316c1e&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;91ba7098-46b6-4af8-b85c-e8c4c2bb82fb&quot;,&quot;title&quot;:&quot;state ChallengeWon&quot;,&quot;fullFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js&quot;,&quot;file&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook for \&quot;should not allow joinChallenge() in ChallengeWon state\&quot;&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW State functions availability state ChallengeWon \&quot;before each\&quot; hook for \&quot;should not allow joinChallenge() in ChallengeWon state\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;({challenge, signers, bid, token} = await loadFixture(EndingVoteFixture));\nawait challenge.endWinnerVote();&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;Error: incorrect number of arguments to constructor&quot;,&quot;estack&quot;:&quot;Error: incorrect number of arguments to constructor\n    at ContractFactory.getDeployTransaction (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/ethers/src.ts/contract/factory.ts:87:19)\n    at ContractFactory.deploy (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/ethers/src.ts/contract/factory.ts:105:31)\n    at deployedChallengeFixtureBase (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:65:41)\n    at OngoingChallengeFixture (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:95:52)\n    at VotingForWinnerFixture (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:120:52)\n    at EndingVoteFixture (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:131:52)\n    at loadFixture (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/@nomicfoundation/hardhat-network-helpers/src/loadFixture.ts:59:18)\n    at Context.&lt;anonymous&gt; (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:899:53)&quot;},&quot;uuid&quot;:&quot;445ee6a9-1f35-476a-99e5-00bd33402294&quot;,&quot;parentUUID&quot;:&quot;91ba7098-46b6-4af8-b85c-e8c4c2bb82fb&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should not allow joinChallenge() in ChallengeWon state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW State functions availability state ChallengeWon should not allow joinChallenge() in ChallengeWon state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { v: v1, r: r1, s: s1, deadline: deadline1 } = await GetRSVsig(signers[0], token, bid, challenge);\nawait expect(\n    challenge.joinChallenge(deadline1, v1, r1, s1, [])\n).to.be.revertedWith(\&quot;Not allowed in this state\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b3fd4b50-16fc-4928-b435-58238d288d7c&quot;,&quot;parentUUID&quot;:&quot;91ba7098-46b6-4af8-b85c-e8c4c2bb82fb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;should not allow withdrawFromChallenge() in OngoingChallenge state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW State functions availability state ChallengeWon should not allow withdrawFromChallenge() in OngoingChallenge state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n    challenge.withdrawFromChallenge()\n).to.be.revertedWith(\&quot;Not allowed in this state\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;837ee58a-9ed9-474e-a32f-feebc48157a4&quot;,&quot;parentUUID&quot;:&quot;91ba7098-46b6-4af8-b85c-e8c4c2bb82fb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;should not allow startChallenge() in ChallengeWon state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW State functions availability state ChallengeWon should not allow startChallenge() in ChallengeWon state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n    challenge.startChallenge()\n).to.be.revertedWith(\&quot;Not allowed in this state\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;477c75ad-f75e-4b12-9344-a1782edc887d&quot;,&quot;parentUUID&quot;:&quot;91ba7098-46b6-4af8-b85c-e8c4c2bb82fb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;should not allow voteForWinner() in ChallengeWon state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW State functions availability state ChallengeWon should not allow voteForWinner() in ChallengeWon state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n    challenge.voteForWinner(signers[1].address)\n).to.be.revertedWith(\&quot;Not allowed in this state\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8d899249-fd4a-4770-9bc9-e6a067fcc5e3&quot;,&quot;parentUUID&quot;:&quot;91ba7098-46b6-4af8-b85c-e8c4c2bb82fb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;should not allow endWinnerVote() in ChallengeWon state&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW State functions availability state ChallengeWon should not allow endWinnerVote() in ChallengeWon state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await expect(\n    challenge.endWinnerVote()\n).to.be.revertedWith(\&quot;Not allowed in this state\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cd848ea8-7d4f-45cb-9691-8ef28deff33e&quot;,&quot;parentUUID&quot;:&quot;91ba7098-46b6-4af8-b85c-e8c4c2bb82fb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;b3fd4b50-16fc-4928-b435-58238d288d7c&quot;,&quot;837ee58a-9ed9-474e-a32f-feebc48157a4&quot;,&quot;477c75ad-f75e-4b12-9344-a1782edc887d&quot;,&quot;8d899249-fd4a-4770-9bc9-e6a067fcc5e3&quot;,&quot;cd848ea8-7d4f-45cb-9691-8ef28deff33e&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;2a65fc0d-2900-40db-8202-fe6c54602ed1&quot;,&quot;title&quot;:&quot;Events&quot;,&quot;fullFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js&quot;,&quot;file&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should emit an event when a Player Joined&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW Events should emit an event when a Player Joined&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const {challenge, signers, bid, token} = await loadFixture(deployedChallengeFixtureBase)\nconst { v: v1, r: r1, s: s1, deadline: deadline1 } = await GetRSVsig(signers[0], token, bid, challenge);\nawait expect(challenge.joinChallenge(deadline1, v1, r1, s1, []))\n    .to.emit(challenge, \&quot;PlayerJoined\&quot;)\n    .withArgs(signers[0].address);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;Error: incorrect number of arguments to constructor&quot;,&quot;estack&quot;:&quot;Error: incorrect number of arguments to constructor\n    at ContractFactory.getDeployTransaction (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/ethers/src.ts/contract/factory.ts:87:19)\n    at ContractFactory.deploy (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/ethers/src.ts/contract/factory.ts:105:31)\n    at deployedChallengeFixtureBase (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:65:41)\n    at loadFixture (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/@nomicfoundation/hardhat-network-helpers/src/loadFixture.ts:59:18)\n    at Context.&lt;anonymous&gt; (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:938:54)&quot;},&quot;uuid&quot;:&quot;1765466b-dccb-4e81-9e21-9a7adb4cede2&quot;,&quot;parentUUID&quot;:&quot;2a65fc0d-2900-40db-8202-fe6c54602ed1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit an event when a Player Withdraws from challenge&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW Events should emit an event when a Player Withdraws from challenge&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:21,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const {challenge, signers, bid, token} = await loadFixture(deployedChallengeFixtureBase)\nconst { v: v1, r: r1, s: s1, deadline: deadline1 } = await GetRSVsig(signers[0], token, bid, challenge);\nawait challenge.joinChallenge(deadline1, v1, r1, s1, []);\nawait expect(challenge.withdrawFromChallenge())\n    .to.emit(challenge, \&quot;PlayerWithdrawn\&quot;)\n    .withArgs(signers[0].address);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;Error: incorrect number of arguments to constructor&quot;,&quot;estack&quot;:&quot;Error: incorrect number of arguments to constructor\n    at ContractFactory.getDeployTransaction (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/ethers/src.ts/contract/factory.ts:87:19)\n    at ContractFactory.deploy (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/ethers/src.ts/contract/factory.ts:105:31)\n    at deployedChallengeFixtureBase (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:65:41)\n    at loadFixture (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/@nomicfoundation/hardhat-network-helpers/src/loadFixture.ts:59:18)\n    at Context.&lt;anonymous&gt; (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:947:54)&quot;},&quot;uuid&quot;:&quot;404c6860-8a51-423f-bb05-bf9ac3950ba3&quot;,&quot;parentUUID&quot;:&quot;2a65fc0d-2900-40db-8202-fe6c54602ed1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit an event when ChallengeStarted&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW Events should emit an event when ChallengeStarted&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:22,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const {challenge, signers, bid, token} = await loadFixture(deployedChallengeFixtureBase)\nconst { v: v1, r: r1, s: s1, deadline: deadline1 } = await GetRSVsig(signers[0], token, bid, challenge);\nconst { v: v2, r: r2, s: s2, deadline: deadline2 } = await GetRSVsig(signers[1], token, bid, challenge);\nawait challenge.joinChallenge(deadline1, v1, r1, s1, []);\nawait challenge.connect(signers[1]).joinChallenge(deadline2, v2, r2, s2, []);\nawait expect(challenge.startChallenge())\n    .to.emit(challenge, \&quot;ChallengeStarted\&quot;)&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;Error: incorrect number of arguments to constructor&quot;,&quot;estack&quot;:&quot;Error: incorrect number of arguments to constructor\n    at ContractFactory.getDeployTransaction (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/ethers/src.ts/contract/factory.ts:87:19)\n    at ContractFactory.deploy (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/ethers/src.ts/contract/factory.ts:105:31)\n    at deployedChallengeFixtureBase (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:65:41)\n    at loadFixture (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/@nomicfoundation/hardhat-network-helpers/src/loadFixture.ts:59:18)\n    at Context.&lt;anonymous&gt; (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:957:54)&quot;},&quot;uuid&quot;:&quot;0593ec3f-500c-4fca-82da-5172b78d4376&quot;,&quot;parentUUID&quot;:&quot;2a65fc0d-2900-40db-8202-fe6c54602ed1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit an event when ChallengeEnded &quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW Events should emit an event when ChallengeEnded &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:26,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const {challenge, signers} = await loadFixture(OngoingChallengeFixture)\n//Pass enough time\nawait time.increase(duration)\nawait expect(challenge.voteForWinner(signers[1].address))\n    .to.emit(challenge, \&quot;ChallengeEnded\&quot;)&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;Error: incorrect number of arguments to constructor&quot;,&quot;estack&quot;:&quot;Error: incorrect number of arguments to constructor\n    at ContractFactory.getDeployTransaction (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/ethers/src.ts/contract/factory.ts:87:19)\n    at ContractFactory.deploy (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/ethers/src.ts/contract/factory.ts:105:31)\n    at deployedChallengeFixtureBase (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:65:41)\n    at OngoingChallengeFixture (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:95:52)\n    at loadFixture (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/@nomicfoundation/hardhat-network-helpers/src/loadFixture.ts:59:18)\n    at Context.&lt;anonymous&gt; (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:969:42)&quot;},&quot;uuid&quot;:&quot;7a5de7a2-2511-4baa-9d38-340c0d6bda77&quot;,&quot;parentUUID&quot;:&quot;2a65fc0d-2900-40db-8202-fe6c54602ed1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit an event when PlayerVoted&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW Events should emit an event when PlayerVoted&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const {challenge, signers} = await loadFixture(VotingForWinnerFixture)\nawait expect(challenge.voteForWinner(signers[1].address))\n    .to.emit(challenge, \&quot;PlayerVoted\&quot;)\n    .withArgs(signers[0].address, signers[1].address)&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;Error: incorrect number of arguments to constructor&quot;,&quot;estack&quot;:&quot;Error: incorrect number of arguments to constructor\n    at ContractFactory.getDeployTransaction (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/ethers/src.ts/contract/factory.ts:87:19)\n    at ContractFactory.deploy (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/ethers/src.ts/contract/factory.ts:105:31)\n    at deployedChallengeFixtureBase (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:65:41)\n    at OngoingChallengeFixture (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:95:52)\n    at VotingForWinnerFixture (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:120:52)\n    at loadFixture (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/@nomicfoundation/hardhat-network-helpers/src/loadFixture.ts:59:18)\n    at Context.&lt;anonymous&gt; (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:979:42)&quot;},&quot;uuid&quot;:&quot;f79e4658-fae7-4200-8273-9b80777b6205&quot;,&quot;parentUUID&quot;:&quot;2a65fc0d-2900-40db-8202-fe6c54602ed1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit an event when a prize is sent&quot;,&quot;fullTitle&quot;:&quot;tests Challenge contract NEW Events should emit an event when a prize is sent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const {challenge, signers, bid} = await loadFixture(EndingVoteFixture)\nawait challenge.endWinnerVote()\nconst expectedPrize = bid*5n - 5n*bid*BigInt(gold)/100n;\nawait expect(\n    await challenge.connect(signers[1]).withdrawPrize()\n).to.emit(challenge, \&quot;PrizeWithdrawn\&quot;)\n    .withArgs(signers[1].address, expectedPrize)&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;Error: incorrect number of arguments to constructor&quot;,&quot;estack&quot;:&quot;Error: incorrect number of arguments to constructor\n    at ContractFactory.getDeployTransaction (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/ethers/src.ts/contract/factory.ts:87:19)\n    at ContractFactory.deploy (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/ethers/src.ts/contract/factory.ts:105:31)\n    at deployedChallengeFixtureBase (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:65:41)\n    at OngoingChallengeFixture (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:95:52)\n    at VotingForWinnerFixture (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:120:52)\n    at EndingVoteFixture (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:131:52)\n    at loadFixture (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/node_modules/@nomicfoundation/hardhat-network-helpers/src/loadFixture.ts:59:18)\n    at Context.&lt;anonymous&gt; (/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/test/ChallengeNEW.test.js:986:47)&quot;},&quot;uuid&quot;:&quot;d8c7d0c8-7f64-4b00-ab0c-c97c6b3306b7&quot;,&quot;parentUUID&quot;:&quot;2a65fc0d-2900-40db-8202-fe6c54602ed1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;1765466b-dccb-4e81-9e21-9a7adb4cede2&quot;,&quot;404c6860-8a51-423f-bb05-bf9ac3950ba3&quot;,&quot;0593ec3f-500c-4fca-82da-5172b78d4376&quot;,&quot;7a5de7a2-2511-4baa-9d38-340c0d6bda77&quot;,&quot;f79e4658-fae7-4200-8273-9b80777b6205&quot;,&quot;d8c7d0c8-7f64-4b00-ab0c-c97c6b3306b7&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:132,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:40000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;10.8.2&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:true,&quot;reportFilename&quot;:&quot;report&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;7.1.3&quot;},&quot;marge&quot;:{&quot;options&quot;:{&quot;reportDir&quot;:&quot;test-report&quot;,&quot;reportFilename&quot;:&quot;report&quot;,&quot;quiet&quot;:true},&quot;version&quot;:&quot;6.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;report&quot;,&quot;reportDir&quot;:&quot;test-report&quot;,&quot;reportTitle&quot;:&quot;ChallengeSubgraph&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;test-report/assets&quot;,&quot;jsonFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/ChallengeSubgraph/test-report/report.json&quot;,&quot;htmlFile&quot;:&quot;/home/ibuntu/BlockchainDev/Alyra/MyTests/PROJET_FINAL/backend/ChallengeSubgraph/test-report/report.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>